<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/4cf2300e9c8272f7-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/de70bee13400563f.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/3e435f9a1dbb5b5b.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-5400bf868d87f903.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs"/><script src="/_next/static/chunks/87c73c54-dd8d81ac9604067c.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/18-46ed77b917ddd87b.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/main-app-57aa1716f0d0f500.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/b1298b8d-5cac6cd7c8e952ff.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/378e5a93-860e027c5a5e0c0d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/f7f68e2d-d8bf979db5ff4e9d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/7963-b29c27a8b53c3f2a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/1265-fa8a95d3842768f5.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/9885-b57089f03806c3b8.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/659-ee9e1e775e30dcef.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/app/layout-0537c2076823e553.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/7bf36345-1ac10ec2f0e0c88f.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/c16f53c3-b390b6f98a69dcec.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/6212-505c2fc95d1a35ae.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/4336-624d5ae6f4cc1cc7.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/8461-369a9f0c48ea2626.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/7198-985a49f2b6072d25.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/5462-08221e91030fd747.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/4429-943205658cbafffe.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/9976-9250854d58eefaa3.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/1481-25d5bbc4f2d9524a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/app/%5Borg%5D/%5Brepo%5D/%5B%5B...wikiRoutes%5D%5D/page-6651f8cd8321a0db.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/25-9f305b682cea7558.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/7391-e3942dcd34ddcc66.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/6373-d56a493968555802.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/6375-7e0e75eb09fc9abe.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/9437-be873d1907eef4d4.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><script src="/_next/static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-77683f6369c5b39e.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" async=""></script><meta name="next-size-adjust" content=""/><title>flyteorg/flyte | DeepWiki</title><meta name="description" content="Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect"/><meta name="keywords" content="flyteorg/flyte,flyteorg,flyte,documentation,wiki,codebase,AI documentation,Devin,Overview"/><link rel="canonical" href="https://deepwiki.com/flyteorg/flyte"/><meta property="og:title" content="flyteorg/flyte | DeepWiki"/><meta property="og:description" content="Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect"/><meta property="og:url" content="https://deepwiki.com/flyteorg/flyte"/><meta property="og:site_name" content="DeepWiki"/><meta property="og:image" content="https://deepwiki.com/flyteorg/flyte/og-image.png?page=1"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@cognition"/><meta name="twitter:creator" content="@cognition"/><meta name="twitter:title" content="flyteorg/flyte | DeepWiki"/><meta name="twitter:description" content="Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect"/><meta name="twitter:image" content="https://deepwiki.com/flyteorg/flyte/og-image.png?page=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="48x48"/><link rel="icon" href="/icon.png?1ee4c6a68a73a205" type="image/png" sizes="48x48"/><link rel="apple-touch-icon" href="/apple-icon.png?a4f658907db0ab87" type="image/png" sizes="180x180"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" noModule=""></script></head><body class="__variable_188709 font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased"><div hidden=""><!--$--><!--/$--></div><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false"></section><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","light",null,["light","dark"],null,true,true)</script><!--$?--><template id="B:0"></template><div class="flex min-h-screen w-full flex-col text-white"><div class="container-wrapper flex flex-1 items-center justify-center px-4"><div class="inline-block bg-clip-text text-[#b5b5b5a4] animate-shine text-center text-lg" style="background-image:linear-gradient(120deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0) 60%);background-size:200% 100%;-webkit-background-clip:text;animation-duration:1s">Loading...</div></div></div><!--/$--><script>requestAnimationFrame(function(){$RT=performance.now()});</script><script src="/_next/static/chunks/webpack-5400bf868d87f903.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs" id="_R_" async=""></script><div hidden id="S:0"><div class="flex min-h-screen w-full flex-col text-white" id="codebase-wiki-repo-page"><div class="bg-background border-b-border sticky top-0 z-30 border-b border-dashed"><div class="font-geist-mono relative flex h-8 items-center justify-center text-xs font-medium sm:hidden"><div class="powered-by-devin-gradient absolute inset-0 z-[-1] h-8 w-full"></div><button class="flex items-center gap-2"><svg class="size-3 [&amp;_path]:stroke-0 [&amp;_path]:animate-[custom-pulse_1.8s_infinite_var(--delay,0s)]" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="[--delay:0.6s]" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="[--delay:1.2s]" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg>Index your code with Devin</button></div><div class="container-wrapper"><div class="container mx-auto flex w-full flex-row items-center gap-2 py-4 md:py-6"><a class="flex items-center gap-3" href="/"><span class="text-base font-medium leading-none md:text-lg hidden sm:block">DeepWiki</span></a><div class="flex-1"><div class="flex flex-row items-center gap-2"><a class="block text-xs font-medium leading-none text-white sm:hidden md:text-lg" href="/">DeepWiki</a><p class="text-sm font-normal leading-none md:text-lg"><a href="https://github.com/flyteorg/flyte" target="_blank" rel="noopener noreferrer" title="Open repository" class="text-muted-foreground hover:text-muted-foreground/80 group inline-flex items-center gap-1 transition-colors">flyteorg/flyte<!-- --> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="opacity-0 transition-opacity group-hover:opacity-100"><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"></path></svg></a></p></div></div><div class="flex items-center gap-4"><button class="group hidden items-center gap-1.5 md:flex"><div class="relative"><span class="text-foreground/70 group-hover:text-foreground text-xs font-light transition-colors">Index your code with</span><div class="bg-foreground/30 absolute bottom-0 left-0 h-[1px] w-0 transition-all duration-300 group-hover:w-full"></div></div><div class="flex items-center gap-1 transition-transform duration-300 group-hover:translate-x-0.5"><svg class="size-4 transform transition-transform duration-700 group-hover:rotate-180 [&amp;_path]:stroke-0" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg><span class="text-sm font-medium">Devin</span></div></button><button aria-label="Edit Wiki" class="flex items-center rounded-md cursor-pointer transition-all border border-border bg-surface hover:border-border-hover hover:bg-component disabled:cursor-default disabled:opacity-50 disabled:hover:border-border disabled:hover:bg-surface gap-2 px-3 py-1.5 text-sm"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H216a8,8,0,0,0,0-16H115.32l112-112A16,16,0,0,0,227.32,73.37ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z"></path></svg>Edit Wiki</button><button class="flex items-center rounded-md !text-white cursor-pointer transition-all border bg-blue-500 hover:bg-blue-600 border-blue-500 hover:border-blue-600 dark:bg-blue-900 dark:hover:bg-blue-800 dark:border-blue-900 dark:hover:border-blue-800 disabled:cursor-default disabled:opacity-50 disabled:hover:bg-blue-500 disabled:hover:border-blue-500 dark:disabled:hover:bg-blue-900 dark:disabled:hover:border-blue-900 gap-1.5 px-3 py-1.5 text-sm" aria-label="Share" data-state="closed" data-slot="tooltip-trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg><span>Share</span></button><div class="h-8 w-8"></div></div></div></div></div><!--$?--><template id="B:1"></template><div class="container-wrapper flex flex-1 items-center justify-center px-4"><div class="inline-block bg-clip-text text-[#b5b5b5a4] animate-shine text-center text-lg" style="background-image:linear-gradient(120deg, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0.8) 50%, rgba(255, 255, 255, 0) 60%);background-size:200% 100%;-webkit-background-clip:text;animation-duration:1s">Loading...</div></div><!--/$--></div></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><div hidden id="S:1"><script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","headline":"Overview","description":"Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect","image":"https://deepwiki.com/flyteorg/flyte/og-image.png","datePublished":"2025-04-20T05:45:11.919625","dateModified":"2025-04-20T05:45:11.919625","author":{"@type":"Organization","name":"DeepWiki","url":"https://deepwiki.com"},"publisher":{"@type":"Organization","name":"DeepWiki","logo":{"@type":"ImageObject","url":"https://deepwiki.com/icon.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://deepwiki.com/flyteorg/flyte"}}</script><div class="w-full flex-1"><div class="container-wrapper relative mx-auto h-full px-0"><div class="container relative mx-auto flex h-full w-full flex-col gap-0 max-md:!px-0 md:flex-row md:gap-6 lg:gap-10"><div class="border-r-border hidden max-h-screen border-r border-dashed py-6 pr-4 transition-[border-radius] md:sticky md:left-0 md:top-20 md:block md:h-[calc(100vh-82px)] md:w-64 md:flex-shrink-0 md:overflow-y-auto lg:py-9 xl:w-72"><div class="flex h-full w-full max-w-full flex-shrink-0 flex-col overflow-hidden" style="scrollbar-color:var(--color-border) transparent"><div class="flex-shrink-0 px-2"><div class="text-secondary pb-1 text-xs">Last indexed: <!-- -->20 April 2025<!-- --> (<a href="https://github.com/flyteorg/flyte/commits/42002f4d" target="_blank" rel="noopener noreferrer" class="underline-offset-2 hover:underline">42002f</a>)</div></div><ul class="flex-1 flex-shrink-0 space-y-1 overflow-y-auto py-1" style="scrollbar-width:none"><li style="padding-left:0"><a data-selected="true" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/1-overview">Overview</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/1.1-core-components">Core Components</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/1.2-system-architecture">System Architecture</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/2-deployment">Deployment</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/2.1-kubernetes-deployment-with-helm">Kubernetes Deployment with Helm</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/2.2-sandbox-environment">Sandbox Environment</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/3-workflow-execution-engine">Workflow Execution Engine</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/3.1-flyteadmin-execution-management">FlyteAdmin Execution Management</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/3.2-flytepropeller-execution">FlytePropeller Execution</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/3.3-task-execution">Task Execution</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/3.4-array-tasks">Array Tasks</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/4-plugin-system">Plugin System</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/4.1-kubernetes-plugin-machinery">Kubernetes Plugin Machinery</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/4.2-webapi-plugins">WebAPI Plugins</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/4.3-machine-learning-operators">Machine Learning Operators</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/5-api-and-interface-definitions">API and Interface Definitions</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/5.1-flyteidl">FlyteIDL</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/5.2-admin-service">Admin Service</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/6-command-line-interface">Command Line Interface</a></li><li style="padding-left:0"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/7-development-and-contribution">Development and Contribution</a></li><li style="padding-left:12px"><a data-selected="false" class="hover:bg-hover block w-full rounded px-2 py-1.5 text-left text-sm transition-none text-secondary data-[selected=true]:bg-hover data-[selected=true]:text-primary font-normal data-[selected=true]:font-normal" href="/flyteorg/flyte/7.1-build-system">Build System</a></li></ul></div></div><div class="flex h-full flex-1 flex-col overflow-hidden"><div class="bg-background border-b-border sticky top-0 z-10 border-b border-dashed md:hidden"><div class="flex cursor-pointer items-center gap-2 p-3"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="transition-transform"><path d="M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"></path></svg><span class="truncate text-base font-normal">Menu</span></div></div><div class="relative flex-1 overflow-y-auto px-3 pt-3 md:rounded-md md:px-0 md:pt-0 [&amp;_::selection]:bg-purple-500/40" style="scrollbar-color:var(--color-night) transparent"><div class="pb-30 mx-auto max-w-2xl md:pb-40 md:pt-6 lg:pt-8"><div class="prose prose-invert dark:prose-invert prose-headings:text-inherit prose-p:text-inherit max-w-none"><div><div class="prose-custom prose-custom-md prose-custom-gray !max-w-none text-neutral-300 [overflow-wrap:anywhere]"><h1 id="overview" class="group" data-header="true">Overview<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h1>
<details>
<summary>Relevant source files</summary>
<ul>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/datacatalog/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>datacatalog/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/datacatalog/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>datacatalog/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytecopilot/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytecopilot/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytecopilot/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytecopilot/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteidl/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteidl/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteidl/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteidl/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteplugins/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteplugins/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteplugins/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteplugins/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.sum</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/go.mod" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>go.mod</span></a></li>
<li><a href="https://github.com/flyteorg/flyte/blob/42002f4d/go.sum" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4] rounded-r"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>go.sum</span></a></li>
</ul>
</details>
<p>Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architecture, core components, and how they interact to enable workflow orchestration at scale.</p>
<p>Flyte leverages Kubernetes as its underlying execution platform, providing scalability, reproducibility, and reliability for complex computational workflows. This page focuses on introducing the system architecture and core components of the Flyte codebase.</p>
<p>For detailed information about deploying Flyte, see <a href="/flyteorg/flyte/2-deployment" class="text-neutral-300 hover:text-neutral-200 hover:underline">Deployment</a>, and for a deeper dive into how Flyte executes workflows, see <a href="/flyteorg/flyte/3-workflow-execution-engine" class="text-neutral-300 hover:text-neutral-200 hover:underline">Workflow Execution Engine</a>.</p>
<h2 id="core-system-architecture" class="group" data-header="true">Core System Architecture<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Flyte&#x27;s architecture is divided into control plane and data plane components, with additional user-facing interfaces that allow users to interact with the system.</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p><em>Diagram: Flyte System Architecture</em></p>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L33-L34" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">33-34</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod#L1-L48" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-48</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.mod#L1-L73" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-73</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/go.mod#L1-L17" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-17</span></a></p>
<h3 id="core-components" class="group" data-header="true">Core Components<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>


















































<table><thead><tr><th>Component</th><th>Description</th><th>Repository Path</th></tr></thead><tbody><tr><td><strong>FlyteAdmin</strong></td><td>Core service that manages workflow executions, schedules, and system metadata. Provides the main interface for users and other components to interact with Flyte.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/flyteadmin</code></td></tr><tr><td><strong>FlytePropeller</strong></td><td>Kubernetes operator that executes workflows. Responsible for traversing workflow DAGs and launching task executions.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/flytepropeller</code></td></tr><tr><td><strong>DataCatalog</strong></td><td>Service that manages metadata for datasets and artifacts, enabling data lineage and reuse.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/datacatalog</code></td></tr><tr><td><strong>FlyteConsole</strong></td><td>Web UI for users to visualize, manage and analyze workflows and executions.</td><td>Not in this repo</td></tr><tr><td><strong>flytectl</strong></td><td>Command-line interface for Flyte.</td><td>Not in this repo</td></tr><tr><td><strong>FlyteCoPilot</strong></td><td>Sidecar container that assists with data transfer and IO operations for task containers.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/flytecopilot</code></td></tr><tr><td><strong>FlytePlugins</strong></td><td>Collection of plugins that extend FlytePropeller to support various types of tasks and integrations.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/flyteplugins</code></td></tr><tr><td><strong>FlyteIDL</strong></td><td>Interface definition language files defining Flyte&#x27;s core APIs and data models.</td><td><code class="rounded-sm bg-[#e5e5e5] px-[0.25rem] py-[0.20rem] text-xs font-normal leading-[15px] before:hidden after:hidden dark:bg-[#484848]/30">/flyteidl</code></td></tr></tbody></table>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L33-L166" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">33-166</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod#L1-L48" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-48</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.mod#L1-L73" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-73</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/datacatalog/go.mod#L1-L24" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>datacatalog/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-24</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteidl/go.mod#L1-L28" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteidl/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-28</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytecopilot/go.mod#L1-L21" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytecopilot/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-21</span></a></p>
<h2 id="workflow-execution-flow" class="group" data-header="true">Workflow Execution Flow<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>A key concept in Flyte is the workflow execution lifecycle. The diagram below illustrates how a workflow flows through the system from definition to execution:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p><em>Diagram: Workflow Execution Lifecycle</em></p>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod#L1-L48" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-48</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.mod#L1-L73" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-73</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L76-L89" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">76-89</span></a></p>
<h2 id="system-integration-architecture" class="group" data-header="true">System Integration Architecture<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The following diagram illustrates how Flyte integrates with external systems and infrastructure components:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p><em>Diagram: Flyte System Integration Architecture</em></p>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L106-L134" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">106-134</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteplugins/go.mod#L1-L45" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteplugins/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-45</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod#L41-L47" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">41-47</span></a></p>
<h2 id="code-organization" class="group" data-header="true">Code Organization<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>The Flyte codebase is organized into several key repositories, with the main components structured as shown below:</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></pre>
<p><em>Diagram: Flyte Code Organization</em></p>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/go.mod#L1-L17" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-17</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytepropeller/go.mod#L9-L12" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytepropeller/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">9-12</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteadmin/go.mod#L15-L19" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteadmin/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">15-19</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flytecopilot/go.mod#L7-L8" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flytecopilot/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">7-8</span></a></p>
<h2 id="key-concepts" class="group" data-header="true">Key Concepts<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Understanding Flyte requires familiarity with the following core concepts:</p>
<h3 id="workflow-components" class="group" data-header="true">Workflow Components<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>

































<table><thead><tr><th>Concept</th><th>Description</th></tr></thead><tbody><tr><td><strong>Workflow</strong></td><td>A directed acyclic graph (DAG) of tasks that defines a process. Workflows are defined in code using Flyte SDKs.</td></tr><tr><td><strong>Task</strong></td><td>An individual unit of work in a workflow. Tasks can be Python functions, containers, or other execution units.</td></tr><tr><td><strong>Node</strong></td><td>A node in the workflow graph. Can represent a task, a subworkflow, or control flow elements.</td></tr><tr><td><strong>Execution</strong></td><td>An instance of a workflow that is running or has completed.</td></tr><tr><td><strong>Launch Plan</strong></td><td>A template for creating workflow executions with predefined inputs.</td></tr><tr><td><strong>Project &amp; Domain</strong></td><td>Organizational units for workflows, providing isolation and governance.</td></tr></tbody></table>
<h3 id="data-types-and-io" class="group" data-header="true">Data Types and IO<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h3>

























<table><thead><tr><th>Concept</th><th>Description</th></tr></thead><tbody><tr><td><strong>FlyteFile/FlyteDirectory</strong></td><td>Types for transferring files and directories between tasks and storage.</td></tr><tr><td><strong>Structured Dataset</strong></td><td>An abstract 2D representation for data exchange that enforces type checking.</td></tr><tr><td><strong>Types</strong></td><td>Flyte has a strong type system that validates inputs and outputs throughout the workflow.</td></tr><tr><td><strong>Data Catalog</strong></td><td>Manages metadata about datasets to enable lineage tracking and reuse.</td></tr></tbody></table>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L106-L133" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">106-133</span></a> <a href="https://github.com/flyteorg/flyte/blob/42002f4d/flyteidl/go.mod#L1-L28" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>flyteidl/go.mod</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">1-28</span></a></p>
<h2 id="operational-features" class="group" data-header="true">Operational Features<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Flyte provides several operational features that make it suitable for production machine learning and data processing:</p>
<ul>
<li><strong>Reproducibility</strong>: Immutable executions ensure workflow runs can be reproduced exactly.</li>
<li><strong>Fault Tolerance</strong>: Failed tasks can be retried or recovered without rerunning the entire workflow.</li>
<li><strong>Caching</strong>: Outputs can be cached to avoid redundant computation.</li>
<li><strong>Resource Management</strong>: Tasks can request specific compute resources (CPU, memory, GPU).</li>
<li><strong>Multi-tenancy</strong>: Projects and domains provide isolation between different users and teams.</li>
<li><strong>Scheduling</strong>: Workflows can be scheduled to run periodically.</li>
<li><strong>Observability</strong>: Comprehensive tracking of execution status, inputs, outputs, and logs.</li>
</ul>
<p>Sources: <a href="https://github.com/flyteorg/flyte/blob/42002f4d/README.md#L32-L156" target="_blank" rel="noopener noreferrer" class="mb-1 mr-1 inline-flex items-stretch font-mono text-xs !no-underline transition-opacity hover:opacity-75"><span class="flex items-center break-all rounded-l px-2 py-1.5 bg-[#e5e5e5] text-[#333333] dark:bg-[#252525] dark:text-[#e4e4e4]"><svg class="mr-1.5 hidden h-3.5 w-3.5 flex-shrink-0 opacity-40 md:block" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>README.md</span><span class="flex flex-shrink-0 items-center rounded-r border-l px-2 py-1.5 border-[#dddddd] bg-[#d8d8d8] text-[#666666] dark:border-[#333333] dark:bg-[#2a2a2a] dark:text-[#888888]">32-156</span></a></p>
<h2 id="summary" class="group" data-header="true">Summary<button class="relative ml-2 cursor-pointer align-baseline text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to header"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></h2>
<p>Flyte is a comprehensive workflow orchestration platform built on Kubernetes. Its architecture is divided into control plane components (FlyteAdmin, DataCatalog) and data plane components (FlytePropeller, plugins). The system is designed to support a wide range of workflow types, from simple data processing to complex machine learning pipelines, with strong emphasis on reproducibility, scalability, and reliability.</p>
<p>This overview provides a foundation for understanding the Flyte system. For more detailed information about specific components and features, refer to the related pages in this wiki.</p></div></div></div></div></div></div><div class="hidden overflow-hidden transition-[border-radius] xl:sticky xl:right-0 xl:top-20 xl:block xl:h-[calc(100vh-82px)] xl:w-64 xl:flex-shrink-0 2xl:w-72" style="scrollbar-width:none"><div class="flex max-h-full w-full flex-shrink-0 flex-col py-6 pt-0 text-sm lg:pb-4 lg:pt-8 xl:w-64 2xl:w-72" style="scrollbar-color:var(--color-night) transparent"><div><div class="relative mx-4 my-4 rounded-md border border-neutral-200 bg-neutral-100 p-3 text-sm text-neutral-600 dark:border-neutral-800 dark:bg-neutral-900 dark:text-neutral-400"><button class="absolute right-2 top-2 rounded-sm p-1 opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-400 focus:ring-offset-2"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg><span class="sr-only">Dismiss</span></button><p class="text-sm font-medium">Refresh this wiki</p><button class="mt-2 flex items-center gap-1 rounded-md bg-neutral-200 px-2 py-1 text-sm font-medium text-neutral-700 transition-colors hover:bg-neutral-300 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700">Enter email to refresh</button></div></div><h3 class="px-4 pb-5 text-lg font-medium leading-none">On this page</h3><ul style="scrollbar-width:none" class="min-h-0 flex-1 space-y-3 overflow-y-auto p-4 pt-0"><li class=""><a href="#overview" class="hover:text-primary pr-1 transition-all text-primary font-medium">Overview</a></li><li class="ml-3"><a href="#core-system-architecture" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Core System Architecture</a></li><li class="ml-6"><a href="#core-components" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Core Components</a></li><li class="ml-3"><a href="#workflow-execution-flow" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Workflow Execution Flow</a></li><li class="ml-3"><a href="#system-integration-architecture" class="hover:text-primary pr-1 font-normal transition-all text-secondary">System Integration Architecture</a></li><li class="ml-3"><a href="#code-organization" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Code Organization</a></li><li class="ml-3"><a href="#key-concepts" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Key Concepts</a></li><li class="ml-6"><a href="#workflow-components" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Workflow Components</a></li><li class="ml-6"><a href="#data-types-and-io" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Data Types and IO</a></li><li class="ml-3"><a href="#operational-features" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Operational Features</a></li><li class="ml-3"><a href="#summary" class="hover:text-primary pr-1 font-normal transition-all text-secondary">Summary</a></li></ul></div></div><div class="pointer-events-none fixed bottom-2 left-2 right-2 mt-2 md:bottom-4 md:left-0 md:right-0"><div class="z-10 mx-auto max-w-3xl"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></div></div></div></div><!--$--><!--/$--></div><script>$RC("B:1","S:1")</script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n"])</script><script>self.__next_f.push([1,"2:I[49138,[\"9453\",\"static/chunks/b1298b8d-5cac6cd7c8e952ff.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"8970\",\"static/chunks/378e5a93-860e027c5a5e0c0d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1585\",\"static/chunks/f7f68e2d-d8bf979db5ff4e9d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7963\",\"static/chunks/7963-b29c27a8b53c3f2a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1265\",\"static/chunks/1265-fa8a95d3842768f5.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"9885\",\"static/chunks/9885-b57089f03806c3b8.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"659\",\"static/chunks/659-ee9e1e775e30dcef.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7177\",\"static/chunks/app/layout-0537c2076823e553.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\"],\"RootProvider\"]\n"])</script><script>self.__next_f.push([1,"3:I[85341,[],\"\"]\n4:I[90025,[],\"\"]\n7:I[41012,[],\"ClientPageRoot\"]\n"])</script><script>self.__next_f.push([1,"8:I[57456,[\"9453\",\"static/chunks/b1298b8d-5cac6cd7c8e952ff.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"8970\",\"static/chunks/378e5a93-860e027c5a5e0c0d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1585\",\"static/chunks/f7f68e2d-d8bf979db5ff4e9d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"4129\",\"static/chunks/7bf36345-1ac10ec2f0e0c88f.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"2545\",\"static/chunks/c16f53c3-b390b6f98a69dcec.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7963\",\"static/chunks/7963-b29c27a8b53c3f2a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1265\",\"static/chunks/1265-fa8a95d3842768f5.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6212\",\"static/chunks/6212-505c2fc95d1a35ae.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"9885\",\"static/chunks/9885-b57089f03806c3b8.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"4336\",\"static/chunks/4336-624d5ae6f4cc1cc7.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"659\",\"static/chunks/659-ee9e1e775e30dcef.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"8461\",\"static/chunks/8461-369a9f0c48ea2626.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7198\",\"static/chunks/7198-985a49f2b6072d25.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"5462\",\"static/chunks/5462-08221e91030fd747.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"4429\",\"static/chunks/4429-943205658cbafffe.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"9976\",\"static/chunks/9976-9250854d58eefaa3.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1481\",\"static/chunks/1481-25d5bbc4f2d9524a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"3285\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/%5B%5B...wikiRoutes%5D%5D/page-6651f8cd8321a0db.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"b:I[15104,[],\"OutletBoundary\"]\nd:I[94777,[],\"AsyncMetadataOutlet\"]\nf:I[15104,[],\"ViewportBoundary\"]\n11:I[15104,[],\"MetadataBoundary\"]\n12:\"$Sreact.suspense\"\n14:I[34431,[],\"\"]\n:HL[\"/_next/static/media/4cf2300e9c8272f7-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/de70bee13400563f.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"style\"]\n:HL[\"/_next/static/css/3e435f9a1dbb5b5b.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"yATpRlI1wOgX1cb5YQcha\",\"p\":\"\",\"c\":[\"\",\"flyteorg\",\"flyte\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"org\",\"flyteorg\",\"d\"],{\"children\":[[\"repo\",\"flyte\",\"d\"],{\"children\":[[\"wikiRoutes\",\"\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/de70bee13400563f.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/3e435f9a1dbb5b5b.css?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{}],[\"$\",\"body\",null,{\"className\":\"__variable_188709 font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[[\"org\",\"flyteorg\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"repo\",\"flyte\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$L5\"]}],{\"children\":[[\"wikiRoutes\",\"\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$L6\"]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L7\",null,{\"Component\":\"$8\",\"searchParams\":{},\"params\":{\"org\":\"flyteorg\",\"repo\":\"flyte\"},\"promises\":[\"$@9\",\"$@a\"]}],null,[\"$\",\"$Lb\",null,{\"children\":[\"$Lc\",[\"$\",\"$Ld\",null,{\"promise\":\"$@e\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$L11\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$12\",null,{\"fallback\":null,\"children\":\"$L13\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$14\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:{}\na:\"$0:f:0:1:2:children:2:children:2:children:2:children:1:props:children:0:props:params\"\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nc:null\n"])</script><script>self.__next_f.push([1,"15:I[13550,[\"9453\",\"static/chunks/b1298b8d-5cac6cd7c8e952ff.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"8970\",\"static/chunks/378e5a93-860e027c5a5e0c0d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1585\",\"static/chunks/f7f68e2d-d8bf979db5ff4e9d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7963\",\"static/chunks/7963-b29c27a8b53c3f2a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1265\",\"static/chunks/1265-fa8a95d3842768f5.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6212\",\"static/chunks/6212-505c2fc95d1a35ae.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"4336\",\"static/chunks/4336-624d5ae6f4cc1cc7.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"25\",\"static/chunks/25-9f305b682cea7558.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7391\",\"static/chunks/7391-e3942dcd34ddcc66.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6373\",\"static/chunks/6373-d56a493968555802.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6375\",\"static/chunks/6375-7e0e75eb09fc9abe.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"9437\",\"static/chunks/9437-be873d1907eef4d4.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-77683f6369c5b39e.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\"],\"HeaderWrapperWithSuspense\"]\n"])</script><script>self.__next_f.push([1,"16:I[82188,[\"9453\",\"static/chunks/b1298b8d-5cac6cd7c8e952ff.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"8970\",\"static/chunks/378e5a93-860e027c5a5e0c0d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1585\",\"static/chunks/f7f68e2d-d8bf979db5ff4e9d.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7963\",\"static/chunks/7963-b29c27a8b53c3f2a.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"1265\",\"static/chunks/1265-fa8a95d3842768f5.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6212\",\"static/chunks/6212-505c2fc95d1a35ae.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"4336\",\"static/chunks/4336-624d5ae6f4cc1cc7.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"25\",\"static/chunks/25-9f305b682cea7558.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"7391\",\"static/chunks/7391-e3942dcd34ddcc66.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6373\",\"static/chunks/6373-d56a493968555802.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"6375\",\"static/chunks/6375-7e0e75eb09fc9abe.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"9437\",\"static/chunks/9437-be873d1907eef4d4.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\",\"2933\",\"static/chunks/app/%5Borg%5D/%5Brepo%5D/layout-77683f6369c5b39e.js?dpl=dpl_xmAp5tbiQAbjmsBaj3oa3eJ2LpGs\"],\"WikiContextProvider\"]\n"])</script><script>self.__next_f.push([1,"2d:I[36505,[],\"IconMark\"]\n17:T2f26,"])</script><script>self.__next_f.push([1,"# Overview\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [README.md](README.md)\n- [datacatalog/go.mod](datacatalog/go.mod)\n- [datacatalog/go.sum](datacatalog/go.sum)\n- [flyteadmin/go.mod](flyteadmin/go.mod)\n- [flyteadmin/go.sum](flyteadmin/go.sum)\n- [flytecopilot/go.mod](flytecopilot/go.mod)\n- [flytecopilot/go.sum](flytecopilot/go.sum)\n- [flyteidl/go.mod](flyteidl/go.mod)\n- [flyteidl/go.sum](flyteidl/go.sum)\n- [flyteplugins/go.mod](flyteplugins/go.mod)\n- [flyteplugins/go.sum](flyteplugins/go.sum)\n- [flytepropeller/go.mod](flytepropeller/go.mod)\n- [flytepropeller/go.sum](flytepropeller/go.sum)\n- [go.mod](go.mod)\n- [go.sum](go.sum)\n\n\u003c/details\u003e\n\n\n\nFlyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architecture, core components, and how they interact to enable workflow orchestration at scale.\n\nFlyte leverages Kubernetes as its underlying execution platform, providing scalability, reproducibility, and reliability for complex computational workflows. This page focuses on introducing the system architecture and core components of the Flyte codebase.\n\nFor detailed information about deploying Flyte, see [Deployment](#2), and for a deeper dive into how Flyte executes workflows, see [Workflow Execution Engine](#3).\n\n## Core System Architecture\n\nFlyte's architecture is divided into control plane and data plane components, with additional user-facing interfaces that allow users to interact with the system.\n\n```mermaid\ngraph TD\n    subgraph \"User Interfaces\"\n        FlyteConsole[\"FlyteConsole UI\"]\n        FlyteCtl[\"flytectl CLI\"]\n        FlyteSDKs[\"Python/Java/Scala SDKs\"]\n    end\n    \n    subgraph \"Control Plane\"\n        FlyteAdmin[\"FlyteAdmin Service\"]\n        DataCatalog[\"DataCatalog Service\"]\n        FlyteScheduler[\"Scheduler Service\"]\n    end\n    \n    subgraph \"Data Plane\"\n        FlytePropeller[\"FlytePropeller\"]\n        Plugins[\"Task Plugins\"]\n        FlyteCoPilot[\"FlyteCoPilot\"]\n    end\n    \n    subgraph \"Storage \u0026 Infrastructure\"\n        Database[(Metadata DB)]\n        ObjectStore[(Object Storage)]\n        K8s[(\"Kubernetes API\")]\n    end\n    \n    FlyteSDKs --\u003e|\"Register \u0026 execute workflows\"| FlyteAdmin\n    FlyteCtl --\u003e|\"Manage resources\"| FlyteAdmin\n    FlyteConsole --\u003e|\"Display UI\"| FlyteAdmin\n    \n    FlyteAdmin --\u003e|\"Store metadata\"| Database\n    FlyteAdmin --\u003e|\"Store artifacts\"| ObjectStore\n    FlyteAdmin --\u003e|\"Create workflow executions\"| FlytePropeller\n    FlyteAdmin \u003c--\u003e|\"Catalog operations\"| DataCatalog\n    \n    DataCatalog --\u003e|\"Store dataset metadata\"| Database\n    DataCatalog --\u003e|\"Track artifacts\"| ObjectStore\n    \n    FlytePropeller --\u003e|\"Create \u0026 monitor resources\"| K8s\n    FlytePropeller --\u003e|\"Execute tasks\"| Plugins\n    FlytePropeller --\u003e|\"Report execution status\"| FlyteAdmin\n    \n    Plugins --\u003e|\"Create task pods\"| K8s\n    FlyteCoPilot --\u003e|\"IO operations\"| ObjectStore\n```\n\n*Diagram: Flyte System Architecture*\n\nSources: [README.md:33-34](), [flytepropeller/go.mod:1-48](), [flyteadmin/go.mod:1-73](), [go.mod:1-17]()\n\n### Core Components\n\n| Component | Description | Repository Path |\n|-----------|-------------|-----------------|\n| **FlyteAdmin** | Core service that manages workflow executions, schedules, and system metadata. Provides the main interface for users and other components to interact with Flyte. | `/flyteadmin` |\n| **FlytePropeller** | Kubernetes operator that executes workflows. Responsible for traversing workflow DAGs and launching task executions. | `/flytepropeller` |\n| **DataCatalog** | Service that manages metadata for datasets and artifacts, enabling data lineage and reuse. | `/datacatalog` |\n| **FlyteConsole** | Web UI for users to visualize, manage and analyze workflows and executions. | Not in this repo |\n| **flytectl** | Command-line interface for Flyte. | Not in this repo |\n| **FlyteCoPilot** | Sidecar container that assists with data transfer and IO operations for task containers. | `/flytecopilot` |\n| **FlytePlugins** | Collection of plugins that extend FlytePropeller to support various types of tasks and integrations. | `/flyteplugins` |\n| **FlyteIDL** | Interface definition language files defining Flyte's core APIs and data models. | `/flyteidl` |\n\nSources: [README.md:33-166](), [flytepropeller/go.mod:1-48](), [flyteadmin/go.mod:1-73](), [datacatalog/go.mod:1-24](), [flyteidl/go.mod:1-28](), [flytecopilot/go.mod:1-21]()\n\n## Workflow Execution Flow\n\nA key concept in Flyte is the workflow execution lifecycle. The diagram below illustrates how a workflow flows through the system from definition to execution:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant FlyteSDK as \"FlyteSDK (Python, etc.)\"\n    participant Admin as \"FlyteAdmin\"\n    participant Propeller as \"FlytePropeller\"\n    participant Plugin as \"Plugin (Pod, Spark, etc.)\"\n    participant K8s as \"Kubernetes\"\n    participant Storage as \"Object Storage\"\n    participant DC as \"DataCatalog\"\n    \n    User-\u003e\u003eFlyteSDK: Define workflow\n    FlyteSDK-\u003e\u003eAdmin: Register workflow\n    User-\u003e\u003eAdmin: Create execution\n    Admin-\u003e\u003eStorage: Store execution spec\n    Admin-\u003e\u003ePropeller: Submit FlyteWorkflow CRD\n    \n    loop Until workflow completes\n        Propeller-\u003e\u003ePropeller: Traverse workflow DAG\n        \n        alt Task node\n            Propeller-\u003e\u003ePlugin: Handle task execution\n            Plugin-\u003e\u003eK8s: Create resources (pods, etc.)\n            K8s--\u003e\u003ePlugin: Resource status\n            Plugin-\u003e\u003eStorage: Store outputs\n            Plugin--\u003e\u003ePropeller: Task completion status\n            \n        else Subworkflow node\n            Propeller-\u003e\u003ePropeller: Handle nested workflow\n            \n        else Dynamic node\n            Propeller-\u003e\u003ePlugin: Execute parent task\n            Plugin--\u003e\u003ePropeller: Generate dynamic workflow\n            Propeller-\u003e\u003ePropeller: Execute dynamic workflow\n        end\n        \n        Propeller-\u003e\u003eDC: Register dataset metadata\n        Propeller-\u003e\u003eAdmin: Report node execution\n    end\n    \n    Propeller-\u003e\u003eAdmin: Update workflow execution status\n    Admin--\u003e\u003eUser: Execution results\n```\n\n*Diagram: Workflow Execution Lifecycle*\n\nSources: [flytepropeller/go.mod:1-48](), [flyteadmin/go.mod:1-73](), [README.md:76-89]()\n\n## System Integration Architecture\n\nThe following diagram illustrates how Flyte integrates with external systems and infrastructure components:\n\n```mermaid\ngraph TD\n    subgraph \"Flyte System\"\n        Admin[\"FlyteAdmin\"]\n        Propeller[\"FlytePropeller\"]\n        Plugins[\"Flyte Plugins\"]\n        CoPilot[\"FlyteCoPilot\"]\n        DataCat[\"DataCatalog\"]\n    end\n    \n    subgraph \"Kubernetes Infrastructure\"\n        K8sAPI[\"Kubernetes API\"]\n        Pods[\"Task Pods\"]\n        CRDs[\"Custom Resources\"]\n    end\n    \n    subgraph \"Storage Systems\"\n        DB[(Database)]\n        S3[\"Object Storage (S3/GCS/etc.)\"]\n    end\n    \n    subgraph \"Compute Backends\"\n        Spark[\"Apache Spark\"]\n        Ray[\"Ray Clusters\"]\n        MLFrameworks[\"ML Frameworks\"]\n        ExternalServices[\"External Services\"]\n    end\n    \n    Admin --\u003e|\"Store metadata\"| DB\n    Admin --\u003e|\"Store artifacts\"| S3\n    Admin --\u003e|\"Create CRDs\"| CRDs\n    \n    Propeller --\u003e|\"Watch\"| CRDs\n    Propeller --\u003e|\"Schedule\"| K8sAPI\n    Propeller --\u003e|\"Use\"| Plugins\n    \n    Plugins --\u003e|\"Create\"| Pods\n    Plugins --\u003e|\"Launch\"| Spark\n    Plugins --\u003e|\"Launch\"| Ray\n    Plugins --\u003e|\"Launch\"| MLFrameworks\n    Plugins --\u003e|\"Call\"| ExternalServices\n    \n    CoPilot --\u003e|\"Side-car for\"| Pods\n    CoPilot --\u003e|\"Data transfer\"| S3\n    \n    DataCat --\u003e|\"Store metadata\"| DB\n    DataCat --\u003e|\"Track datasets\"| S3\n    \n    Pods --\u003e|\"Read/Write data\"| S3\n```\n\n*Diagram: Flyte System Integration Architecture*\n\nSources: [README.md:106-134](), [flyteplugins/go.mod:1-45](), [flytepropeller/go.mod:41-47]()\n\n## Code Organization\n\nThe Flyte codebase is organized into several key repositories, with the main components structured as shown below:\n\n```mermaid\ngraph TD\n    subgraph \"flyte Repository\"\n        FlyteRoot[\"github.com/flyteorg/flyte\"]\n        \n        FlyteRoot --\u003e FlyteAdmin[\"flyteadmin\"]\n        FlyteRoot --\u003e FlytePropeller[\"flytepropeller\"]\n        FlyteRoot --\u003e FlytePlugins[\"flyteplugins\"]\n        FlyteRoot --\u003e FlyteStdLib[\"flytestdlib\"]\n        FlyteRoot --\u003e FlyteIDL[\"flyteidl\"]\n        FlyteRoot --\u003e DataCatalog[\"datacatalog\"]\n        FlyteRoot --\u003e FlyteCoPilot[\"flytecopilot\"]\n    end\n    \n    subgraph \"External Repos\"\n        FlyteRoot -.-\u003e FlyteConsole[\"flyteconsole\"]\n        FlyteRoot -.-\u003e FlyteKit[\"flytekit\"]\n        FlyteRoot -.-\u003e FlyteKitJava[\"flytekit-java\"]\n        FlyteRoot -.-\u003e FlyteSnacks[\"flytesnacks\"]\n    end\n    \n    FlyteKit --\u003e|\"Uses\"| FlyteIDL\n    FlyteConsole --\u003e|\"Uses\"| FlyteIDL\n    FlyteAdmin --\u003e|\"Uses\"| FlyteIDL\n    FlytePropeller --\u003e|\"Uses\"| FlyteIDL\n    DataCatalog --\u003e|\"Uses\"| FlyteIDL\n    \n    FlytePlugins --\u003e|\"Extends\"| FlytePropeller\n    \n    FlyteStdLib --\u003e|\"Used by\"| FlyteAdmin\n    FlyteStdLib --\u003e|\"Used by\"| FlytePropeller\n    FlyteStdLib --\u003e|\"Used by\"| FlytePlugins\n    FlyteStdLib --\u003e|\"Used by\"| DataCatalog\n```\n\n*Diagram: Flyte Code Organization*\n\nSources: [go.mod:1-17](), [flytepropeller/go.mod:9-12](), [flyteadmin/go.mod:15-19](), [flytecopilot/go.mod:7-8]()\n\n## Key Concepts\n\nUnderstanding Flyte requires familiarity with the following core concepts:\n\n### Workflow Components\n\n| Concept | Description |\n|---------|-------------|\n| **Workflow** | A directed acyclic graph (DAG) of tasks that defines a process. Workflows are defined in code using Flyte SDKs. |\n| **Task** | An individual unit of work in a workflow. Tasks can be Python functions, containers, or other execution units. |\n| **Node** | A node in the workflow graph. Can represent a task, a subworkflow, or control flow elements. |\n| **Execution** | An instance of a workflow that is running or has completed. |\n| **Launch Plan** | A template for creating workflow executions with predefined inputs. |\n| **Project \u0026 Domain** | Organizational units for workflows, providing isolation and governance. |\n\n### Data Types and IO\n\n| Concept | Description |\n|---------|-------------|\n| **FlyteFile/FlyteDirectory** | Types for transferring files and directories between tasks and storage. |\n| **Structured Dataset** | An abstract 2D representation for data exchange that enforces type checking. |\n| **Types** | Flyte has a strong type system that validates inputs and outputs throughout the workflow. |\n| **Data Catalog** | Manages metadata about datasets to enable lineage tracking and reuse. |\n\nSources: [README.md:106-133](), [flyteidl/go.mod:1-28]()\n\n## Operational Features\n\nFlyte provides several operational features that make it suitable for production machine learning and data processing:\n\n- **Reproducibility**: Immutable executions ensure workflow runs can be reproduced exactly.\n- **Fault Tolerance**: Failed tasks can be retried or recovered without rerunning the entire workflow.\n- **Caching**: Outputs can be cached to avoid redundant computation.\n- **Resource Management**: Tasks can request specific compute resources (CPU, memory, GPU).\n- **Multi-tenancy**: Projects and domains provide isolation between different users and teams.\n- **Scheduling**: Workflows can be scheduled to run periodically.\n- **Observability**: Comprehensive tracking of execution status, inputs, outputs, and logs.\n\nSources: [README.md:32-156]()\n\n## Summary\n\nFlyte is a comprehensive workflow orchestration platform built on Kubernetes. Its architecture is divided into control plane components (FlyteAdmin, DataCatalog) and data plane components (FlytePropeller, plugins). The system is designed to support a wide range of workflow types, from simple data processing to complex machine learning pipelines, with strong emphasis on reproducibility, scalability, and reliability.\n\nThis overview provides a foundation for understanding the Flyte system. For more detailed information about specific components and features, refer to the related pages in this wiki."])</script><script>self.__next_f.push([1,"18:T3fcf,"])</script><script>self.__next_f.push([1,"# Core Components\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [datacatalog/go.mod](datacatalog/go.mod)\n- [datacatalog/go.sum](datacatalog/go.sum)\n- [flyteadmin/go.mod](flyteadmin/go.mod)\n- [flyteadmin/go.sum](flyteadmin/go.sum)\n- [flytecopilot/go.mod](flytecopilot/go.mod)\n- [flytecopilot/go.sum](flytecopilot/go.sum)\n- [flyteidl/clients/go/assets/admin.swagger.json](flyteidl/clients/go/assets/admin.swagger.json)\n- [flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts](flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go)\n- [flyteidl/gen/pb-go/flyteidl/service/admin.pb.go](flyteidl/gen/pb-go/flyteidl/service/admin.pb.go)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json)\n- [flyteidl/gen/pb-js/flyteidl.d.ts](flyteidl/gen/pb-js/flyteidl.d.ts)\n- [flyteidl/gen/pb-js/flyteidl.js](flyteidl/gen/pb-js/flyteidl.js)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi)\n- [flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py](flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs](flyteidl/gen/pb_rust/flyteidl.core.rs)\n- [flyteidl/go.mod](flyteidl/go.mod)\n- [flyteidl/go.sum](flyteidl/go.sum)\n- [flyteidl/protos/flyteidl/core/workflow.proto](flyteidl/protos/flyteidl/core/workflow.proto)\n- [flyteidl/protos/flyteidl/service/admin.proto](flyteidl/protos/flyteidl/service/admin.proto)\n- [flyteplugins/go.mod](flyteplugins/go.mod)\n- [flyteplugins/go.sum](flyteplugins/go.sum)\n- [flytepropeller/go.mod](flytepropeller/go.mod)\n- [flytepropeller/go.sum](flytepropeller/go.sum)\n- [go.mod](go.mod)\n- [go.sum](go.sum)\n\n\u003c/details\u003e\n\n\n\nThis document provides a comprehensive overview of the core components that make up the Flyte platform. It explains the purpose and functionality of each key component, how they interact, and their role in the overall workflow execution lifecycle. For details on how these components are deployed, see [Deployment](#2).\n\n## Overview of Flyte Architecture\n\nFlyte's architecture is designed with separation of concerns and scalability in mind, divided into two main planes:\n\n1. **Control Plane** - Manages workflow definitions, schedules, and metadata\n2. **Data Plane** - Handles the actual execution of workflows and tasks\n\n```mermaid\ngraph TD\n    subgraph \"Control Plane\"\n        FlyteAdmin[\"FlyteAdmin Service\"]\n        DataCatalog[\"DataCatalog Service\"]\n        FlyteConsole[\"FlyteConsole UI\"]\n        DB[(Metadata Database)]\n    end\n    \n    subgraph \"Data Plane\"\n        FlytePropeller[\"FlytePropeller\"]\n        FlytePlugins[\"FlytePlugins\"]\n        FlyteCoPilot[\"FlyteCoPilot Sidecar\"]\n    end\n    \n    subgraph \"External Resources\"\n        K8s[(Kubernetes API)]\n        ObjectStore[(Object Storage)]\n        ExtServices[External Services]\n    end\n    \n    subgraph \"User Interfaces\"\n        CLI[\"flytectl CLI\"]\n        SDKs[\"Python/Java/Scala SDKs\"]\n    end\n    \n    CLI --\u003e FlyteAdmin\n    SDKs --\u003e FlyteAdmin\n    FlyteConsole --\u003e FlyteAdmin\n    \n    FlyteAdmin --\u003e DB\n    FlyteAdmin --\u003e ObjectStore\n    FlyteAdmin --\u003e FlytePropeller\n    FlyteAdmin \u003c--\u003e DataCatalog\n    \n    DataCatalog --\u003e DB\n    DataCatalog --\u003e ObjectStore\n    \n    FlytePropeller --\u003e K8s\n    FlytePropeller --\u003e FlytePlugins\n    FlytePropeller --\u003e ObjectStore\n    FlytePropeller --\u003e FlyteAdmin\n    \n    FlytePlugins --\u003e K8s\n    FlytePlugins --\u003e ExtServices\n    \n    FlyteCoPilot --\u003e ObjectStore\n```\n\nSources:\n- [flytepropeller/go.mod]()\n- [flyteadmin/go.mod]()\n- [go.mod]()\n\n## Core Components in Detail\n\n### FlyteAdmin\n\nFlyteAdmin is the centralized control plane service that handles all user-facing API requests and maintains workflow state. It's responsible for:\n\n1. Registering workflow entities (tasks, workflows, launch plans)\n2. Managing executions (creating, monitoring, terminating)\n3. Storing and retrieving workflow metadata\n4. Handling authentication and authorization\n5. Managing workflow schedules\n\nFlyteAdmin exposes a gRPC service defined by the FlyteIDL and also provides a REST interface through the gRPC Gateway.\n\n```mermaid\ngraph TD\n    subgraph \"FlyteAdmin Service\"\n        AdminService[\"AdminService\"]\n        AuthHandler[\"Authentication/Authorization\"]\n        MetadataManager[\"Metadata Manager\"]\n        StorageManager[\"Storage Manager\"]\n        ExecutionManager[\"Execution Manager\"]\n    end\n    \n    subgraph \"External Systems\"\n        DB[(Database)]\n        ObjectStore[(Object Storage)]\n        Propeller[FlytePropeller]\n        DataCat[DataCatalog]\n    end\n    \n    Client[Client Requests] --\u003e AdminService\n    AdminService --\u003e AuthHandler\n    AdminService --\u003e MetadataManager\n    AdminService --\u003e StorageManager\n    AdminService --\u003e ExecutionManager\n    \n    MetadataManager --\u003e DB\n    StorageManager --\u003e ObjectStore\n    ExecutionManager --\u003e Propeller\n    ExecutionManager --\u003e DataCat\n```\n\nSources:\n- [flyteadmin/go.mod]()\n- [flyteadmin/go.sum]()\n\n### DataCatalog\n\nDataCatalog is a service that manages metadata about datasets produced and consumed by Flyte workflows. Key features include:\n\n1. Dataset versioning\n2. Artifact tracking\n3. Data lineage\n4. Cached execution results\n\nDataCatalog helps optimize workflow execution by enabling the reuse of previously computed results when inputs haven't changed.\n\n```mermaid\ngraph TD\n    subgraph \"DataCatalog Service\"\n        CatalogService[\"CatalogService\"]\n        ArtifactManager[\"Artifact Manager\"]\n        CacheManager[\"Cache Manager\"]\n        MetadataManager[\"Metadata Manager\"]\n    end\n    \n    subgraph \"Storage\"\n        DB[(Database)]\n        ObjectStore[(Object Storage)]\n    end\n    \n    FlyteAdmin[FlyteAdmin] --\u003e CatalogService\n    FlytePropeller[FlytePropeller] --\u003e CatalogService\n    \n    CatalogService --\u003e ArtifactManager\n    CatalogService --\u003e CacheManager\n    CatalogService --\u003e MetadataManager\n    \n    ArtifactManager --\u003e ObjectStore\n    CacheManager --\u003e DB\n    MetadataManager --\u003e DB\n```\n\nSources:\n- [datacatalog/go.mod]()\n- [datacatalog/go.sum]()\n\n### FlytePropeller\n\nFlytePropeller is the workflow execution engine that runs in the data plane. It is implemented as a Kubernetes operator that processes workflow custom resources. Key responsibilities include:\n\n1. Executing workflows according to their specification\n2. Traversing workflow DAGs and scheduling tasks\n3. Handling retries and error conditions\n4. Managing workflow state and task execution\n5. Coordinating with plugins for task execution\n\nFlytePropeller operates on a custom Kubernetes resource called `FlyteWorkflow` which represents the compiled form of a workflow.\n\n```mermaid\ngraph TD\n    subgraph \"FlytePropeller Components\"\n        Controller[\"Controller\"]\n        WorkflowStore[\"Workflow Store\"]\n        NodeExecutor[\"Node Executor\"]\n        TaskExecutor[\"Task Executor\"]\n        PluginRegistry[\"Plugin Registry\"]\n    end\n    \n    subgraph \"Kubernetes\"\n        CRD[\"FlyteWorkflow CRD\"]\n        K8sAPI[\"Kubernetes API\"]\n    end\n    \n    subgraph \"External Systems\"\n        ObjectStore[(Object Storage)]\n        FlyteAdmin[FlyteAdmin]\n    end\n    \n    Controller --\u003e WorkflowStore\n    Controller --\u003e NodeExecutor\n    NodeExecutor --\u003e TaskExecutor\n    TaskExecutor --\u003e PluginRegistry\n    \n    WorkflowStore \u003c--\u003e CRD\n    TaskExecutor \u003c--\u003e K8sAPI\n    PluginRegistry \u003c--\u003e K8sAPI\n    \n    Controller --\u003e ObjectStore\n    Controller --\u003e FlyteAdmin\n```\n\nSources:\n- [flytepropeller/go.mod]()\n- [flytepropeller/go.sum]()\n\n### FlytePlugins\n\nFlytePlugins is an extensible system for executing different types of tasks. Plugins are categorized into:\n\n1. **Kubernetes Plugins** - Execute tasks as Kubernetes resources\n   - Pod Plugin (for container tasks)\n   - Spark Plugin\n   - PyTorch Plugin\n   - TensorFlow Plugin\n   - MPI Plugin\n   - Ray Plugin\n\n2. **WebAPI Plugins** - Interface with external services\n   - BigQuery\n   - Snowflake\n   - Athena\n   - Redshift\n   - Other cloud services\n\nEach plugin implements a specific interface to handle task execution for its supported task type.\n\n```mermaid\ngraph TD\n    subgraph \"Plugin System\"\n        PluginRegistry[\"Plugin Registry\"]\n        \n        subgraph \"K8s Plugins\"\n            PodPlugin[\"Pod Plugin\"]\n            SparkPlugin[\"Spark Plugin\"]\n            MLPlugins[\"ML Framework Plugins\"]\n            RayPlugin[\"Ray Plugin\"]\n        end\n        \n        subgraph \"WebAPI Plugins\"\n            BigQueryPlugin[\"BigQuery Plugin\"]\n            SnowflakePlugin[\"Snowflake Plugin\"]\n            AthenaPlugin[\"Athena Plugin\"]\n            RedshiftPlugin[\"Redshift Plugin\"]\n        end\n    end\n    \n    subgraph \"External Systems\"\n        K8sAPI[\"Kubernetes API\"]\n        CloudServices[\"Cloud Services\"]\n    end\n    \n    TaskExecutor[TaskExecutor] --\u003e PluginRegistry\n    \n    PluginRegistry --\u003e PodPlugin\n    PluginRegistry --\u003e SparkPlugin\n    PluginRegistry --\u003e MLPlugins\n    PluginRegistry --\u003e RayPlugin\n    \n    PluginRegistry --\u003e BigQueryPlugin\n    PluginRegistry --\u003e SnowflakePlugin\n    PluginRegistry --\u003e AthenaPlugin\n    PluginRegistry --\u003e RedshiftPlugin\n    \n    PodPlugin --\u003e K8sAPI\n    SparkPlugin --\u003e K8sAPI\n    MLPlugins --\u003e K8sAPI\n    RayPlugin --\u003e K8sAPI\n    \n    BigQueryPlugin --\u003e CloudServices\n    SnowflakePlugin --\u003e CloudServices\n    AthenaPlugin --\u003e CloudServices\n    RedshiftPlugin --\u003e CloudServices\n```\n\nSources:\n- [flyteplugins/go.mod]()\n- [flyteplugins/go.sum]()\n\n### FlyteCoPilot\n\nFlyteCoPilot is a sidecar container that runs alongside task pods to facilitate input/output handling. It provides:\n\n1. Download of input data from object storage\n2. Upload of output data to object storage\n3. Checkpointing support\n4. Metadata collection\n\nThis sidecar helps abstract storage operations from the task containers themselves.\n\n```mermaid\ngraph TD\n    subgraph \"Kubernetes Pod\"\n        TaskContainer[\"Task Container\"]\n        CoPilotContainer[\"FlyteCoPilot Container\"]\n        \n        subgraph \"Shared Volume\"\n            InputsDir[\"Inputs Directory\"]\n            OutputsDir[\"Outputs Directory\"]\n        end\n    end\n    \n    subgraph \"External Resources\"\n        ObjectStore[(Object Storage)]\n        FlyteAdmin[FlyteAdmin]\n    end\n    \n    CoPilotContainer --\u003e|\"Download Inputs\"| ObjectStore\n    CoPilotContainer --\u003e|\"Write to\"| InputsDir\n    TaskContainer --\u003e|\"Read from\"| InputsDir\n    TaskContainer --\u003e|\"Write to\"| OutputsDir\n    CoPilotContainer --\u003e|\"Read from\"| OutputsDir\n    CoPilotContainer --\u003e|\"Upload Outputs\"| ObjectStore\n    CoPilotContainer --\u003e|\"Report Metadata\"| FlyteAdmin\n```\n\nSources:\n- [flytecopilot/go.mod]()\n- [flytecopilot/go.sum]()\n\n### FlyteConsole\n\nFlyteConsole is the web-based user interface for Flyte. It provides:\n\n1. Workflow visualization and monitoring\n2. Execution launching and management\n3. Task logs and outputs inspection\n4. Project and domain management\n\nFlyteConsole communicates with FlyteAdmin via its REST API.\n\n### flytectl (CLI)\n\nflytectl is the command-line interface for interacting with Flyte. It enables:\n\n1. Workflow registration\n2. Execution creation and management\n3. Configuration of projects, domains, and launch plans\n4. System administration tasks\n\nThe CLI provides similar capabilities to the web UI but through a terminal interface.\n\n### FlyteIDL\n\nFlyteIDL (Interface Definition Language) defines the protocol buffers and gRPC service definitions for all Flyte services. It serves as the contract between different components and clients. Key elements include:\n\n1. Core data types (tasks, workflows, literals)\n2. Admin service definitions\n3. DataCatalog service definitions\n4. Plugin APIs\n\nAll inter-component communication in Flyte is defined through these interfaces.\n\n```mermaid\ngraph TD\n    subgraph \"FlyteIDL\"\n        CoreProtos[\"Core Protos\\n(tasks, workflows, literals)\"]\n        AdminProtos[\"Admin Service Protos\"]\n        CatalogProtos[\"DataCatalog Protos\"]\n        PluginProtos[\"Plugin API Protos\"]\n    end\n    \n    subgraph \"Used By\"\n        FlyteAdmin[\"FlyteAdmin\"]\n        FlytePropeller[\"FlytePropeller\"]\n        DataCatalog[\"DataCatalog\"]\n        FlytePlugins[\"FlytePlugins\"]\n        SDKs[\"Client SDKs\"]\n        CLI[\"flytectl\"]\n        Console[\"FlyteConsole\"]\n    end\n    \n    CoreProtos --\u003e FlyteAdmin\n    CoreProtos --\u003e FlytePropeller\n    CoreProtos --\u003e DataCatalog\n    CoreProtos --\u003e FlytePlugins\n    CoreProtos --\u003e SDKs\n    \n    AdminProtos --\u003e FlyteAdmin\n    AdminProtos --\u003e CLI\n    AdminProtos --\u003e Console\n    AdminProtos --\u003e SDKs\n    \n    CatalogProtos --\u003e DataCatalog\n    CatalogProtos --\u003e FlyteAdmin\n    \n    PluginProtos --\u003e FlytePlugins\n    PluginProtos --\u003e FlytePropeller\n```\n\nSources:\n- [flyteidl/go.mod]()\n- [flyteidl/go.sum]()\n- [flyteidl/gen/pb-js/flyteidl.js]()\n- [flyteidl/gen/pb-js/flyteidl.d.ts]()\n\n## Workflow Execution Flow\n\nTo understand how these components work together, let's trace the flow of a workflow execution:\n\n```mermaid\nsequenceDiagram\n    participant User as User\n    participant Admin as FlyteAdmin\n    participant Propeller as FlytePropeller\n    participant Plugins as FlytePlugins\n    participant CoPilot as FlyteCoPilot\n    participant K8s as Kubernetes\n    participant Storage as Object Storage\n    participant Catalog as DataCatalog\n    \n    User-\u003e\u003eAdmin: Register workflow\n    Admin-\u003e\u003eStorage: Store workflow definition\n    \n    User-\u003e\u003eAdmin: Launch execution\n    Admin-\u003e\u003eStorage: Store execution inputs\n    Admin-\u003e\u003ePropeller: Create FlyteWorkflow CR\n    \n    Propeller-\u003e\u003ePropeller: Traverse workflow graph\n    \n    loop For each node\n        alt Task Node\n            Propeller-\u003e\u003ePlugins: Execute task\n            Plugins-\u003e\u003eK8s: Create pod/resource\n            K8s-\u003e\u003eCoPilot: Start sidecar\n            K8s-\u003e\u003eK8s: Start task container\n            \n            CoPilot-\u003e\u003eStorage: Download inputs\n            CoPilot-\u003e\u003eK8s: Signal task to start\n            K8s-\u003e\u003eK8s: Task processes inputs\n            K8s-\u003e\u003eCoPilot: Task completes\n            CoPilot-\u003e\u003eStorage: Upload outputs\n            CoPilot-\u003e\u003ePropeller: Report completion\n            \n        else Subworkflow Node\n            Propeller-\u003e\u003ePropeller: Process as nested workflow\n            \n        else Dynamic Node\n            Propeller-\u003e\u003ePlugins: Execute parent task\n            Plugins-\u003e\u003ePropeller: Return dynamic workflow\n            Propeller-\u003e\u003ePropeller: Execute dynamic workflow\n        end\n        \n        Propeller-\u003e\u003eCatalog: Register outputs\n        Propeller-\u003e\u003eAdmin: Update node execution\n    end\n    \n    Propeller-\u003e\u003eAdmin: Update execution status\n    Admin-\u003e\u003eUser: Execution complete\n```\n\nThis diagram illustrates how a workflow moves through the system from registration to execution completion, showing the interaction between all core components.\n\nSources:\n- [flytepropeller/go.mod]()\n- [flyteadmin/go.mod]()\n- [flyteplugins/go.mod]()\n- [flyteidl/go.mod]()\n\n## Summary\n\nFlyte's architecture is composed of several key components that work together to provide a scalable, reliable workflow platform:\n\n| Component | Role | Location |\n|-----------|------|----------|\n| FlyteAdmin | Control plane API service | Admin namespace |\n| DataCatalog | Data artifact tracking service | Admin namespace |\n| FlytePropeller | Workflow execution engine | Execution namespace |\n| FlytePlugins | Task execution plugins | Used by FlytePropeller |\n| FlyteCoPilot | Task I/O sidecar | Runs in task pods |\n| FlyteConsole | Web UI | Admin namespace |\n| flytectl | Command-line interface | User machine |\n| FlyteIDL | Interface definitions | Used by all components |\n\nThese components are designed with clear separation of concerns, allowing for independent scaling and high reliability. The control plane components (FlyteAdmin, DataCatalog) manage metadata and coordination, while the data plane components (FlytePropeller, FlytePlugins, FlyteCoPilot) handle the actual execution of workflows."])</script><script>self.__next_f.push([1,"19:T5992,"])</script><script>self.__next_f.push([1,"# System Architecture\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [README.md](README.md)\n- [charts/flyte-core/README.md](charts/flyte-core/README.md)\n- [charts/flyte-core/values.yaml](charts/flyte-core/values.yaml)\n- [charts/flyte/README.md](charts/flyte/README.md)\n- [charts/flyte/values.yaml](charts/flyte/values.yaml)\n- [datacatalog/go.mod](datacatalog/go.mod)\n- [datacatalog/go.sum](datacatalog/go.sum)\n- [deployment/eks/flyte_aws_scheduler_helm_generated.yaml](deployment/eks/flyte_aws_scheduler_helm_generated.yaml)\n- [deployment/eks/flyte_helm_controlplane_generated.yaml](deployment/eks/flyte_helm_controlplane_generated.yaml)\n- [deployment/eks/flyte_helm_dataplane_generated.yaml](deployment/eks/flyte_helm_dataplane_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml](deployment/eks/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_controlplane_generated.yaml](deployment/gcp/flyte_helm_controlplane_generated.yaml)\n- [deployment/gcp/flyte_helm_dataplane_generated.yaml](deployment/gcp/flyte_helm_dataplane_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml](deployment/gcp/flyte_helm_generated.yaml)\n- [deployment/sandbox/flyte_helm_generated.yaml](deployment/sandbox/flyte_helm_generated.yaml)\n- [flyteadmin/go.mod](flyteadmin/go.mod)\n- [flyteadmin/go.sum](flyteadmin/go.sum)\n- [flytecopilot/go.mod](flytecopilot/go.mod)\n- [flytecopilot/go.sum](flytecopilot/go.sum)\n- [flyteidl/go.mod](flyteidl/go.mod)\n- [flyteidl/go.sum](flyteidl/go.sum)\n- [flyteplugins/go.mod](flyteplugins/go.mod)\n- [flyteplugins/go.sum](flyteplugins/go.sum)\n- [flytepropeller/go.mod](flytepropeller/go.mod)\n- [flytepropeller/go.sum](flytepropeller/go.sum)\n- [go.mod](go.mod)\n- [go.sum](go.sum)\n\n\u003c/details\u003e\n\n\n\nThis page explains the overall architecture of the Flyte system, including its major components, their interactions, and the flow of data through the system. It covers the logical architecture, component responsibilities, and how these components work together during workflow execution. For deployment-specific details, see [Deployment](#2).\n\n## Core System Architecture Overview\n\nFlyte follows a microservices architecture separated into two primary planes: the **Control Plane** and the **Data Plane**. This separation allows for better scalability, fault isolation, and flexible deployment options.\n\n```mermaid\ngraph TB\n    subgraph \"Control Plane\"\n        FlyteAdmin[\"FlyteAdmin\"]\n        DataCatalog[\"DataCatalog\"]\n        FlyteScheduler[\"FlyteScheduler\"]\n    end\n    \n    subgraph \"Data Plane\"\n        FlytePropeller[\"FlytePropeller\"]\n        FlytePlugins[\"FlytePlugins\"]\n    end\n    \n    subgraph \"Storage \u0026 Infrastructure\"\n        DB[(Database)]\n        ObjectStore[(Object Storage)]\n        K8s[(Kubernetes API)]\n    end\n    \n    subgraph \"Client Interfaces\"\n        SDKs[\"FlyteSDKs\\n(Python/Java/Scala)\"]\n        CLI[\"flytectl CLI\"]\n        Console[\"FlyteConsole UI\"]\n    end\n    \n    SDKs --\u003e |\"Register/Launch\\nWorkflows\"| FlyteAdmin\n    CLI --\u003e |\"API Calls\"| FlyteAdmin\n    Console --\u003e |\"API Calls\"| FlyteAdmin\n    \n    FlyteAdmin --\u003e |\"Store Metadata\"| DB\n    FlyteAdmin --\u003e |\"Store Artifacts\"| ObjectStore\n    FlyteAdmin --\u003e |\"Create Execution\"| FlytePropeller\n    \n    DataCatalog --\u003e |\"Store Metadata\"| DB\n    DataCatalog --\u003e |\"Track Datasets\"| ObjectStore\n    \n    FlyteScheduler --\u003e |\"Schedule\\nWorkflows\"| FlyteAdmin\n    \n    FlytePropeller --\u003e |\"Execute Workflows\"| K8s\n    FlytePropeller --\u003e |\"Use Task Plugins\"| FlytePlugins\n    FlytePropeller --\u003e |\"Report Status\"| FlyteAdmin\n    FlytePropeller --\u003e |\"Store Outputs\"| ObjectStore\n    \n    FlytePlugins --\u003e |\"Execute Tasks\"| K8s\n```\n\nSources: \n- `README.md`\n- `flytepropeller/go.mod`\n- `flyteadmin/go.mod`\n- `charts/flyte-core/values.yaml`\n\nThe Flyte architecture follows a separation of concerns with distinct components:\n\n### Control Plane Components\n\n1. **FlyteAdmin** - The central management component that handles:\n   - API endpoints for creating and managing workflows\n   - Workflow versioning and packaging\n   - User authentication and authorization\n   - Resource management\n   - Event management\n   - Execution tracking\n\n2. **DataCatalog** - The metadata service responsible for:\n   - Tracking datasets and their lineage\n   - Storing and retrieving metadata about artifacts\n   - Supporting data versioning\n\n3. **FlyteScheduler** - The scheduling service that:\n   - Manages recurring workflow executions\n   - Handles time-based triggers for workflows\n\n### Data Plane Components\n\n1. **FlytePropeller** - The workflow execution engine that:\n   - Runs as a Kubernetes controller\n   - Processes workflow specifications\n   - Manages the execution of workflow DAGs\n   - Handles workflow state transitions\n   - Coordinates with plugins for task execution\n\n2. **FlytePlugins** - A collection of task execution plugins that:\n   - Support various task types (Pod, Spark, PyTorch, etc.)\n   - Connect to external services\n   - Extend Flyte to support different execution environments\n\n### Storage \u0026 Infrastructure\n\n1. **Database** - Stores metadata about:\n   - Workflow definitions\n   - Execution records\n   - Projects and domains\n   - Task resources\n\n2. **Object Storage** - Stores:\n   - Workflow input/output data\n   - Task input/output artifacts\n   - Large binary objects\n\n3. **Kubernetes API** - Used for:\n   - Running containerized tasks\n   - Managing compute resources\n   - Scheduling workloads\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/sandbox/flyte_helm_generated.yaml`\n- `flyteadmin/go.mod`\n\n## Workflow Execution Flow\n\nThe following diagram illustrates how Flyte components interact during workflow execution:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant FlyteAdmin\n    participant FlytePropeller\n    participant Plugins as FlytePlugins\n    participant K8s as Kubernetes\n    participant Storage as Object Storage\n    participant DC as DataCatalog\n    \n    User-\u003e\u003eFlyteAdmin: Create Execution Request\n    FlyteAdmin-\u003e\u003eStorage: Store Workflow Definition\n    FlyteAdmin-\u003e\u003eFlytePropeller: Submit FlyteWorkflow CRD\n    \n    loop Until workflow completes\n        FlytePropeller-\u003e\u003eFlytePropeller: Traverse Workflow DAG\n        \n        alt Node is Task\n            FlytePropeller-\u003e\u003ePlugins: Handle Task Execution\n            Plugins-\u003e\u003eK8s: Create Pod/Resource\n            K8s--\u003e\u003ePlugins: Resource Status\n            Plugins-\u003e\u003eStorage: Store Task Outputs\n            Plugins--\u003e\u003eFlytePropeller: Task PhaseInfo\n            \n        else Node is Subworkflow\n            FlytePropeller-\u003e\u003eFlytePropeller: Handle Subworkflow\n            \n        else Node is Dynamic\n            FlytePropeller-\u003e\u003ePlugins: Execute Parent Task\n            Plugins--\u003e\u003eFlytePropeller: Futures File\n            FlytePropeller-\u003e\u003eFlytePropeller: Build Dynamic Workflow\n            \n        else Node is Array\n            FlytePropeller-\u003e\u003eFlytePropeller: Execute Multiple Subnodes\n        end\n        \n        FlytePropeller-\u003e\u003eDC: Register Output Metadata\n        FlytePropeller-\u003e\u003eFlyteAdmin: Report Node Execution\n    end\n    \n    FlytePropeller-\u003e\u003eFlyteAdmin: Update Workflow Status\n    FlyteAdmin--\u003e\u003eUser: Execution Results\n```\n\nSources:\n- `flytepropeller/go.mod`\n- `flyteadmin/go.mod`\n- `datacatalog/go.mod`\n\nThe workflow execution process follows these steps:\n\n1. A user creates an execution request through a client interface (SDK, CLI, or UI)\n2. FlyteAdmin validates the request, stores the workflow definition in object storage, and creates a `FlyteWorkflow` custom resource in Kubernetes\n3. FlytePropeller, running as a Kubernetes controller, detects the new custom resource and begins execution\n4. FlytePropeller traverses the workflow DAG and executes nodes based on their type:\n   - Task nodes: Executed through appropriate plugins\n   - Subworkflow nodes: Handled recursively as sub-DAGs\n   - Dynamic nodes: Generate and execute dynamic workflow structures at runtime\n   - Array nodes: Execute tasks in parallel across multiple inputs\n5. Execution outputs are stored in object storage\n6. Metadata is registered in DataCatalog\n7. Execution status is reported back to FlyteAdmin\n8. Once complete, the final status is updated and results are available to the user\n\n## Plugin Architecture\n\nFlyte's plugin system allows for extensive customization and integration with various execution environments and external services:\n\n```mermaid\ngraph TD\n    FlytePropeller[\"FlytePropeller\"] --\u003e |\"Invokes\"| PluginManager[\"K8s Plugin Manager\"]\n    FlytePropeller --\u003e |\"Invokes\"| WebAPIPlugin[\"WebAPI Plugin\"]\n    FlytePropeller --\u003e |\"Invokes\"| CorePlugins[\"Core Plugins\"]\n    \n    PluginManager --\u003e |\"Manages\"| K8sPlugins[\"K8s Plugins\"]\n    \n    subgraph \"K8s Plugins\"\n        PodPlugin[\"Pod Plugin\"]\n        SparkPlugin[\"Spark Plugin\"]\n        PyTorchPlugin[\"PyTorch Operator Plugin\"]\n        TensorFlowPlugin[\"TensorFlow Operator Plugin\"]\n        MPIPlugin[\"MPI Operator Plugin\"]\n        RayPlugin[\"Ray Plugin\"]\n        SidecarPlugin[\"Sidecar Plugin\"]\n        ArrayPlugin[\"K8s Array Plugin\"]\n    end\n    \n    subgraph \"WebAPI Plugins\"\n        WebAPIPlugin --\u003e AgentPlugin[\"Agent Plugin\"]\n        WebAPIPlugin --\u003e BigQueryPlugin[\"BigQuery Plugin\"]\n        WebAPIPlugin --\u003e SnowflakePlugin[\"Snowflake Plugin\"]\n        WebAPIPlugin --\u003e AthenaPlugin[\"Athena Plugin\"]\n        WebAPIPlugin --\u003e RedshiftPlugin[\"Redshift Plugin\"]\n    end\n    \n    subgraph \"Core Plugins\"\n        PandasPlugin[\"Pandas Plugin\"]\n        HivePlugin[\"Hive Plugin\"]\n    end\n    \n    K8sPlugins --\u003e |\"Creates/Manages\"| K8sResources[\"Kubernetes Resources\"]\n    WebAPIPlugin --\u003e |\"API Calls\"| ExternalServices[\"External Services\"]\n    \n    K8sResources --\u003e |\"Executes\"| TaskPods[\"Task Pods\"]\n    ExternalServices --\u003e |\"Process\"| Data[\"Data\"]\n```\n\nSources:\n- `flyteplugins/go.mod`\n- `flyteplugins/go.sum`\n\nFlyte's plugin system consists of three main categories:\n\n1. **Kubernetes Plugins**: These plugins create and manage Kubernetes resources for task execution:\n   - Pod Plugin: Executes tasks in Kubernetes pods\n   - Spark Plugin: Runs Apache Spark jobs\n   - ML Operator Plugins: Integrate with Kubernetes operators for PyTorch, TensorFlow, MPI, and Ray\n   - Array Plugin: Manages parallel execution across multiple inputs\n\n2. **WebAPI Plugins**: These plugins integrate with external services through APIs:\n   - Agent Plugin: Communicates with external agents\n   - Data warehouse plugins: Connect to BigQuery, Snowflake, Athena, and Redshift\n\n3. **Core Plugins**: These provide built-in functionality:\n   - Pandas Plugin: Processes data using Pandas\n   - Hive Plugin: Interacts with Hive data warehouses\n\nThe plugin architecture allows FlytePropeller to delegate task execution to specialized components, enabling support for a wide range of execution environments and integration points.\n\n## Component Configuration\n\nFlyte components are configured through YAML files, which specify connection details, resource limits, and operational parameters:\n\n```mermaid\ngraph TD\n    subgraph \"Configuration Structure\"\n        ConfigMaps[\"ConfigMaps\"] --\u003e AdminConfig[\"FlyteAdmin Config\"]\n        ConfigMaps --\u003e PropellerConfig[\"FlytePropeller Config\"]\n        ConfigMaps --\u003e DCConfig[\"DataCatalog Config\"]\n        ConfigMaps --\u003e SchedulerConfig[\"FlyteScheduler Config\"]\n        \n        AdminConfig --\u003e |\"Contains\"| DBConfig[\"Database\\nConnection\"]\n        AdminConfig --\u003e |\"Contains\"| StorageConfig[\"Storage\\nSettings\"]\n        AdminConfig --\u003e |\"Contains\"| AuthConfig[\"Auth\\nSettings\"]\n        AdminConfig --\u003e |\"Contains\"| DomainsConfig[\"Domains\\nConfiguration\"]\n        \n        PropellerConfig --\u003e |\"Contains\"| K8sConfig[\"Kubernetes\\nSettings\"]\n        PropellerConfig --\u003e |\"Contains\"| PluginConfig[\"Plugin\\nConfiguration\"]\n        PropellerConfig --\u003e |\"Contains\"| ResourceConfig[\"Resource\\nLimits\"]\n    end\n    \n    subgraph \"Deployment Approach\"\n        HelmCharts[\"Helm Charts\"] --\u003e |\"Generate\"| ConfigMapYAML[\"ConfigMap YAML\"]\n        HelmCharts --\u003e |\"Generate\"| SecretYAML[\"Secret YAML\"]\n        HelmCharts --\u003e |\"Generate\"| DeploymentYAML[\"Deployment YAML\"]\n    end\n```\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/sandbox/flyte_helm_generated.yaml`\n- `deployment/eks/flyte_helm_generated.yaml`\n- `deployment/gcp/flyte_helm_generated.yaml`\n\nEach Flyte component has its own configuration files stored as ConfigMaps in Kubernetes:\n\n1. **FlyteAdmin Configuration**:\n   - Database connection settings\n   - Storage configuration (S3, GCS, etc.)\n   - Authentication settings\n   - Domain configuration\n   - Resource limits\n   - Event handling\n\n2. **FlytePropeller Configuration**:\n   - Kubernetes settings\n   - Workflow handling parameters\n   - Plugin configuration\n   - Resource limits\n   - Node handling settings\n\n3. **DataCatalog Configuration**:\n   - Database connection settings\n   - Storage configuration\n   - Metadata processing settings\n\n4. **FlyteScheduler Configuration**:\n   - Schedule handling parameters\n   - Connection to FlyteAdmin\n\nExample configuration from deployment:\n\n| Component | Configuration Path | Description |\n|-----------|-------------------|-------------|\n| FlyteAdmin | `/etc/flyte/config/*.yaml` | Admin server configuration files |\n| FlytePropeller | `/etc/flyte/config/*.yaml` | Propeller configuration files |\n| DataCatalog | `/etc/datacatalog/config/*.yaml` | DataCatalog configuration files |\n| FlyteScheduler | `/etc/flyte/config/*.yaml` | Scheduler configuration files |\n\nFlyte typically uses Helm charts for deployment, which generate the necessary Kubernetes resources including ConfigMaps, Secrets, and Deployments based on environment-specific values.\n\n## Communication Between Components\n\n```mermaid\ngraph TD\n    subgraph \"Client Layer\"\n        CLI[\"flytectl CLI\"]\n        SDK[\"Python/Java SDK\"]\n        Console[\"FlyteConsole UI\"]\n    end\n    \n    subgraph \"Service Communication\"\n        AdminGRPC[\"FlyteAdmin gRPC\\nPort 8089\"]\n        AdminHTTP[\"FlyteAdmin HTTP\\nPort 8088\"]\n        DCGRPC[\"DataCatalog gRPC\"]\n        PropellerK8s[\"Propeller K8s\\nCRD Interaction\"]\n    end\n    \n    CLI --\u003e |\"gRPC/HTTP\"| AdminGRPC\n    SDK --\u003e |\"gRPC/HTTP\"| AdminGRPC\n    Console --\u003e |\"HTTP\"| AdminHTTP\n    \n    AdminGRPC --\u003e |\"Creates\"| PropellerK8s\n    AdminGRPC --\u003e |\"Metadata\"| DCGRPC\n    PropellerK8s --\u003e |\"Status Updates\"| AdminGRPC\n```\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/sandbox/flyte_helm_generated.yaml`\n\nFlyte components communicate through a combination of gRPC, HTTP, and Kubernetes custom resources:\n\n1. **Client-to-FlyteAdmin Communication**:\n   - gRPC API (port 8089): Used by CLI and SDK clients\n   - HTTP API (port 8088): Used by web console and for simple API access\n   - Both support authentication via OAuth2, OpenID Connect, or API keys\n\n2. **FlyteAdmin-to-FlytePropeller Communication**:\n   - Kubernetes Custom Resource Definitions (CRDs)\n   - FlyteAdmin creates `FlyteWorkflow` CRDs that FlytePropeller watches and processes\n\n3. **FlyteAdmin-to-DataCatalog Communication**:\n   - gRPC API for metadata storage and retrieval\n\n4. **FlytePropeller-to-FlyteAdmin Communication**:\n   - gRPC API for reporting execution status\n   - Kubernetes events for critical updates\n\n5. **FlytePropeller-to-Plugins Communication**:\n   - Internal Go interfaces\n   - Kubernetes resources for K8s plugins\n   - HTTP/gRPC for WebAPI plugins\n\nThis communication model allows for loose coupling between components, making the system more resilient and easier to scale.\n\n## Deployment Architectures\n\nFlyte supports multiple deployment architectures to accommodate different use cases and organizational requirements:\n\n```mermaid\ngraph TD\n    subgraph \"Single-Cluster Deployment\"\n        SingleControl[\"Control Plane\"]\n        SingleData[\"Data Plane\"]\n        SingleControl --- SingleData\n    end\n    \n    subgraph \"Multi-Cluster Deployment\"\n        MultiControl[\"Central Control Plane\"]\n        MultiData1[\"Data Plane Cluster 1\"]\n        MultiData2[\"Data Plane Cluster 2\"]\n        MultiDataN[\"Data Plane Cluster N\"]\n        \n        MultiControl --- MultiData1\n        MultiControl --- MultiData2\n        MultiControl --- MultiDataN\n    end\n    \n    subgraph \"Hybrid Deployment\"\n        HybridControl[\"On-Premise Control Plane\"]\n        HybridData1[\"On-Premise Data Plane\"]\n        HybridData2[\"Cloud Data Plane\"]\n        \n        HybridControl --- HybridData1\n        HybridControl --- HybridData2\n    end\n```\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/eks/flyte_helm_generated.yaml`\n- `deployment/gcp/flyte_helm_generated.yaml`\n- `deployment/sandbox/flyte_helm_generated.yaml`\n\nFlyte supports three primary deployment architectures:\n\n1. **Single-Cluster Deployment**:\n   - All components (control plane and data plane) run in a single Kubernetes cluster\n   - Simplest deployment model, suitable for sandbox environments and smaller teams\n   - Example: Flyte Sandbox deployment\n\n2. **Multi-Cluster Deployment**:\n   - Control plane runs in a central management cluster\n   - Multiple data planes run in separate clusters, potentially across different regions or cloud providers\n   - Enables better resource isolation and scalability\n   - Allows different teams to have dedicated execution environments\n\n3. **Hybrid Deployment**:\n   - Control plane can run in one environment (e.g., on-premise)\n   - Data planes can run in multiple environments (e.g., different cloud providers)\n   - Enables organizations to leverage cloud resources while maintaining control over metadata\n\nThe separation between control and data planes allows for flexible deployment models to meet different organizational requirements for security, compliance, and scale.\n\n## System Security\n\nFlyte's security architecture includes authentication, authorization, and secure communication between components:\n\n```mermaid\ngraph TD\n    subgraph \"Authentication Methods\"\n        BasicAuth[\"Basic Auth\"]\n        OAuth[\"OAuth2/OIDC\"]\n        PKI[\"Mutual TLS/PKI\"]\n    end\n    \n    subgraph \"Authorization\"\n        RBAC[\"Role-Based Access\\nControl\"]\n        Projects[\"Project-Level\\nPermissions\"]\n        Domains[\"Domain-Level\\nIsolation\"]\n    end\n    \n    subgraph \"Secure Communication\"\n        TLS[\"TLS Encryption\"]\n        K8sAuth[\"Kubernetes Service\\nAccounts\"]\n        CloudIAM[\"Cloud IAM\\nIntegration\"]\n    end\n    \n    AuthN[\"Authentication\"] --\u003e BasicAuth\n    AuthN --\u003e OAuth\n    AuthN --\u003e PKI\n    \n    AuthZ[\"Authorization\"] --\u003e RBAC\n    AuthZ --\u003e Projects\n    AuthZ --\u003e Domains\n    \n    Comms[\"Component\\nCommunication\"] --\u003e TLS\n    Comms --\u003e K8sAuth\n    Comms --\u003e CloudIAM\n```\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/eks/flyte_helm_generated.yaml`\n- `deployment/gcp/flyte_helm_generated.yaml`\n\nFlyte implements a comprehensive security model:\n\n1. **Authentication**:\n   - Support for OAuth2/OpenID Connect providers\n   - Basic authentication for testing environments\n   - PKI/mTLS for service-to-service authentication\n\n2. **Authorization**:\n   - Role-Based Access Control (RBAC) for permission management\n   - Project-level access control for workflow resources\n   - Domain isolation for environment separation (development, staging, production)\n\n3. **Secure Communication**:\n   - TLS encryption for all service communication\n   - Kubernetes service accounts for pod-to-service authentication\n   - Integration with cloud IAM services (AWS IAM, GCP IAM)\n   - Secret management for sensitive configuration\n\n4. **Resource Isolation**:\n   - Kubernetes namespace isolation\n   - Resource quotas at project level\n   - Network policies for traffic control\n\nThese security mechanisms can be configured to meet specific organizational requirements for authentication, authorization, and isolation.\n\n## Scalability and Performance\n\nFlyte is designed to scale to handle large workloads and ensure performance:\n\n| Component | Scalability Approach | Performance Considerations |\n|-----------|---------------------|---------------------------|\n| FlyteAdmin | Horizontal pod scaling\u003cbr\u003eDatabase connection pooling | Read replicas for database\u003cbr\u003eCache for frequently accessed data |\n| FlytePropeller | Worker pool for node processing\u003cbr\u003eSharded controller deployment | Resource throttling\u003cbr\u003eWorker count optimization |\n| DataCatalog | Horizontal scaling\u003cbr\u003eDatabase partitioning | Caching layers\u003cbr\u003eEfficient metadata storage |\n| Storage | Cloud-native object storage\u003cbr\u003eCDN integration | Data locality\u003cbr\u003eCompression strategies |\n| Task Execution | Kubernetes autoscaling\u003cbr\u003eSpot/preemptible instances | Resource right-sizing\u003cbr\u003eExecution parallelism |\n\nSources:\n- `charts/flyte-core/values.yaml`\n- `deployment/eks/flyte_helm_generated.yaml`\n- `flytepropeller/go.mod`\n\nEach component in the Flyte architecture is designed to scale independently:\n\n1. **Control Plane Scaling**:\n   - FlyteAdmin and DataCatalog can be deployed with multiple replicas\n   - Database can be scaled using read replicas and connection pooling\n   - In-memory caching reduces database load for frequently accessed data\n\n2. **Data Plane Scaling**:\n   - FlytePropeller can be deployed in a sharded configuration to distribute workflow processing\n   - Worker pools can be adjusted based on workflow volume\n   - Plugins can dynamically scale resources based on task requirements\n\n3. **Task Execution Scaling**:\n   - Kubernetes cluster autoscaling for dynamic resource allocation\n   - Support for spot/preemptible instances to reduce costs\n   - Array tasks for efficient parallel processing\n\n4. **Storage Scaling**:\n   - Cloud-native object storage with virtually unlimited capacity\n   - Caching strategies for frequently accessed data\n   - Data locality optimizations for performance\n\nThese scalability features allow Flyte to handle workflows ranging from simple data processing to complex machine learning pipelines with thousands of tasks.\n\n## Conclusion\n\nFlyte's architecture is designed with scalability, extensibility, and reliability in mind. The separation between control and data planes, the plugin-based execution model, and the use of Kubernetes as the underlying platform enable Flyte to support a wide range of workflow requirements.\n\nKey architectural strengths include:\n\n1. **Separation of Concerns**: Clear boundaries between workflow definition, management, and execution\n2. **Extensibility**: Plugin system for integration with various execution environments and external services\n3. **Scalability**: Each component can scale independently based on workload requirements\n4. **Flexibility**: Multiple deployment options to accommodate different organizational needs\n5. **Type Safety**: Strong typing across the workflow definition and execution pipeline\n\nUnderstanding this architecture is essential for effectively deploying, operating, and extending Flyte to meet your workflow automation needs.\n\nSources:\n- `README.md`\n- `charts/flyte-core/values.yaml`\n- `deployment/sandbox/flyte_helm_generated.yaml`\n- `flytepropeller/go.mod`\n- `flyteadmin/go.mod`"])</script><script>self.__next_f.push([1,"1a:T3f0e,"])</script><script>self.__next_f.push([1,"# Deployment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [charts/flyte-core/README.md](charts/flyte-core/README.md)\n- [charts/flyte-core/values.yaml](charts/flyte-core/values.yaml)\n- [charts/flyte/README.md](charts/flyte/README.md)\n- [charts/flyte/values.yaml](charts/flyte/values.yaml)\n- [deployment/eks/flyte_aws_scheduler_helm_generated.yaml](deployment/eks/flyte_aws_scheduler_helm_generated.yaml)\n- [deployment/eks/flyte_helm_controlplane_generated.yaml](deployment/eks/flyte_helm_controlplane_generated.yaml)\n- [deployment/eks/flyte_helm_dataplane_generated.yaml](deployment/eks/flyte_helm_dataplane_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml](deployment/eks/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_controlplane_generated.yaml](deployment/gcp/flyte_helm_controlplane_generated.yaml)\n- [deployment/gcp/flyte_helm_dataplane_generated.yaml](deployment/gcp/flyte_helm_dataplane_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml](deployment/gcp/flyte_helm_generated.yaml)\n- [deployment/sandbox/flyte_helm_generated.yaml](deployment/sandbox/flyte_helm_generated.yaml)\n- [deployment/test/flyte_generated.yaml](deployment/test/flyte_generated.yaml)\n\n\u003c/details\u003e\n\n\n\nThis page provides a comprehensive guide to deploying Flyte in various environments. It covers deployment architecture, available deployment options, and configuration methods. For information about specific components of Flyte, see [Core Components](#1.1). For system architecture overview, see [System Architecture](#1.2).\n\n## Deployment Architecture\n\nFlyte's deployment architecture consists of two main parts: the control plane and the data plane. This architecture allows Flyte to be deployed in various configurations, including single-cluster, multi-cluster, and hybrid models.\n\n```mermaid\ngraph TB\n    subgraph \"Control Plane\"\n        FlyteAdmin[FlyteAdmin]\n        DataCatalog[DataCatalog]\n        FlyteScheduler[FlyteScheduler]\n    end\n    \n    subgraph \"Data Plane\"\n        FlytePropeller[FlytePropeller]\n        FlytePlugins[FlytePlugins]\n        FlyteCoPilot[FlyteCoPilot]\n    end\n    \n    subgraph \"Storage \u0026 Infrastructure\"\n        DB[(\"Database\")]\n        ObjectStore[(\"Object Storage\")]\n        K8s[(\"Kubernetes API\")]\n    end\n    \n    FlyteAdmin --\u003e DB\n    FlyteAdmin --\u003e ObjectStore\n    FlyteAdmin --\u003e FlytePropeller\n    \n    DataCatalog --\u003e DB\n    DataCatalog --\u003e ObjectStore\n    \n    FlyteScheduler --\u003e FlyteAdmin\n    \n    FlytePropeller --\u003e K8s\n    FlytePropeller --\u003e FlytePlugins\n    FlytePropeller --\u003e ObjectStore\n    \n    FlytePlugins --\u003e FlyteCoPilot\n    FlyteCoPilot --\u003e K8s\n```\n\nSources: \n- [charts/flyte-core/values.yaml:1-467]()\n- [deployment/gcp/flyte_helm_generated.yaml:1-586]()\n- [deployment/eks/flyte_helm_generated.yaml:1-566]()\n\n### Component Overview\n\n| Component | Description | Deployment Consideration |\n|-----------|-------------|--------------------------|\n| **FlyteAdmin** | Manages workflow metadata, handles API requests | Required in all deployments |\n| **DataCatalog** | Manages data artifacts and metadata | Required in all deployments |\n| **FlyteScheduler** | Schedules workflow executions | Optional, can be replaced with cloud schedulers |\n| **FlytePropeller** | Executes workflows, manages task execution | Required in data plane |\n| **FlyteCoPilot** | Sidecar for task containers | Required for certain task types |\n| **FlyteConsole** | Web UI for Flyte | Optional, but recommended |\n\nSources:\n- [charts/flyte-core/README.md:1-53]()\n- [charts/flyte-core/values.yaml:11-213]()\n\n## Deployment Options\n\nFlyte offers several deployment options to accommodate different use cases and environments.\n\n```mermaid\nflowchart LR\n    subgraph \"Development\"\n        Sandbox[\"Sandbox Deployment\"]\n    end\n    \n    subgraph \"Production\"\n        SingleCluster[\"Single Cluster\"]\n        MultiCluster[\"Multi-Cluster\"]\n        HybridMode[\"Hybrid Mode\"]\n    end\n    \n    subgraph \"Environment\"\n        Local[\"Local Kubernetes\"]\n        AWS[\"AWS/EKS\"]\n        GCP[\"GCP/GKE\"]\n        Azure[\"Azure/AKS\"]\n    end\n    \n    Sandbox --\u003e Local\n    SingleCluster --\u003e AWS\n    SingleCluster --\u003e GCP\n    SingleCluster --\u003e Azure\n    MultiCluster --\u003e AWS\n    MultiCluster --\u003e GCP\n    MultiCluster --\u003e Azure\n    HybridMode --\u003e AWS\n    HybridMode --\u003e GCP\n    HybridMode --\u003e Azure\n```\n\nSources:\n- [charts/flyte/README.md:1-27]()\n- [charts/flyte-core/README.md:1-53]()\n\n### Deployment Models\n\n1. **Sandbox Deployment**\n   - Single-cluster setup for development and testing\n   - All components in one Kubernetes cluster\n   - Simplified configuration with minimal requirements\n   - Not recommended for production workloads\n\n2. **Single Cluster Production Deployment**\n   - All components in one Kubernetes cluster\n   - Both control plane and data plane in the same cluster\n   - Suitable for small to medium-sized deployments\n\n3. **Multi-Cluster Deployment**\n   - Control plane in a central cluster\n   - Multiple data plane clusters\n   - Better isolation and resource management\n   - Suitable for larger deployments\n\n4. **Hybrid Mode**\n   - Control plane in Kubernetes\n   - Data plane can include non-Kubernetes environments\n   - Suitable for specialized compute needs\n\nSources:\n- [charts/flyte-core/README.md:13-51]()\n- [deployment/sandbox/flyte_helm_generated.yaml:1-100]()\n- [deployment/eks/flyte_helm_generated.yaml:1-100]()\n- [deployment/gcp/flyte_helm_generated.yaml:1-100]()\n\n## Helm-based Deployment\n\nThe recommended way to deploy Flyte is using Helm charts. Flyte provides helm charts for different deployment scenarios.\n\n```mermaid\nflowchart TB\n    subgraph \"Deployment Process\"\n        direction TB\n        Config[\"Configuration Files\\n(values.yaml)\"]\n        HelmCmd[\"Helm Commands\"]\n        FlyteChart[\"Flyte Helm Chart\"]\n        K8sResources[\"Kubernetes Resources\"]\n    end\n    \n    Config --\u003e HelmCmd\n    FlyteChart --\u003e HelmCmd\n    HelmCmd --\u003e K8sResources\n    \n    subgraph \"Resource Types\"\n        ServiceAccounts[\"Service Accounts\"]\n        ConfigMaps[\"ConfigMaps\"]\n        Secrets[\"Secrets\"]\n        Deployments[\"Deployments\"]\n        Services[\"Services\"]\n        CRDs[\"Custom Resource Definitions\"]\n    end\n    \n    K8sResources --\u003e ServiceAccounts\n    K8sResources --\u003e ConfigMaps\n    K8sResources --\u003e Secrets\n    K8sResources --\u003e Deployments\n    K8sResources --\u003e Services\n    K8sResources --\u003e CRDs\n```\n\n### Helm Chart Structure\n\nThe Flyte Helm chart is organized into several components:\n\n| Chart | Purpose |\n|-------|---------|\n| **flyte-core** | Core Flyte components (Admin, Propeller, etc.) |\n| **flyte** | Complete deployment including dependencies |\n| **flyteagent** | Optional agent for external services |\n\nSources:\n- [charts/flyte-core/README.md:1-53]()\n- [charts/flyte/README.md:1-27]()\n\n### Deployment Steps\n\n1. **Prerequisites**\n   - Kubernetes cluster\n   - Helm 3 installed\n   - Storage configured (object store and database)\n\n2. **Install using Helm**\n   ```bash\n   helm repo add flyte https://flyteorg.github.io/flyte\n   helm install -n flyte -f values-custom.yaml --create-namespace flyte flyte/flyte-core\n   ```\n\n3. **Configure Ingress**\n   ```bash\n   helm repo add bitnami https://charts.bitnami.com/bitnami\n   helm install gateway bitnami/contour -n flyte\n   ```\n\nSources:\n- [charts/flyte-core/README.md:13-40]()\n- [charts/flyte/README.md:19-39]()\n\n## Environment-specific Configurations\n\nFlyte's deployment configuration varies depending on the target environment.\n\n### Sandbox/Local Deployment\n\nSandbox deployment is intended for development and testing, with minimal external dependencies.\n\n```mermaid\ngraph TB\n    subgraph \"Sandbox Components\"\n        Admin[\"FlyteAdmin\"]\n        Catalog[\"DataCatalog\"]\n        Propeller[\"FlytePropeller\"]\n        Console[\"FlyteConsole\"]\n        Minio[\"Minio (Object Storage)\"]\n        Postgres[\"PostgreSQL (Database)\"]\n        Contour[\"Contour (Ingress)\"]\n    end\n    \n    Admin --\u003e Postgres\n    Admin --\u003e Minio\n    Catalog --\u003e Postgres\n    Catalog --\u003e Minio\n    Propeller --\u003e Admin\n    Propeller --\u003e Catalog\n    Propeller --\u003e Minio\n    Console --\u003e Admin\n    Contour --\u003e Admin\n    Contour --\u003e Console\n```\n\nKey features:\n- Embedded Postgres database\n- Minio for object storage\n- Single-node deployment\n- All components in the same namespace\n\nSources:\n- [deployment/sandbox/flyte_helm_generated.yaml:1-500]()\n- [charts/flyte/values.yaml:1-250]()\n\n### AWS/EKS Deployment\n\nAWS deployment leverages AWS-specific services and IAM for authentication.\n\n```mermaid\ngraph TB\n    subgraph \"AWS Resources\"\n        S3[\"S3 Bucket\"]\n        RDS[\"RDS PostgreSQL\"]\n        IAM[\"IAM Roles\"]\n        EKS[\"EKS Cluster\"]\n        SQS[\"SQS (Optional)\"]\n    end\n    \n    subgraph \"Flyte Components\"\n        Admin[\"FlyteAdmin\"]\n        Catalog[\"DataCatalog\"]\n        Propeller[\"FlytePropeller\"]\n        Console[\"FlyteConsole\"]\n    end\n    \n    IAM --\u003e Admin\n    IAM --\u003e Catalog\n    IAM --\u003e Propeller\n    \n    Admin --\u003e RDS\n    Admin --\u003e S3\n    Catalog --\u003e RDS\n    Catalog --\u003e S3\n    Propeller --\u003e S3\n    Admin --\u003e SQS\n    \n    EKS --- Admin\n    EKS --- Catalog\n    EKS --- Propeller\n    EKS --- Console\n```\n\nKey configurations:\n- IAM roles for service accounts\n- S3 for object storage\n- RDS for database\n- Optional AWS SQS for scheduling\n\nSources:\n- [deployment/eks/flyte_helm_generated.yaml:1-566]()\n- [deployment/eks/flyte_helm_controlplane_generated.yaml:1-260]()\n- [deployment/eks/flyte_aws_scheduler_helm_generated.yaml:1-240]()\n\n### GCP/GKE Deployment\n\nGCP deployment uses GCP-specific services and Workload Identity for authentication.\n\n```mermaid\ngraph TB\n    subgraph \"GCP Resources\"\n        GCS[\"GCS Bucket\"]\n        CloudSQL[\"Cloud SQL PostgreSQL\"]\n        GSA[\"Google Service Accounts\"]\n        GKE[\"GKE Cluster\"]\n    end\n    \n    subgraph \"Flyte Components\"\n        Admin[\"FlyteAdmin\"]\n        Catalog[\"DataCatalog\"]\n        Propeller[\"FlytePropeller\"]\n        Console[\"FlyteConsole\"]\n    end\n    \n    GSA --\u003e Admin\n    GSA --\u003e Catalog\n    GSA --\u003e Propeller\n    \n    Admin --\u003e CloudSQL\n    Admin --\u003e GCS\n    Catalog --\u003e CloudSQL\n    Catalog --\u003e GCS\n    Propeller --\u003e GCS\n    \n    GKE --- Admin\n    GKE --- Catalog\n    GKE --- Propeller\n    GKE --- Console\n```\n\nKey configurations:\n- Workload Identity for service accounts\n- GCS for object storage\n- Cloud SQL for database\n\nSources:\n- [deployment/gcp/flyte_helm_generated.yaml:1-586]()\n- [deployment/gcp/flyte_helm_controlplane_generated.yaml:1-260]()\n- [deployment/gcp/flyte_helm_dataplane_generated.yaml:1-198]()\n\n## Configuration Options\n\nFlyte offers extensive configuration options through Helm values files.\n\n### Core Configuration Parameters\n\n| Parameter | Description | Default |\n|-----------|-------------|---------|\n| `storage.type` | Storage type (s3, gcs, etc.) | `sandbox` |\n| `storage.bucketName` | Storage bucket name | `my-s3-bucket` |\n| `db.admin.database` | Admin database configuration | |\n| `db.datacatalog.database` | DataCatalog database configuration | |\n| `common.ingress` | Ingress configuration | |\n| `configmap.adminServer` | FlyteAdmin server configuration | |\n| `cluster_resource_manager` | Cluster resource management configuration | |\n\nSources:\n- [charts/flyte-core/values.yaml:563-636]()\n- [charts/flyte-core/README.md:54-135]()\n\n### Component-specific Configuration\n\nEach Flyte component has its own set of configuration parameters:\n\n| Component | Configuration Path | Key Parameters |\n|-----------|-------------------|---------------|\n| FlyteAdmin | `flyteadmin` | `image`, `resources`, `service` |\n| DataCatalog | `datacatalog` | `image`, `resources`, `service` |\n| FlytePropeller | `flytepropeller` | `image`, `resources`, `createCRDs` |\n| FlyteConsole | `flyteconsole` | `image`, `resources`, `service` |\n| FlyteScheduler | `flytescheduler` | `image`, `resources` |\n\nSources:\n- [charts/flyte-core/values.yaml:11-467]()\n- [charts/flyte-core/README.md:54-240]()\n\n## Security Configurations\n\nFlyte's deployment can be secured with various options.\n\n### Authentication and Authorization\n\nFlyte supports multiple authentication methods:\n- OpenID Connect\n- OAuth2\n- No authentication (for development)\n\nConfiguration example:\n```yaml\nconfigmap:\n  adminServer:\n    auth:\n      appAuth:\n        thirdPartyConfig:\n          flyteClient:\n            clientId: flytectl\n            redirectUri: http://localhost:53593/callback\n            scopes: [\"offline\", \"all\"]\n      userAuth:\n        openId:\n          baseUrl: https://accounts.google.com\n          clientId: \u003cclient-id\u003e\n          scopes: [\"profile\", \"openid\"]\n```\n\nSources:\n- [charts/flyte-core/values.yaml:702-770]()\n- [charts/flyte-core/README.md:106-110]()\n\n### Service Account Management\n\nFlyte components require appropriate service accounts with necessary permissions. The configuration varies by platform:\n\n- AWS: IAM roles for service accounts\n- GCP: Workload Identity for service accounts\n- Generic: Kubernetes RBAC\n\nSources:\n- [deployment/eks/flyte_helm_generated.yaml:1-70]()\n- [deployment/gcp/flyte_helm_generated.yaml:1-70]()\n\n## Monitoring and Observability\n\nFlyte deployment can be configured with monitoring and observability tools.\n\n### Prometheus Metrics\n\nFlyte components expose Prometheus metrics. ServiceMonitor resources can be configured to scrape these metrics:\n\n```yaml\nflyteadmin:\n  serviceMonitor:\n    enabled: true\n    interval: 60s\n    scrapeTimeout: 30s\n    labels: {}\n```\n\nSources:\n- [charts/flyte-core/values.yaml:128-139]()\n- [charts/flyte-core/README.md:207-212]()\n\n### Logging\n\nTask logs can be configured to integrate with various logging backends:\n\n```yaml\nconfigmap:\n  task_logs:\n    plugins:\n      logs:\n        kubernetes-enabled: true\n        cloudwatch-enabled: false\n        stackdriver-enabled: false\n```\n\nSources:\n- [charts/flyte-core/values.yaml:920-923]()\n- [charts/flyte-core/README.md:132-134]()\n\n## Troubleshooting Deployment Issues\n\nCommon deployment issues and their solutions:\n\n| Issue | Potential Cause | Solution |\n|-------|-----------------|----------|\n| Database connection failures | Incorrect credentials or networking | Check database credentials and network policies |\n| Storage access issues | Incorrect bucket configuration or permissions | Verify bucket name and IAM/service account permissions |\n| Service discovery problems | Incorrect service names or namespace | Check service names and namespace configurations |\n| Resource constraints | Insufficient cluster resources | Increase cluster capacity or adjust resource requests |\n\nSources:\n- Various deployment files and charts\n\n## Advanced Deployment Scenarios\n\n### Multi-cluster Deployment\n\nFor large-scale deployments, a multi-cluster setup is recommended:\n- Control plane in a central cluster\n- Multiple data plane clusters\n- Cross-cluster communication via Admin APIs\n\n```mermaid\ngraph TB\n    subgraph \"Control Plane Cluster\"\n        Admin[\"FlyteAdmin\"]\n        Catalog[\"DataCatalog\"]\n        Scheduler[\"FlyteScheduler\"]\n        Console[\"FlyteConsole\"]\n    end\n    \n    subgraph \"Data Plane Cluster 1\"\n        Propeller1[\"FlytePropeller\"]\n    end\n    \n    subgraph \"Data Plane Cluster 2\"\n        Propeller2[\"FlytePropeller\"]\n    end\n    \n    subgraph \"Data Plane Cluster 3\"\n        Propeller3[\"FlytePropeller\"]\n    end\n    \n    Admin --\u003e Propeller1\n    Admin --\u003e Propeller2\n    Admin --\u003e Propeller3\n```\n\nSources:\n- [charts/flyte-core/values.yaml:658-669]()\n- [charts/flyte-core/README.md:78-90]()\n\n### External Dependencies Configuration\n\nFlyte depends on external services that need proper configuration:\n\n1. **Database**\n   - PostgreSQL is recommended\n   - RDS on AWS\n   - Cloud SQL on GCP\n\n2. **Object Storage**\n   - S3 on AWS\n   - GCS on GCP\n   - Minio for development\n\n3. **Authentication Provider**\n   - OpenID Connect providers\n   - OAuth2 servers\n\nSources:\n- [charts/flyte-core/values.yaml:600-636]()\n- [charts/flyte-core/README.md:58-77]()\n\n## Conclusion\n\nFlyte deployment can be tailored to specific environments and use cases. The recommended approach is using Helm charts with environment-specific configuration values. For more details on individual components, refer to their respective documentation pages."])</script><script>self.__next_f.push([1,"1b:T4094,"])</script><script>self.__next_f.push([1,"# Kubernetes Deployment with Helm\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [charts/flyte-core/README.md](charts/flyte-core/README.md)\n- [charts/flyte-core/values.yaml](charts/flyte-core/values.yaml)\n- [charts/flyte/README.md](charts/flyte/README.md)\n- [charts/flyte/values.yaml](charts/flyte/values.yaml)\n- [deployment/eks/flyte_aws_scheduler_helm_generated.yaml](deployment/eks/flyte_aws_scheduler_helm_generated.yaml)\n- [deployment/eks/flyte_helm_controlplane_generated.yaml](deployment/eks/flyte_helm_controlplane_generated.yaml)\n- [deployment/eks/flyte_helm_dataplane_generated.yaml](deployment/eks/flyte_helm_dataplane_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml](deployment/eks/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_controlplane_generated.yaml](deployment/gcp/flyte_helm_controlplane_generated.yaml)\n- [deployment/gcp/flyte_helm_dataplane_generated.yaml](deployment/gcp/flyte_helm_dataplane_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml](deployment/gcp/flyte_helm_generated.yaml)\n- [deployment/sandbox/flyte_helm_generated.yaml](deployment/sandbox/flyte_helm_generated.yaml)\n- [deployment/test/flyte_generated.yaml](deployment/test/flyte_generated.yaml)\n\n\u003c/details\u003e\n\n\n\nThis page details how to deploy Flyte to a Kubernetes cluster using Helm charts. It covers the installation process, configuration options, and deployment strategies for different environments. For sandbox deployment for local development and testing, see [Sandbox Environment](#2.2).\n\n## Overview\n\nFlyte can be deployed to Kubernetes clusters using Helm, which provides a templating mechanism for creating Kubernetes manifests. The Flyte Helm charts define the necessary Kubernetes resources for running Flyte, including deployments, services, config maps, and secrets.\n\n### Deployment Architecture\n\n```mermaid\nflowchart TB\n    subgraph \"Helm Charts\"\n        FlyteChart[\"flyte-core Chart\"]\n        FlyteChart --\u003e AdminTemplates[\"Admin Templates\"]\n        FlyteChart --\u003e PropellerTemplates[\"Propeller Templates\"]\n        FlyteChart --\u003e DataCatalogTemplates[\"DataCatalog Templates\"]\n        FlyteChart --\u003e ConsoleTemplates[\"Console Templates\"]\n        FlyteChart --\u003e CommonTemplates[\"Common Templates\"]\n    end\n\n    subgraph \"Kubernetes Resources\"\n        Templates[\"Rendered Templates\"]\n        Templates --\u003e SAs[\"ServiceAccounts\"]\n        Templates --\u003e Deployments[\"Deployments\"]\n        Templates --\u003e Services[\"Services\"]\n        Templates --\u003e ConfigMaps[\"ConfigMaps\"]\n        Templates --\u003e Secrets[\"Secrets\"]\n        Templates --\u003e CRDs[\"Custom Resource Definitions\"]\n    end\n\n    FlyteChart --\u003e |helm install/upgrade| Templates\n    ValuesFile[\"values.yaml\"] --\u003e |customization| FlyteChart\n```\n\nSources: \n- [charts/flyte-core/README.md](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n- [charts/flyte-core/values.yaml](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n### Flyte Components in Kubernetes\n\n```mermaid\nflowchart TB\n    subgraph \"Control Plane Namespace\"\n        FlyteAdmin[\"flyteadmin\n        Deployment\"]\n        DataCatalog[\"datacatalog\n        Deployment\"]\n        FlyteScheduler[\"flytescheduler\n        Deployment\"]\n        FlyteConsole[\"flyteconsole\n        Deployment\"]\n        ClusterResourceSync[\"clusterresourcesync\n        Deployment\"]\n    end\n\n    subgraph \"Data Plane\"\n        FlytePropeller[\"flytepropeller\n        Deployment\"]\n        PodWebhook[\"flyte-pod-webhook\n        Deployment\"]\n    end\n\n    subgraph \"External Resources\"\n        Database[(Database)]\n        ObjectStorage[(Object Storage)]\n    end\n\n    FlyteAdmin --\u003e |reads/writes| Database\n    FlyteAdmin --\u003e |stores data| ObjectStorage\n    DataCatalog --\u003e |reads/writes| Database\n    DataCatalog --\u003e |stores metadata| ObjectStorage\n    FlyteScheduler --\u003e |schedules workflows| FlyteAdmin\n    \n    FlyteAdmin --\u003e |submits workflows| FlytePropeller\n    FlytePropeller --\u003e |executes workflows| K8s\n    FlytePropeller --\u003e |uses for pod mutation| PodWebhook\n    FlyteConsole --\u003e |API calls| FlyteAdmin\n    \n    K8s[Kubernetes API]\n    \n    ClusterResourceSync --\u003e |creates namespaces \u0026 quotas| K8s\n```\n\nSources:\n- [deployment/sandbox/flyte_helm_generated.yaml:30-77](https://github.com/flyteorg/flyte/blob/master/deployment/sandbox/flyte_helm_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml:2-63](https://github.com/flyteorg/flyte/blob/master/deployment/eks/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml:2-55](https://github.com/flyteorg/flyte/blob/master/deployment/gcp/flyte_helm_generated.yaml)\n\n## Prerequisites\n\nBefore deploying Flyte using Helm, ensure you have the following:\n\n1. Kubernetes cluster (version 1.19+)\n2. Helm 3 installed\n3. `kubectl` configured to communicate with your cluster\n4. Storage backend (S3, GCS, or MinIO for sandbox deployments)\n5. Database (PostgreSQL for production deployments)\n\nSources:\n- [charts/flyte-core/README.md:13-16](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n\n## Installation\n\n### Basic Installation\n\n1. Add the Flyte Helm repository:\n\n```bash\nhelm repo add flyte https://flyteorg.github.io/flyte\n```\n\n2. Install Flyte in its own namespace:\n\n```bash\nhelm install -n flyte -f values-custom.yaml --create-namespace flyte flyte/flyte-core\n```\n\nSources:\n- [charts/flyte-core/README.md:16-21](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n\n### Updating Existing Installation\n\nTo update an existing Flyte installation:\n\n```bash\nhelm upgrade -f values-custom.yaml flyte flyte/flyte-core\n```\n\nYou can use the helm diff plugin to review changes before applying them:\n\n```bash\nhelm plugin install https://github.com/databus23/helm-diff\nhelm diff upgrade -f values-custom.yaml flyte flyte/flyte-core\n```\n\nSources:\n- [charts/flyte-core/README.md:23-34](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n\n## Configuration\n\nThe Flyte Helm chart offers extensive configuration options through its `values.yaml` file. Here are the key configuration areas:\n\n### Configuration Structure\n\n```mermaid\nflowchart TB\n    ValuesYaml[\"values.yaml\"] --\u003e CoreComponents\n    ValuesYaml --\u003e CommonSettings\n    ValuesYaml --\u003e StorageSettings\n    ValuesYaml --\u003e DBSettings\n    ValuesYaml --\u003e ConfigMaps\n    \n    CoreComponents --\u003e FlyteAdmin[\"flyteadmin\n    settings\"]\n    CoreComponents --\u003e FlyteScheduler[\"flytescheduler\n    settings\"]\n    CoreComponents --\u003e DataCatalog[\"datacatalog\n    settings\"]\n    CoreComponents --\u003e FlytePropeller[\"flytepropeller\n    settings\"]\n    CoreComponents --\u003e FlyteConsole[\"flyteconsole\n    settings\"]\n    \n    CommonSettings --\u003e Ingress[\"ingress\n    configuration\"]\n    CommonSettings --\u003e Auth[\"authentication\n    settings\"]\n    \n    StorageSettings --\u003e Type[\"storage.type\n    (s3/gcs/sandbox)\"]\n    StorageSettings --\u003e Bucket[\"storage.bucketName\"]\n    StorageSettings --\u003e Conn[\"storage connection\n    details\"]\n    \n    DBSettings --\u003e AdminDB[\"db.admin\n    settings\"]\n    DBSettings --\u003e CatalogDB[\"db.datacatalog\n    settings\"]\n    \n    ConfigMaps --\u003e Admin[\"adminServer\n    config\"]\n    ConfigMaps --\u003e TaskDefaults[\"task_resource_defaults\"]\n    ConfigMaps --\u003e Plugins[\"enabled_plugins\"]\n    ConfigMaps --\u003e Domains[\"domain\n    settings\"]\n```\n\nSources:\n- [charts/flyte-core/values.yaml:1-207](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n- [charts/flyte-core/README.md:54-147](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n\n### Core Component Configuration\n\nEach core Flyte component can be configured individually:\n\n| Component | Key Configuration Options |\n|-----------|---------------------------|\n| `flyteadmin` | `replicaCount`, `image`, `resources`, `env`, `serviceAccount` |\n| `flytepropeller` | `replicaCount`, `image`, `resources`, `createCRDs` |\n| `datacatalog` | `replicaCount`, `image`, `resources` |\n| `flyteconsole` | `replicaCount`, `image`, `resources` |\n| `flytescheduler` | `image`, `resources` |\n\nExample configuration for `flyteadmin`:\n\n```yaml\nflyteadmin:\n  replicaCount: 1\n  image:\n    repository: cr.flyte.org/flyteorg/flyteadmin\n    tag: 1.15.1\n    pullPolicy: IfNotPresent\n  resources:\n    limits:\n      cpu: 250m\n      memory: 500Mi\n    requests:\n      cpu: 10m\n      memory: 50Mi\n```\n\nSources:\n- [charts/flyte-core/values.yaml:12-76](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n- [charts/flyte-core/values.yaml:304-378](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n### Storage Configuration\n\nFlyte supports multiple storage backends:\n\n```yaml\nstorage:\n  # Options: sandbox, s3, gcs, custom\n  type: sandbox\n  # S3 bucket where Flyte will store files\n  bucketName: my-s3-bucket\n  # S3-specific settings\n  s3:\n    endpoint: \"\"\n    region: us-east-1\n    # Options: iam, accesskey\n    authType: iam\n    accessKey: \"\"\n    secretKey: \"\"\n  # GCS-specific settings\n  gcs:\n    projectId: your-gcp-project\n```\n\nSources:\n- [charts/flyte-core/values.yaml:604-635](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n### Database Configuration\n\nConfigure database settings for FlyteAdmin and DataCatalog:\n\n```yaml\ndb:\n  admin:\n    database:\n      dbname: flyteadmin\n      host: postgres\n      port: 5432\n      username: postgres\n  datacatalog:\n    database:\n      dbname: datacatalog\n      host: postgres\n      port: 5432\n      username: postgres\n```\n\nFor production deployments, you should set up a proper database password using secrets:\n\n```yaml\ncommon:\n  databaseSecret:\n    name: flyte-db-pass\n    secretManifest:\n      stringData:\n        pass.txt: yourDBPassword\n```\n\nSources:\n- [charts/flyte-core/values.yaml:637-649](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n- [charts/flyte-core/values.yaml:563-568](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n### Task Resource Configuration\n\nConfigure default task resources:\n\n```yaml\nconfigmap:\n  task_resource_defaults:\n    task_resources:\n      defaults:\n        cpu: 100m\n        memory: 500Mi\n      limits:\n        cpu: 2\n        memory: 1Gi\n        gpu: 1\n```\n\nSources:\n- [charts/flyte-core/values.yaml:786-797](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n### Ingress Configuration\n\nConfigure ingress for external access:\n\n```yaml\ncommon:\n  ingress:\n    enabled: true\n    ingressClassName: nginx\n    annotations:\n      nginx.ingress.kubernetes.io/app-root: /console\n    separateGrpcIngress: false\n    tls:\n      enabled: false\n```\n\nSources:\n- [charts/flyte-core/values.yaml:570-593](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n\n## Environment-Specific Deployments\n\n### Sandbox Deployment\n\nFor sandbox deployments, the default values are optimized for local development with MinIO for storage:\n\n```yaml\nstorage:\n  type: sandbox\n  bucketName: my-s3-bucket\n```\n\nSources:\n- [deployment/sandbox/flyte_helm_generated.yaml:317-347](https://github.com/flyteorg/flyte/blob/master/deployment/sandbox/flyte_helm_generated.yaml)\n\n### AWS/EKS Deployment\n\nFor AWS/EKS deployments, configure IAM roles and S3 storage:\n\n```yaml\nflyteadmin:\n  serviceAccount:\n    annotations:\n      eks.amazonaws.com/role-arn: arn:aws:iam::\u003cACCOUNT_NUMBER\u003e:role/iam-role-flyte\n\nstorage:\n  type: s3\n  bucketName: \u003cBUCKET_NAME\u003e\n  s3:\n    region: \u003cAWS_REGION\u003e\n    authType: iam\n```\n\nSources:\n- [deployment/eks/flyte_helm_generated.yaml:2-54](https://github.com/flyteorg/flyte/blob/master/deployment/eks/flyte_helm_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml:184-208](https://github.com/flyteorg/flyte/blob/master/deployment/eks/flyte_helm_generated.yaml)\n\n### GCP Deployment\n\nFor GCP deployments, configure Workload Identity and GCS storage:\n\n```yaml\nflyteadmin:\n  serviceAccount:\n    annotations:\n      iam.gke.io/gcp-service-account: gsa-flyteadmin@\u003cPROJECT-ID\u003e.iam.gserviceaccount.com\n\nstorage:\n  type: stow\n  container: \u003cBUCKET_NAME\u003e\n  stow:\n    kind: google\n    config:\n      project_id: \u003cPROJECT-ID\u003e\n      scopes: https://www.googleapis.com/auth/cloud-platform\n```\n\nSources:\n- [deployment/gcp/flyte_helm_generated.yaml:2-28](https://github.com/flyteorg/flyte/blob/master/deployment/gcp/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml:165-180](https://github.com/flyteorg/flyte/blob/master/deployment/gcp/flyte_helm_generated.yaml)\n\n## ClusterResource Management\n\nFlyte can manage Kubernetes resources for projects and domains:\n\n```yaml\ncluster_resource_manager:\n  enabled: true\n  config:\n    cluster_resources:\n      refreshInterval: 5m\n      templatePath: /etc/flyte/clusterresource/templates\n      customData:\n        - production:\n          - projectQuotaCpu:\n              value: \"5\"\n          - projectQuotaMemory:\n              value: \"4000Mi\"\n        - staging:\n          - projectQuotaCpu:\n              value: \"2\"\n          - projectQuotaMemory:\n              value: \"3000Mi\"\n  templates:\n    - key: aa_namespace\n      value: |\n        apiVersion: v1\n        kind: Namespace\n        metadata:\n          name: {{ namespace }}\n        spec:\n          finalizers:\n          - kubernetes\n    - key: ab_project_resource_quota\n      value: |\n        apiVersion: v1\n        kind: ResourceQuota\n        metadata:\n          name: project-quota\n          namespace: {{ namespace }}\n        spec:\n          hard:\n            limits.cpu: {{ projectQuotaCpu }}\n            limits.memory: {{ projectQuotaMemory }}\n```\n\nThis defines how Flyte creates and manages namespaces with resource quotas for each project-domain combination.\n\nSources:\n- [charts/flyte-core/values.yaml:78-92](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n- [deployment/sandbox/flyte_helm_generated.yaml:218-369](https://github.com/flyteorg/flyte/blob/master/deployment/sandbox/flyte_helm_generated.yaml)\n\n## Post-Installation Steps\n\n### Verify the Installation\n\nAfter installation, verify that all Flyte pods are running:\n\n```bash\nkubectl get pods -n flyte\n```\n\nExpected output:\n```\nNAME                                 READY   STATUS    RESTARTS   AGE\ndatacatalog-5d59f68c88-j7h8v         1/1     Running   0          2m\nflyteconsole-f5999d6c8-s7lhz         1/1     Running   0          2m\nflytepropeller-7bfbd8f9f5-t2cvz      1/1     Running   0          2m\nflyteadmin-7f98d9c5fd-c8xnz          1/1     Running   0          2m\nflytescheduler-59f5f74d47-cqld9      1/1     Running   0          2m\n```\n\n### Access the Flyte Console\n\nIf you've configured an ingress, you can access the Flyte Console through your ingress URL. For sandbox deployments with NodePort services, you can use:\n\n```bash\nkubectl -n flyte port-forward svc/envoy 8080:80\n```\n\nThen access the Flyte console at http://localhost:8080/console\n\n## Troubleshooting\n\n### Common Issues\n\n1. **Pods failing to start**: Check pod logs for detailed errors\n   ```bash\n   kubectl logs -n flyte \u003cpod-name\u003e\n   ```\n\n2. **Database connection issues**: Verify database credentials and connectivity\n   ```bash\n   kubectl describe secret -n flyte flyte-db-pass\n   ```\n\n3. **Storage access issues**: Verify IAM roles and bucket permissions\n   ```bash\n   kubectl describe pod -n flyte flyteadmin-xxxxx\n   ```\n\n4. **ConfigMap issues**: Check if ConfigMaps are properly created\n   ```bash\n   kubectl get configmaps -n flyte\n   ```\n\n## Conclusion\n\nThis guide covered the deployment of Flyte to Kubernetes using Helm, including configuration options for different environments and components. By customizing the values file, you can tailor your Flyte deployment to meet your specific requirements for storage, database, authentication, and resource allocation.\n\nFor troubleshooting and more advanced use cases, refer to the [Flyte documentation](https://docs.flyte.org).\n\nSources:\n- [charts/flyte-core/README.md](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/README.md)\n- [charts/flyte-core/values.yaml](https://github.com/flyteorg/flyte/blob/master/charts/flyte-core/values.yaml)\n- [deployment/sandbox/flyte_helm_generated.yaml](https://github.com/flyteorg/flyte/blob/master/deployment/sandbox/flyte_helm_generated.yaml)\n- [deployment/eks/flyte_helm_generated.yaml](https://github.com/flyteorg/flyte/blob/master/deployment/eks/flyte_helm_generated.yaml)\n- [deployment/gcp/flyte_helm_generated.yaml](https://github.com/flyteorg/flyte/blob/master/deployment/gcp/flyte_helm_generated.yaml)"])</script><script>self.__next_f.push([1,"1c:T34be,"])</script><script>self.__next_f.push([1,"# Sandbox Environment\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [README.md](README.md)\n- [charts/flyte-binary/README.md](charts/flyte-binary/README.md)\n- [charts/flyte-binary/templates/_helpers.tpl](charts/flyte-binary/templates/_helpers.tpl)\n- [charts/flyte-binary/templates/admin-auth-secret.yaml](charts/flyte-binary/templates/admin-auth-secret.yaml)\n- [charts/flyte-binary/templates/auth-client-secret.yaml](charts/flyte-binary/templates/auth-client-secret.yaml)\n- [charts/flyte-binary/templates/cluster-resource-templates.yaml](charts/flyte-binary/templates/cluster-resource-templates.yaml)\n- [charts/flyte-binary/templates/clusterrole.yaml](charts/flyte-binary/templates/clusterrole.yaml)\n- [charts/flyte-binary/templates/clusterrolebinding.yaml](charts/flyte-binary/templates/clusterrolebinding.yaml)\n- [charts/flyte-binary/templates/configmap.yaml](charts/flyte-binary/templates/configmap.yaml)\n- [charts/flyte-binary/templates/deployment.yaml](charts/flyte-binary/templates/deployment.yaml)\n- [charts/flyte-binary/templates/ingress/grpc.yaml](charts/flyte-binary/templates/ingress/grpc.yaml)\n- [charts/flyte-binary/templates/ingress/http.yaml](charts/flyte-binary/templates/ingress/http.yaml)\n- [charts/flyte-binary/templates/service/grpc.yaml](charts/flyte-binary/templates/service/grpc.yaml)\n- [charts/flyte-binary/templates/service/http.yaml](charts/flyte-binary/templates/service/http.yaml)\n- [charts/flyte-binary/templates/service/webhook.yaml](charts/flyte-binary/templates/service/webhook.yaml)\n- [charts/flyte-binary/values.yaml](charts/flyte-binary/values.yaml)\n- [charts/flyte-sandbox/Chart.lock](charts/flyte-sandbox/Chart.lock)\n- [charts/flyte-sandbox/templates/proxy/configmap.yaml](charts/flyte-sandbox/templates/proxy/configmap.yaml)\n- [deployment/sandbox-binary/flyte_sandbox_binary_helm_generated.yaml](deployment/sandbox-binary/flyte_sandbox_binary_helm_generated.yaml)\n- [docker/sandbox-bundled/manifests/complete-agent.yaml](docker/sandbox-bundled/manifests/complete-agent.yaml)\n- [docker/sandbox-bundled/manifests/complete.yaml](docker/sandbox-bundled/manifests/complete.yaml)\n- [docker/sandbox-bundled/manifests/dev.yaml](docker/sandbox-bundled/manifests/dev.yaml)\n\n\u003c/details\u003e\n\n\n\nThe Flyte Sandbox Environment provides a lightweight, self-contained implementation of the Flyte platform designed for local development and testing. It packages all core Flyte components in a single Docker container, allowing developers to quickly experiment with workflows and features without requiring a full production deployment.\n\nFor information about production deployment options, see [Kubernetes Deployment with Helm](#2.1).\n\n## Architecture Overview\n\nThe Flyte Sandbox includes all essential components of the Flyte platform in a containerized environment. The sandbox uses a small Kubernetes cluster run inside Docker, with components deployed via Helm charts.\n\n### Sandbox Components\n\n```mermaid\ngraph TD\n    User([Developer]) --\u003e |\"1. Start sandbox\"| FlyteCtl[\"flytectl CLI\"]\n    User --\u003e |\"2. Write workflows\"| FlyteKit[\"flytekit SDK\"]\n    \n    FlyteCtl --\u003e |\"Creates\"| K8s[\"Kubernetes in Docker\"]\n    \n    subgraph \"Flyte Sandbox Environment\"\n        K8s --\u003e |\"Hosts\"| FlyteSandboxComponents\n        \n        subgraph \"FlyteSandboxComponents\"\n            FlyteAdmin[\"FlyteAdmin\"] --\u003e |\"Creates workflow executions\"| FlytePropeller\n            FlytePropeller[\"FlytePropeller\"] --\u003e |\"Executes workflow DAGs\"| K8sPods[\"Task Pods\"]\n            DataCatalog[\"DataCatalog\"] --\u003e |\"Manages metadata\"| DB\n        end\n        \n        FlyteAdmin --\u003e |\"Stores metadata\"| DB[(PostgreSQL)]\n        FlyteAdmin --\u003e |\"Stores data\"| ObjectStorage[(Minio)]\n        FlytePropeller --\u003e |\"Stores outputs\"| ObjectStorage\n        \n        EnvoyProxy[\"Envoy Proxy\"] --\u003e |\"Routes to\"| FlyteAdmin\n        EnvoyProxy --\u003e |\"Routes to\"| FlyteConsole\n        EnvoyProxy --\u003e |\"Routes to\"| MinioConsole[\"Minio Console\"]\n        EnvoyProxy --\u003e |\"Routes to\"| K8sDashboard\n        \n        FlyteConsole[\"Flyte Console\"] --\u003e |\"Queries\"| FlyteAdmin\n        K8sDashboard[\"Kubernetes Dashboard\"] --\u003e |\"Monitors\"| K8s\n    end\n    \n    User --\u003e |\"3. Access UI\"| EnvoyProxy\n    FlyteKit --\u003e |\"4. Register \u0026 execute workflows\"| FlyteAdmin\n```\n\nSources: \n- [docker/sandbox-bundled/manifests/complete.yaml:1-1054]()\n- [docker/sandbox-bundled/manifests/dev.yaml:1-765]()\n- [charts/flyte-sandbox/Chart.lock:1-19]()\n\n### Component Connectivity in Sandbox\n\n```mermaid\ngraph LR\n    subgraph \"External Access\"\n        Browser[\"Browser/User Access\"]\n        CLI[\"Command Line Tools\"]\n    end\n\n    subgraph \"Sandbox Container\"\n        Proxy[\"Envoy Proxy Port :30080\"]\n        Registry[\"Docker Registry Port :30000\"]\n        Postgres[\"PostgreSQL Port :30001\"]\n        MinioAPI[\"Minio API Port :30002\"]\n        \n        Proxy --\u003e |\"/console/*\"| FlyteHttp[\"flyte-sandbox-http :8088\"]\n        Proxy --\u003e |\"/flyteidl.*\"| FlyteGrpc[\"flyte-sandbox-grpc :8089\"]\n        Proxy --\u003e |\"/kubernetes-dashboard/*\"| K8sDash[\"kubernetes-dashboard :80\"]\n        Proxy --\u003e |\"/minio/*\"| MinioConsole[\"minio-console :9001\"]\n    end\n\n    Browser --\u003e Proxy\n    CLI --\u003e FlyteGrpc\n    CLI --\u003e Registry\n    CLI --\u003e MinioAPI\n```\n\nSources:\n- [docker/sandbox-bundled/manifests/complete.yaml:580-755]()\n- [charts/flyte-sandbox/templates/proxy/configmap.yaml:1-84]()\n\n## Setting Up the Sandbox\n\nThe Flyte Sandbox can be easily started using the `flytectl` command line tool. \n\n### Prerequisites\n\n1. Docker installed and running\n2. `flytectl` CLI tool installed\n3. `pyflyte` (part of the `flytekit` Python package) installed for workflow execution\n\n### Starting the Sandbox\n\nTo start the Flyte Sandbox environment:\n\n```\nflytectl demo start\n```\n\nThis command:\n1. Downloads the Flyte Sandbox Docker image\n2. Launches a containerized Kubernetes environment\n3. Deploys all Flyte components via Helm charts\n4. Configures the necessary network ports and services\n5. Provides connection information when ready\n\nSources:\n- [README.md:81-84]()\n\n### Sandbox Endpoints\n\nOnce running, the sandbox exposes the following endpoints:\n\n| Service | URL | Description |\n|---------|-----|-------------|\n| Flyte Console | http://localhost:30080/console | Web UI for managing workflows |\n| Kubernetes Dashboard | http://localhost:30080/kubernetes-dashboard | Dashboard for monitoring K8s resources |\n| Minio Console | http://localhost:30080/minio | Web UI for object storage |\n| PostgreSQL | localhost:30001 | Database for metadata (external access) |\n| Minio API | localhost:30002 | Object storage API (external access) |\n| Docker Registry | localhost:30000 | Container registry (for custom images) |\n\nSources:\n- [docker/sandbox-bundled/manifests/complete.yaml:890-908]()\n- [docker/sandbox-bundled/manifests/complete.yaml:990-996]()\n- [docker/sandbox-bundled/manifests/complete.yaml:1020-1021]()\n\n## Sandbox Configuration\n\nThe Flyte Sandbox environment is preconfigured with default settings for rapid startup, but can be customized for specific needs.\n\n### Core Components Configuration\n\nThe core Flyte components are configured via ConfigMaps in the sandbox environment:\n\n```mermaid\ngraph TD\n    subgraph \"Sandbox Configuration\"\n        ConfigMap[\"flyte-sandbox-config ConfigMap\"] --\u003e CoreConfig[\"000-core.yaml\"]\n        ConfigMap --\u003e PluginsConfig[\"001-plugins.yaml\"]\n        ConfigMap --\u003e DBConfig[\"002-database.yaml\"]\n        ConfigMap --\u003e StorageConfig[\"003-storage.yaml\"]\n        ConfigMap --\u003e InlineConfig[\"100-inline-config.yaml\"]\n    end\n\n    CoreConfig --\u003e |\"Configures\"| Admin[\"Admin Settings\"]\n    CoreConfig --\u003e |\"Configures\"| Propeller[\"Propeller Settings\"]\n    CoreConfig --\u003e |\"Configures\"| Catalog[\"DataCatalog Settings\"]\n    \n    PluginsConfig --\u003e |\"Defines\"| TaskPlugins[\"Task Plugins\"]\n    PluginsConfig --\u003e |\"Configures\"| K8sPlugin[\"Kubernetes Plugin\"]\n    \n    DBConfig --\u003e |\"Configures\"| PostgreSQL[\"PostgreSQL Connection\"]\n    StorageConfig --\u003e |\"Configures\"| S3Storage[\"S3 Compatible Storage\"]\n    \n    InlineConfig --\u003e |\"Customizes\"| EnvironmentVars[\"Environment Variables\"]\n    InlineConfig --\u003e |\"Customizes\"| ResourceLimits[\"Resource Limits\"]\n```\n\nSources:\n- [docker/sandbox-bundled/manifests/complete.yaml:417-537]()\n- [charts/flyte-binary/templates/configmap.yaml:1-212]()\n\n### Default Storage Configuration\n\nThe sandbox uses Minio as an S3-compatible object store with the following default configuration:\n\n```yaml\nstorage:\n  type: stow\n  stow:\n    kind: s3\n    config:\n      region: us-east-1\n      disable_ssl: true\n      v2_signing: true\n      endpoint: http://flyte-sandbox-minio.flyte:9000\n      auth_type: accesskey\n  container: my-s3-bucket\n```\n\nDefault credentials:\n- Access Key: `minio`\n- Secret Key: `miniostorage`\n\nSources:\n- [docker/sandbox-bundled/manifests/complete.yaml:484-494]()\n- [docker/sandbox-bundled/manifests/complete.yaml:496-503]()\n\n### Default Database Configuration\n\nThe sandbox uses PostgreSQL with the following configuration:\n\n```yaml\ndatabase:\n  postgres:\n    username: postgres\n    password: postgres\n    host: flyte-sandbox-postgresql\n    port: 5432\n    dbname: flyte\n    options: sslmode=disable\n```\n\nSources:\n- [docker/sandbox-bundled/manifests/complete.yaml:474-480]()\n- [docker/sandbox-bundled/manifests/complete.yaml:791-802]()\n\n## Using the Sandbox\n\nAfter starting the sandbox, you can use it to develop, test, and run Flyte workflows.\n\n### Workflow Execution Lifecycle\n\n```mermaid\nsequenceDiagram\n    participant Developer\n    participant SDK as Flytekit (Python SDK)\n    participant CLI as flytectl/pyflyte\n    participant Admin as FlyteAdmin\n    participant Propeller as FlytePropeller\n    participant Pods as Kubernetes Pods\n    \n    Developer-\u003e\u003eSDK: Create workflow in Python\n    \n    Note over Developer,SDK: def my_workflow(): ...\n    \n    Developer-\u003e\u003eCLI: pyflyte run --remote workflow.py my_workflow\n    CLI-\u003e\u003eAdmin: Register workflow\n    Admin-\u003e\u003eAdmin: Create execution\n    Admin-\u003e\u003ePropeller: Create FlyteWorkflow CRD\n    \n    Propeller-\u003e\u003ePods: Create task pods\n    Pods--\u003e\u003ePropeller: Report task status\n    Propeller--\u003e\u003eAdmin: Update execution status\n    \n    Admin--\u003e\u003eCLI: Return execution ID\n    CLI--\u003e\u003eDeveloper: Show execution details\n    \n    Developer-\u003e\u003eAdmin: View results in Flyte Console\n```\n\nSources:\n- [README.md:85-90]()\n\n### Example: Running a Workflow\n\n1. Create a simple workflow using Flytekit:\n\n```python\nfrom flytekit import task, workflow\n\n@task\ndef say_hello(name: str) -\u003e str:\n    return f\"Hello, {name}!\"\n\n@workflow\ndef hello_world_wf(name: str = \"World\") -\u003e str:\n    greeting = say_hello(name=name)\n    return greeting\n```\n\n2. Execute the workflow on the sandbox:\n\n```bash\n# Run locally first (optional)\npyflyte run hello_world.py hello_world_wf --name \"Flyte\"\n\n# Run on the sandbox cluster\npyflyte run --remote hello_world.py hello_world_wf --name \"Flyte\"\n```\n\n3. Access the Flyte Console at `http://localhost:30080/console` to monitor execution and view results.\n\nSources:\n- [README.md:72-89]()\n\n## Development Mode\n\nThe sandbox supports a special development mode which allows running Flyte components locally while connecting to the sandbox for storage and database services.\n\nIn development mode, the sandbox only deploys supporting services (PostgreSQL, Minio), while the Flyte services (Admin, Propeller) are expected to run on the host machine. This allows for quick iteration during development of Flyte's core components.\n\n```mermaid\ngraph TD\n    subgraph \"Host Machine\"\n        LocalAdmin[\"Local FlyteAdmin\"]\n        LocalPropeller[\"Local FlytePropeller\"]\n    end\n    \n    subgraph \"Sandbox Container (dev mode)\"\n        K8s[\"Kubernetes\"]\n        DB[\"PostgreSQL\"]\n        Storage[\"Minio\"]\n        SandboxProxy[\"Sandbox Proxy\"]\n    end\n    \n    LocalAdmin --\u003e |\"Connects to\"| DB\n    LocalAdmin --\u003e |\"Connects to\"| Storage\n    LocalPropeller --\u003e |\"Creates pods in\"| K8s\n    SandboxProxy --\u003e |\"Routes to local services\"| LocalAdmin\n```\n\nSources:\n- [docker/sandbox-bundled/manifests/dev.yaml:584-607]()\n\n## Limitations of the Sandbox\n\nThe Flyte Sandbox Environment has some limitations compared to a production deployment:\n\n1. **Single-node Kubernetes**: Limited to a single-node K8s cluster running in Docker\n2. **Performance**: Limited by the host machine's resources  \n3. **Persistence**: Data is stored in container volumes by default and may be lost when the container is removed\n4. **Auth**: Authentication is typically disabled for ease of development\n5. **Limited scalability**: Not suitable for large-scale workflows or high concurrency\n\nSources:\n- [charts/flyte-binary/values.yaml:43-62]()\n- [docker/sandbox-bundled/manifests/complete.yaml:430-433]()\n\n## Shutting Down the Sandbox\n\nTo stop the sandbox environment:\n\n```bash\nflytectl demo stop\n```\n\nThis will stop and remove the sandbox container, but preserve the data volumes. To completely clean up:\n\n```bash\nflytectl demo clean\n```\n\nThis removes the sandbox container and all associated data volumes.\n\nSources:\n- [README.md:81-90]() (implied from demo start command)\n\n## Conclusion\n\nThe Flyte Sandbox Environment provides a comprehensive local development and testing platform that includes all essential Flyte components. It allows developers to build, test, and refine workflows locally before deploying them to a production Flyte environment.\n\nThe sandbox is optimized for ease of use and quick startup, making it ideal for development, testing, and learning Flyte without the complexity of a full production deployment."])</script><script>self.__next_f.push([1,"1d:T4ef1,"])</script><script>self.__next_f.push([1,"# Workflow Execution Engine\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteadmin/cmd/scheduler/entrypoints/scheduler.go](flyteadmin/cmd/scheduler/entrypoints/scheduler.go)\n- [flyteadmin/pkg/manager/impl/execution_manager.go](flyteadmin/pkg/manager/impl/execution_manager.go)\n- [flyteadmin/pkg/manager/impl/execution_manager_test.go](flyteadmin/pkg/manager/impl/execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager.go](flyteadmin/pkg/manager/impl/node_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager_test.go](flyteadmin/pkg/manager/impl/node_execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager.go](flyteadmin/pkg/manager/impl/task_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager_test.go](flyteadmin/pkg/manager/impl/task_execution_manager_test.go)\n- [flyteadmin/pkg/repositories/config/migrations.go](flyteadmin/pkg/repositories/config/migrations.go)\n- [flyteadmin/pkg/repositories/config/migrations_test.go](flyteadmin/pkg/repositories/config/migrations_test.go)\n- [flyteadmin/pkg/repositories/models/execution.go](flyteadmin/pkg/repositories/models/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution.go](flyteadmin/pkg/repositories/transformers/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution_test.go](flyteadmin/pkg/repositories/transformers/execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution.go](flyteadmin/pkg/repositories/transformers/node_execution.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution_test.go](flyteadmin/pkg/repositories/transformers/node_execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution.go](flyteadmin/pkg/repositories/transformers/task_execution.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution_test.go](flyteadmin/pkg/repositories/transformers/task_execution_test.go)\n- [flyteadmin/pkg/rpc/adminservice/base.go](flyteadmin/pkg/rpc/adminservice/base.go)\n- [flyteadmin/pkg/runtime/application_config_provider.go](flyteadmin/pkg/runtime/application_config_provider.go)\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go](flyteadmin/pkg/runtime/interfaces/application_configuration.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor.go](flyteadmin/pkg/workflowengine/impl/k8s_executor.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go](flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution.go](flyteadmin/pkg/workflowengine/impl/prepare_execution.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go](flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go)\n- [flyteadmin/pkg/workflowengine/interfaces/executor.go](flyteadmin/pkg/workflowengine/interfaces/executor.go)\n- [flyteplugins/go/tasks/plugins/array/k8s/subtask.go](flyteplugins/go/tasks/plugins/array/k8s/subtask.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableTaskNodeStatus.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableTaskNodeStatus.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/MutableTaskNodeStatus.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/MutableTaskNodeStatus.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status_test.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status_test.go)\n- [flytepropeller/pkg/controller/controller.go](flytepropeller/pkg/controller/controller.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/dynamic_workflow.go](flytepropeller/pkg/controller/nodes/dynamic/dynamic_workflow.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler.go](flytepropeller/pkg/controller/nodes/dynamic/handler.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler_test.go](flytepropeller/pkg/controller/nodes/dynamic/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/executor.go](flytepropeller/pkg/controller/nodes/executor.go)\n- [flytepropeller/pkg/controller/nodes/executor_test.go](flytepropeller/pkg/controller/nodes/executor_test.go)\n- [flytepropeller/pkg/controller/nodes/handler/state.go](flytepropeller/pkg/controller/nodes/handler/state.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_info.go](flytepropeller/pkg/controller/nodes/handler/transition_info.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_info_test.go](flytepropeller/pkg/controller/nodes/handler/transition_info_test.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_test.go](flytepropeller/pkg/controller/nodes/handler/transition_test.go)\n- [flytepropeller/pkg/controller/nodes/node_state_manager.go](flytepropeller/pkg/controller/nodes/node_state_manager.go)\n- [flytepropeller/pkg/controller/nodes/transformers.go](flytepropeller/pkg/controller/nodes/transformers.go)\n- [flytepropeller/pkg/controller/workflow/executor_test.go](flytepropeller/pkg/controller/workflow/executor_test.go)\n\n\u003c/details\u003e\n\n\n\nThis document provides a detailed overview of the workflow execution engine that powers Flyte. It covers the system components involved in workflow execution, their interactions, and the execution lifecycle from creation to completion.\n\nThe workflow execution engine spans multiple components across the Flyte system, with the primary components being FlyteAdmin (control plane) and FlytePropeller (data plane). For information about specific workflow handlers, see [Node Execution System](#3.3).\n\n## Execution Engine Architecture\n\nThe Flyte workflow execution engine consists of two primary components that work together to execute workflows:\n\n1. **FlyteAdmin (Control Plane)** - Manages workflow metadata, handles execution requests, and coordinates the overall workflow execution process\n2. **FlytePropeller (Data Plane)** - Performs the actual execution of workflows by processing the workflow graph and running individual tasks\n\n```mermaid\nflowchart TD\n    User[\"Client/User\"] --\u003e|\"CreateExecution Request\"| FlyteAdmin\n    \n    subgraph \"Control Plane\"\n        FlyteAdmin --\u003e|\"Store Execution Metadata\"| Database[(Database)]\n        FlyteAdmin --\u003e|\"Store Inputs/Outputs\"| ObjectStore[(Object Storage)]\n        FlyteAdmin --\u003e|\"Submit FlyteWorkflow CRD\"| FlytePropeller\n    end\n    \n    subgraph \"Data Plane\"\n        FlytePropeller --\u003e|\"Process Workflow\"| NodeExecutor\n        NodeExecutor --\u003e|\"Execute Tasks\"| TaskPlugins\n        TaskPlugins --\u003e|\"Create Resources\"| K8s[(Kubernetes)]\n        NodeExecutor --\u003e|\"Report Node Events\"| FlyteAdmin\n    end\n    \n    FlytePropeller --\u003e|\"Report Status\"| FlyteAdmin\n```\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:75-93](flyteadmin/pkg/manager/impl/execution_manager.go:75-93)\n- [flytepropeller/pkg/controller/controller.go:82-96](flytepropeller/pkg/controller/controller.go:82-96)\n- [flytepropeller/pkg/controller/nodes/executor.go:98-106](flytepropeller/pkg/controller/nodes/executor.go:98-106)\n\n## Execution Creation Flow\n\nThe execution process begins when a client submits an execution request to FlyteAdmin.\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant FlyteAdmin\n    participant Storage as Object Storage\n    participant FlytePropeller\n    participant K8s as Kubernetes API\n    \n    Client-\u003e\u003eFlyteAdmin: CreateExecution Request\n    FlyteAdmin-\u003e\u003eFlyteAdmin: Validate Request\n    FlyteAdmin-\u003e\u003eStorage: Store Workflow Closure\n    FlyteAdmin-\u003e\u003eStorage: Offload Inputs\n    \n    Note over FlyteAdmin: Apply execution config (max parallelism, security context, etc.)\n    \n    FlyteAdmin-\u003e\u003eFlyteAdmin: Create Execution Model\n    FlyteAdmin-\u003e\u003eFlytePropeller: Submit FlyteWorkflow CRD\n    FlytePropeller-\u003e\u003eK8s: Create Resource\n    FlytePropeller--\u003e\u003eFlyteAdmin: Execution Started\n    FlyteAdmin--\u003e\u003eClient: ExecutionCreateResponse\n```\n\n### Execution Configuration\n\nWhen creating an execution, FlyteAdmin resolves various configuration settings from multiple sources with the following precedence (highest to lowest):\n\n1. Execution request\n2. Launch plan (if applicable)\n3. Project-domain level config\n4. Project level config\n5. System defaults\n\nConfiguration includes:\n- Max parallelism for task nodes\n- Security context (IAM roles, K8s service accounts)\n- Raw output location\n- Labels and annotations\n- Resource overrides\n- Cluster assignment\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:320-402](flyteadmin/pkg/manager/impl/execution_manager.go:320-402)\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go:205-229](flyteadmin/pkg/runtime/interfaces/application_configuration.go:205-229)\n- [flyteadmin/pkg/repositories/transformers/execution.go:62-143](flyteadmin/pkg/repositories/transformers/execution.go:62-143)\n\n## Workflow Execution in FlytePropeller\n\nFlytePropeller is a Kubernetes controller that processes FlyteWorkflow custom resources. It's responsible for executing the workflow graph by traversing the nodes in the workflow and executing each one based on its type.\n\n```mermaid\nflowchart TD\n    Controller[\"FlytePropeller Controller\"] --\u003e|\"Handle Workflow\"| WorkflowExecutor\n    WorkflowExecutor --\u003e|\"Execute Workflow\"| NodeExecutor\n    NodeExecutor --\u003e|\"Traverse DAG\"| RecursiveNodeHandler\n    \n    subgraph \"Node Handling\"\n        RecursiveNodeHandler --\u003e|\"Handle Node\"| HandlerFactory\n        HandlerFactory --\u003e|\"Get Handler\"| NodeHandlers\n        \n        subgraph \"NodeHandlers\"\n            TaskHandler[\"Task Handler\"]\n            SubworkflowHandler[\"Subworkflow Handler\"]\n            DynamicHandler[\"Dynamic Handler\"]\n            BranchHandler[\"Branch Handler\"]\n            StartEndHandler[\"Start/End Handler\"]\n        end\n    end\n    \n    NodeHandlers --\u003e|\"Execute Task/Subworkflow\"| ResourceCreation\n    ResourceCreation --\u003e|\"Create Pods/Resources\"| K8s[(Kubernetes)]\n    \n    RecursiveNodeHandler --\u003e|\"Handle Downstream\"| RecursiveNodeHandler\n```\n\nFlytePropeller uses a recursive, depth-first algorithm to traverse the workflow graph:\n\n1. Start with the workflow's start node\n2. For each node:\n   - If the node can be executed, handle it\n   - If the node has completed, process its downstream nodes\n3. A workflow completes when all terminal nodes are successfully executed\n\nFlytePropeller supports various execution controls:\n- Max parallelism limiting how many nodes run in parallel\n- Failure handling policies for continuing execution when nodes fail\n- Node execution state tracking\n\nSources:\n- [flytepropeller/pkg/controller/controller.go:327-468](flytepropeller/pkg/controller/controller.go:327-468)\n- [flytepropeller/pkg/controller/nodes/executor.go:177-262](flytepropeller/pkg/controller/nodes/executor.go:177-262)\n- [flytepropeller/pkg/controller/nodes/executor.go:266-341](flytepropeller/pkg/controller/nodes/executor.go:266-341)\n\n## Node Execution State Machine\n\nEach node in a workflow follows a state machine that transitions through different phases during execution:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e NodePhaseNotYetStarted\n    NodePhaseNotYetStarted --\u003e NodePhaseQueued: Schedule\n    NodePhaseQueued --\u003e NodePhaseRunning: Start execution\n    \n    NodePhaseRunning --\u003e NodePhaseSucceeding: Task completes\n    NodePhaseSucceeding --\u003e NodePhaseSucceeded: Finalize\n    \n    NodePhaseRunning --\u003e NodePhaseFailing: Task fails\n    NodePhaseFailing --\u003e NodePhaseFailed: Finalize\n    \n    NodePhaseRunning --\u003e NodePhaseTimingOut: Timeout\n    NodePhaseTimingOut --\u003e NodePhaseTimedOut: Finalize\n    \n    NodePhaseRunning --\u003e NodePhaseRetryableFailure: Recoverable error\n    NodePhaseRetryableFailure --\u003e NodePhaseQueued: Retry\n    \n    NodePhaseRunning --\u003e NodePhaseDynamicRunning: Dynamic node\n    NodePhaseDynamicRunning --\u003e NodePhaseSucceeding: Dynamic tasks complete\n    \n    NodePhaseSucceeded --\u003e [*]\n    NodePhaseFailed --\u003e [*]\n    NodePhaseTimedOut --\u003e [*]\n```\n\n### Node Types and Handlers\n\nFlytePropeller supports different types of nodes, each with a specialized handler:\n\n| Node Type | Handler | Purpose |\n|-----------|---------|---------|\n| Task | TaskHandler | Executes a single task by creating and monitoring K8s resources |\n| Subworkflow | SubworkflowHandler | Executes a nested workflow |\n| Dynamic | DynamicNodeHandler | Generates a workflow at runtime based on task output |\n| Branch | BranchHandler | Implements conditional logic to select execution paths |\n| Start/End | StartNodeHandler/EndNodeHandler | Special nodes marking the start and end of the workflow |\n| Array | ArrayHandler | Executes multiple parallel tasks |\n\nSources:\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:83-95](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:83-95)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:133-259](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:133-259)\n- [flytepropeller/pkg/controller/nodes/executor.go:7-17](flytepropeller/pkg/controller/nodes/executor.go:7-17)\n\n## Dynamic Workflow Execution\n\nDynamic workflows are a powerful feature of Flyte that allows generating workflow structure at runtime. The execution of a dynamic node involves:\n\n1. The parent task executes and produces a \"futures file\" defining tasks to execute\n2. The dynamic handler processes this file to build a subworkflow\n3. The subworkflow is executed just like any other workflow\n4. Results are aggregated and returned as the output of the dynamic node\n\n```mermaid\nsequenceDiagram\n    participant NE as NodeExecutor\n    participant DH as DynamicHandler\n    participant TE as TaskExecutor\n    participant WE as WorkflowExecutor\n    \n    NE-\u003e\u003eDH: Handle dynamic node\n    DH-\u003e\u003eTE: Execute parent task\n    TE--\u003e\u003eDH: Return with futures file\n    DH-\u003e\u003eDH: Build dynamic workflow\n    DH-\u003e\u003eWE: Execute dynamic workflow\n    \n    loop Until workflow completes\n        WE--\u003e\u003eDH: Report progress\n    end\n    \n    WE--\u003e\u003eDH: Workflow completed\n    DH--\u003e\u003eNE: Node completed\n```\n\nThe dynamic node goes through several phases:\n1. `DynamicNodePhaseNone`: Initial state, parent task executing\n2. `DynamicNodePhaseParentFinalizing`: Parent completed, finalizing\n3. `DynamicNodePhaseParentFinalized`: Parent finalized, ready to execute dynamic tasks\n4. `DynamicNodePhaseExecuting`: Dynamic tasks are executing\n5. `DynamicNodePhaseFailing`: Handling failures in dynamic tasks\n\nSources:\n- [flytepropeller/pkg/controller/nodes/dynamic/handler.go:82-95](flytepropeller/pkg/controller/nodes/dynamic/handler.go:82-95)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler.go:168-233](flytepropeller/pkg/controller/nodes/dynamic/handler.go:168-233)\n\n## Execution Data Management\n\nFlyte has a sophisticated system for handling execution inputs and outputs:\n\n```mermaid\nflowchart TD\n    Execution[\"Workflow Execution\"] --\u003e|\"Has\"| Inputs\n    Execution --\u003e|\"Produces\"| Outputs\n    \n    Inputs --\u003e|\"Stored at\"| InputsURI[\"InputsURI (storage.DataReference)\"]\n    Inputs --\u003e|\"User inputs at\"| UserInputsURI[\"UserInputsURI (storage.DataReference)\"]\n    \n    Outputs --\u003e|\"Stored at\"| OutputsURI[\"OutputsURI (storage.DataReference)\"]\n    \n    subgraph \"Storage Options\"\n        Inline[\"Inline (small data)\"]\n        Offloaded[\"Offloaded to object store (large data)\"]\n    end\n    \n    InputsURI -.-\u003e Inline\n    InputsURI -.-\u003e Offloaded\n    OutputsURI -.-\u003e Inline\n    OutputsURI -.-\u003e Offloaded\n    UserInputsURI -.-\u003e Inline\n    UserInputsURI -.-\u003e Offloaded\n```\n\n### Data Storage Strategies\n\nFlyte supports different strategies for handling execution data:\n\n1. **Inline Storage**: Small data can be stored directly in the execution records\n2. **Offloaded Storage**: Larger data is stored in an object store (S3, GCS, etc.) and referenced by URI\n3. **Configurable Thresholds**: The system can be configured to automatically decide when to offload data\n\nThe data management system also supports:\n- Caching of task execution results\n- Type checking of inputs and outputs\n- Data transformation between different formats\n\nSources:\n- [flyteadmin/pkg/repositories/transformers/execution.go:126-135](flyteadmin/pkg/repositories/transformers/execution.go:126-135)\n- [flyteadmin/pkg/repositories/transformers/task_execution.go:78-102](flyteadmin/pkg/repositories/transformers/task_execution.go:78-102)\n- [flyteadmin/pkg/manager/impl/execution_manager.go:515-541](flyteadmin/pkg/manager/impl/execution_manager.go:515-541)\n\n## Execution Monitoring and Events\n\nFlyte uses an event-based system to track execution progress:\n\n```mermaid\nflowchart TD\n    FlytePropeller --\u003e|\"Node Execution Events\"| FlyteAdmin\n    FlytePropeller --\u003e|\"Task Execution Events\"| FlyteAdmin\n    FlytePropeller --\u003e|\"Workflow Execution Events\"| FlyteAdmin\n    \n    FlyteAdmin --\u003e|\"Store\"| Database[(Database)]\n    FlyteAdmin --\u003e|\"Publish\"| NotificationSystem[\"Notification System\"]\n    FlyteAdmin --\u003e|\"Publish\"| MetricsSystem[\"Metrics System\"]\n    \n    NotificationSystem --\u003e|\"Send\"| Email[\"Email\"]\n    NotificationSystem --\u003e|\"Send\"| Slack[\"Slack\"]\n    NotificationSystem --\u003e|\"Send\"| PagerDuty[\"PagerDuty\"]\n    \n    MetricsSystem --\u003e|\"Record\"| Prometheus[\"Prometheus\"]\n```\n\nEach execution type (workflow, node, task) has its own event model with phase transitions and metadata. Events are used to:\n\n1. Update the execution state in the database\n2. Trigger notifications\n3. Record metrics\n4. Update execution closure with outputs or errors\n\nSources:\n- [flytepropeller/pkg/controller/nodes/transformers.go:26-51](flytepropeller/pkg/controller/nodes/transformers.go:26-51)\n- [flyteadmin/pkg/repositories/transformers/node_execution.go:31-70](flyteadmin/pkg/repositories/transformers/node_execution.go:31-70)\n- [flyteadmin/pkg/manager/impl/node_execution_manager.go:36-55](flyteadmin/pkg/manager/impl/node_execution_manager.go:36-55)\n\n## Execution Recovery and Failure Handling\n\nFlyte provides several mechanisms for handling failures in workflow execution:\n\n1. **Node Retries**: Nodes can be configured to retry on failure\n2. **Workflow Recovery**: Failed workflows can be recovered and restarted\n3. **Failure Policies**: Workflows can be configured to continue execution even when some nodes fail\n4. **Error Classification**: Errors are classified as system or user errors, affecting retry behavior\n\nThe system distinguishes between:\n- **Permanent Failures**: Cannot be recovered and result in workflow failure\n- **Retryable Failures**: Temporary issues that can be retried\n- **System vs. User Errors**: Different handling for system issues vs. user code problems\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:548-564](flytepropeller/pkg/controller/nodes/executor.go:548-564)\n- [flyteadmin/pkg/manager/impl/execution_manager.go:622-647](flyteadmin/pkg/manager/impl/execution_manager.go:622-647)\n\n## Execution Termination\n\nWorkflows can terminate in several states:\n\n1. **Success**: All nodes completed successfully\n2. **Failure**: One or more nodes failed permanently\n3. **Timeout**: Execution exceeded its time limit\n4. **Aborted**: Execution was manually terminated\n\nWhen a workflow reaches a terminal state:\n1. FlytePropeller reports the final status to FlyteAdmin\n2. FlyteAdmin updates the execution record\n3. Notifications are sent based on configuration\n4. Resources are cleaned up based on garbage collection policies\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:343-400](flytepropeller/pkg/controller/nodes/executor.go:343-400)\n- [flytepropeller/pkg/controller/nodes/executor.go:402-459](flytepropeller/pkg/controller/nodes/executor.go:402-459)\n\n## Conclusion\n\nThe Flyte workflow execution engine is a sophisticated distributed system that:\n- Provides a reliable and scalable platform for executing workflows\n- Supports complex workflow patterns including dynamic workflows\n- Handles data management efficiently\n- Provides comprehensive monitoring and recovery capabilities\n\nThe separation between the control plane (FlyteAdmin) and data plane (FlytePropeller) enables a scalable architecture that can handle large numbers of concurrent workflow executions."])</script><script>self.__next_f.push([1,"1e:T48b7,"])</script><script>self.__next_f.push([1,"# FlyteAdmin Execution Management\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteadmin/cmd/scheduler/entrypoints/scheduler.go](flyteadmin/cmd/scheduler/entrypoints/scheduler.go)\n- [flyteadmin/pkg/manager/impl/execution_manager.go](flyteadmin/pkg/manager/impl/execution_manager.go)\n- [flyteadmin/pkg/manager/impl/execution_manager_test.go](flyteadmin/pkg/manager/impl/execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager.go](flyteadmin/pkg/manager/impl/node_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager_test.go](flyteadmin/pkg/manager/impl/node_execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager.go](flyteadmin/pkg/manager/impl/task_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager_test.go](flyteadmin/pkg/manager/impl/task_execution_manager_test.go)\n- [flyteadmin/pkg/repositories/config/migrations.go](flyteadmin/pkg/repositories/config/migrations.go)\n- [flyteadmin/pkg/repositories/config/migrations_test.go](flyteadmin/pkg/repositories/config/migrations_test.go)\n- [flyteadmin/pkg/repositories/models/execution.go](flyteadmin/pkg/repositories/models/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution.go](flyteadmin/pkg/repositories/transformers/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution_test.go](flyteadmin/pkg/repositories/transformers/execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution.go](flyteadmin/pkg/repositories/transformers/node_execution.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution_test.go](flyteadmin/pkg/repositories/transformers/node_execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution.go](flyteadmin/pkg/repositories/transformers/task_execution.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution_test.go](flyteadmin/pkg/repositories/transformers/task_execution_test.go)\n- [flyteadmin/pkg/rpc/adminservice/base.go](flyteadmin/pkg/rpc/adminservice/base.go)\n- [flyteadmin/pkg/runtime/application_config_provider.go](flyteadmin/pkg/runtime/application_config_provider.go)\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go](flyteadmin/pkg/runtime/interfaces/application_configuration.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor.go](flyteadmin/pkg/workflowengine/impl/k8s_executor.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go](flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution.go](flyteadmin/pkg/workflowengine/impl/prepare_execution.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go](flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go)\n- [flyteadmin/pkg/workflowengine/interfaces/executor.go](flyteadmin/pkg/workflowengine/interfaces/executor.go)\n- [flyteplugins/go/tasks/plugins/array/k8s/subtask.go](flyteplugins/go/tasks/plugins/array/k8s/subtask.go)\n\n\u003c/details\u003e\n\n\n\nThis document describes the execution management functionality of FlyteAdmin, which is responsible for creating, tracking, and updating workflow executions in the Flyte system. FlyteAdmin serves as the control plane for executions, handling the lifecycle from creation to completion, managing state transitions, and processing execution-related events.\n\nFor information on how FlytePropeller actually executes workflows after FlyteAdmin creates them, see [FlytePropeller Execution](#3.2).\n\n## Execution Management Architecture\n\nFlyteAdmin's execution management system centers around the `ExecutionManager` component, which orchestrates the creation and tracking of workflow executions.\n\n```mermaid\ngraph TD\n    Client[\"Client/User\"] --\u003e|\"CreateExecution()\"| ExecutionManager\n\n    subgraph \"FlyteAdmin\"\n        ExecutionManager[\"ExecutionManager\"]\n        ResourceManager[\"ResourceManager\"]\n        QueueAllocator[\"QueueAllocator\"]\n        QualityOfServiceAllocator[\"QualityOfServiceAllocator\"]\n\n        ExecutionManager --\u003e|\"Validate/Transform\"| Transformers[\"Execution Transformers\"]\n        ExecutionManager --\u003e|\"Get resources\"| ResourceManager\n        ExecutionManager --\u003e|\"Allocate queue\"| QueueAllocator\n        ExecutionManager --\u003e|\"Assign QoS\"| QualityOfServiceAllocator\n        ExecutionManager --\u003e|\"Write Events\"| DBEventWriter[\"WorkflowExecutionEventWriter\"]\n\n        Transformers --\u003e|\"Create model\"| ExecutionModel[\"Execution DB Model\"]\n    end\n\n    ExecutionManager --\u003e|\"Execute()\"| WorkflowExecutor[\"Workflow Executor\"]\n    ExecutionManager --\u003e|\"Store/Retrieve Data\"| StorageClient[\"Storage Client\"]\n    ExecutionManager --\u003e|\"Persist\"| DB[\"Database\"]\n    ExecutionManager --\u003e|\"Publish events\"| EventPublisher[\"Event Publisher\"]\n    ExecutionManager --\u003e|\"Send notifications\"| NotificationPublisher[\"Notification Publisher\"]\n    \n    WorkflowExecutor --\u003e|\"Create FlyteWorkflow CRD\"| K8s[\"Kubernetes API\"]\n    \n    style ExecutionManager fill:#f9f\n```\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:75-93](flyteadmin/pkg/manager/impl/execution_manager.go:75-93)\n[flyteadmin/pkg/rpc/adminservice/base.go:29-44](flyteadmin/pkg/rpc/adminservice/base.go:29-44)\n\n### Key Components\n\n- **ExecutionManager**: Core component that handles execution creation, state management, and event processing\n- **ResourceManager**: Manages resource constraints and configuration for executions\n- **QueueAllocator**: Assigns appropriate queues for task execution\n- **QualityOfServiceAllocator**: Determines execution priority and resource allocation\n- **Transformers**: Convert between API models and database models\n- **WorkflowExecutor**: Interface to the execution engine (typically FlytePropeller)\n- **EventWriter**: Asynchronously writes execution events to the database\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:75-93](flyteadmin/pkg/manager/impl/execution_manager.go:75-93)\n[flyteadmin/pkg/rpc/adminservice/base.go:129-132](flyteadmin/pkg/rpc/adminservice/base.go:129-132)\n\n## Execution Lifecycle\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant ExecutionManager\n    participant Repository\n    participant WorkflowExecutor\n    participant StorageClient\n    participant EventProcessor\n\n    Client-\u003e\u003eExecutionManager: CreateExecution(request)\n    \n    ExecutionManager-\u003e\u003eExecutionManager: Validate request\n    ExecutionManager-\u003e\u003eExecutionManager: GetExecutionConfig()\n    \n    ExecutionManager-\u003e\u003eStorageClient: OffloadLiteralMap(inputs)\n    \n    ExecutionManager-\u003e\u003eWorkflowExecutor: Execute(workflowData)\n    WorkflowExecutor--\u003e\u003eExecutionManager: ExecutionResponse\n    \n    ExecutionManager-\u003e\u003eRepository: Create(executionModel)\n    \n    ExecutionManager--\u003e\u003eClient: ExecutionCreateResponse\n    \n    note over ExecutionManager,EventProcessor: Asynchronous Event Processing\n    \n    EventProcessor-\u003e\u003eExecutionManager: ProcessWorkflowExecutionEvent(event)\n    ExecutionManager-\u003e\u003eRepository: Get(executionID)\n    ExecutionManager-\u003e\u003eExecutionManager: UpdateExecutionModelState()\n    ExecutionManager-\u003e\u003eRepository: Update(executionModel)\n    \n    EventProcessor-\u003e\u003eEventProcessor: PublishNotification()\n```\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:452-691](flyteadmin/pkg/manager/impl/execution_manager.go:452-691)\n[flyteadmin/pkg/repositories/transformers/execution.go:208-300](flyteadmin/pkg/repositories/transformers/execution.go:208-300)\n\n### Execution Creation\n\n1. Client submits an execution creation request to FlyteAdmin\n2. ExecutionManager validates the request and resolves execution configuration\n3. Inputs are offloaded to a storage system if needed\n4. The workflow executor is invoked to create the actual execution\n5. An execution model is created and stored in the database\n6. A response with the execution ID is returned to the client\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:452-691](flyteadmin/pkg/manager/impl/execution_manager.go:452-691)\n\n### Execution State Transitions\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e UNDEFINED: Execution Created\n    UNDEFINED --\u003e QUEUED: Propeller Queues\n    QUEUED --\u003e RUNNING: Propeller Starts\n    RUNNING --\u003e SUCCEEDED: Success Completion\n    RUNNING --\u003e FAILED: Error Occurs\n    RUNNING --\u003e ABORTING: User Aborts\n    ABORTING --\u003e ABORTED: Abort Complete\n    SUCCEEDED --\u003e [*]\n    FAILED --\u003e [*]\n    ABORTED --\u003e [*]\n```\n\nSources:\n[flyteadmin/pkg/repositories/transformers/execution.go:208-300](flyteadmin/pkg/repositories/transformers/execution.go:208-300)\n[flyteadmin/pkg/repositories/transformers/execution.go:334-358](flyteadmin/pkg/repositories/transformers/execution.go:334-358)\n\n### Execution Events\n\nAs an execution progresses, events are sent by FlytePropeller to FlyteAdmin to update the state:\n\n1. FlyteAdmin receives workflow execution events\n2. The ExecutionManager retrieves the current execution model\n3. It updates the state based on the event information\n4. The updated model is stored in the database\n5. Notifications are sent if configured\n\nSources:\n[flyteadmin/pkg/repositories/transformers/execution.go:208-300](flyteadmin/pkg/repositories/transformers/execution.go:208-300)\n\n## Execution Configuration\n\nWhen creating an execution, the configuration is resolved from multiple sources in the following order of precedence:\n\n1. Execution creation request\n2. Launch plan configuration\n3. Workflow-specific configuration from matchable resources\n4. Project-domain-specific configuration from matchable resources\n5. Project-level configuration from matchable resources\n6. Application default configuration\n\n```mermaid\ngraph TD\n    subgraph \"Configuration Sources\"\n        RequestConfig[\"Execution Request Config\"]\n        LaunchPlanConfig[\"Launch Plan Config\"]\n        WorkflowConfig[\"Workflow Config Resource\"]\n        DomainConfig[\"Project-Domain Config Resource\"]\n        ProjectConfig[\"Project Config Resource\"]\n        DefaultConfig[\"Application Default Config\"]\n    end\n\n    RequestConfig --\u003e |\"Override\"| LaunchPlanConfig\n    LaunchPlanConfig --\u003e |\"Override\"| WorkflowConfig\n    WorkflowConfig --\u003e |\"Override\"| DomainConfig\n    DomainConfig --\u003e |\"Override\"| ProjectConfig\n    ProjectConfig --\u003e |\"Override\"| DefaultConfig\n\n    MergedConfig[\"Final Merged Configuration\"] --\u003e ExecutionParameters[\"ExecutionParameters\"]\n\n    RequestConfig --\u003e MergedConfig\n    LaunchPlanConfig --\u003e MergedConfig\n    WorkflowConfig --\u003e MergedConfig\n    DomainConfig --\u003e MergedConfig\n    ProjectConfig --\u003e MergedConfig\n    DefaultConfig --\u003e MergedConfig\n\n    ExecutionParameters --\u003e WorkflowExecutor[\"Workflow Executor\"]\n```\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:320-402](flyteadmin/pkg/manager/impl/execution_manager.go:320-402)\n[flyteadmin/pkg/runtime/interfaces/application_configuration.go:205-229](flyteadmin/pkg/runtime/interfaces/application_configuration.go:205-229)\n\n### Key Configuration Elements\n\nThe execution configuration includes:\n\n| Configuration Element | Description |\n|-----------------------|-------------|\n| SecurityContext | Identity (IAM role, K8s service account) to run as |\n| RawOutputDataConfig | Where to store execution outputs |\n| Labels | Key-value pairs for identification/filtering |\n| Annotations | Metadata for the execution |\n| MaxParallelism | Maximum parallel task nodes |\n| Interruptible | Whether tasks can be interrupted |\n| OverwriteCache | Whether to skip cached results |\n| ClusterAssignment | Which cluster pool to use |\n| ExecutionClusterLabel | Specific cluster to target |\n\nSources:\n[flyteadmin/pkg/runtime/interfaces/application_configuration.go:62-186](flyteadmin/pkg/runtime/interfaces/application_configuration.go:62-186)\n[flyteadmin/pkg/workflowengine/interfaces/executor.go:20-34](flyteadmin/pkg/workflowengine/interfaces/executor.go:20-34)\n\n### Cluster Assignment\n\nFlyteAdmin can assign executions to specific clusters:\n\n1. First checks for a project-domain specific cluster assignment resource\n2. Falls back to configuration-based cluster assignments by domain\n3. Can be overridden in the execution request (subject to validation)\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:404-448](flyteadmin/pkg/manager/impl/execution_manager.go:404-448)\n\n## Task Resource Management\n\nFlyteAdmin manages resource allocation for tasks within executions:\n\n1. Default resource values come from platform configuration\n2. These can be overridden by task-specific requests\n3. For container tasks, resources like CPU, memory, GPU, and ephemeral storage are managed\n4. Resource defaults are applied before workflow execution\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:176-271](flyteadmin/pkg/manager/impl/execution_manager.go:176-271)\n\n## Execution Storage Model\n\nExecutions are stored in multiple components:\n\n```mermaid\ngraph TD\n    ExecutionModel[\"Execution DB Model\"] --\u003e ExecutionKey[\"ExecutionKey (Project/Domain/Name)\"]\n    ExecutionModel --\u003e |\"Contains\"| Spec[\"Serialized ExecutionSpec\"]\n    ExecutionModel --\u003e |\"Contains\"| Closure[\"Serialized ExecutionClosure\"]\n    ExecutionModel --\u003e |\"References\"| InputsURI[\"Offloaded Inputs URI\"]\n    ExecutionModel --\u003e |\"References\"| UserInputsURI[\"Offloaded User Inputs URI\"]\n    \n    Spec --\u003e |\"Contains\"| Metadata[\"Execution Metadata\"]\n    Spec --\u003e |\"Contains\"| SecurityContext[\"Security Context\"]\n    Spec --\u003e |\"Contains\"| ExecutionConfig[\"Execution Config\"]\n    \n    Closure --\u003e |\"Contains\"| Phase[\"Execution Phase\"]\n    Closure --\u003e |\"Contains\"| OutputResult[\"Output Result\"]\n    Closure --\u003e |\"Contains\"| StateChangeDetails[\"State Change Details\"]\n\n    OutputResult --\u003e |\"One of\"| Outputs[\"Outputs URI/Data\"]\n    OutputResult --\u003e |\"One of\"| Error[\"Execution Error\"]\n    OutputResult --\u003e |\"One of\"| AbortMetadata[\"Abort Metadata\"]\n\n    Database[(Database)] --- ExecutionModel\n    ObjectStorage[(Object Storage)] --- InputsURI\n    ObjectStorage --- UserInputsURI\n    ObjectStorage --- |\"Large data\"| Outputs\n```\n\nSources:\n[flyteadmin/pkg/repositories/models/execution.go:16-57](flyteadmin/pkg/repositories/models/execution.go:16-57)\n[flyteadmin/pkg/repositories/transformers/execution.go:31-57](flyteadmin/pkg/repositories/transformers/execution.go:31-57)\n[flyteadmin/pkg/repositories/transformers/execution.go:62-148](flyteadmin/pkg/repositories/transformers/execution.go:62-148)\n\n## Execution Hierarchy\n\nFlyteAdmin supports nested executions with parent-child relationships:\n\n1. Parent workflow executions can launch child workflow executions\n2. The parent node execution ID is tracked for child executions\n3. Security context can be inherited from parent executions\n4. Execution cluster label can be inherited from parent executions\n5. Nesting level is tracked to understand execution hierarchy\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:276-314](flyteadmin/pkg/manager/impl/execution_manager.go:276-314)\n\n## Execution Termination\n\nExecutions can be terminated in two ways:\n\n1. **Normal termination**: The workflow completes successfully or fails\n   - FlytePropeller reports final state\n   - Outputs or errors are recorded\n   - Duration is calculated\n\n2. **Abort**: A user explicitly aborts an execution\n   - First marked as \"ABORTING\" with abort metadata\n   - FlytePropeller processes the abort request\n   - Final state is updated to \"ABORTED\" when complete\n\nSources:\n[flyteadmin/pkg/repositories/transformers/execution.go:334-358](flyteadmin/pkg/repositories/transformers/execution.go:334-358)\n\n## Data Handling\n\nFlyteAdmin manages workflow inputs and outputs:\n\n1. **Inputs offloading**: Large input literal maps are stored in object storage\n   - The storage reference is saved in the execution model\n   - Both raw user inputs and merged inputs (with defaults) are stored\n\n2. **Outputs handling**: Based on configuration policy\n   - Can be stored inline in the database for small outputs\n   - Large outputs are offloaded to object storage\n   - Error objects are always stored inline\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:517-536](flyteadmin/pkg/manager/impl/execution_manager.go:517-536)\n[flyteadmin/pkg/repositories/transformers/execution.go:257-293](flyteadmin/pkg/repositories/transformers/execution.go:257-293)\n\n## Event Processing\n\nFlyteAdmin processes multiple types of events related to executions:\n\n1. **Workflow Execution Events**: Update the main execution state\n2. **Node Execution Events**: Track individual node status\n3. **Task Execution Events**: Monitor task progress and completion\n\nThese events are processed asynchronously to update the database and send notifications when configured.\n\nSources:\n[flyteadmin/pkg/manager/impl/node_execution_manager.go:163-211](flyteadmin/pkg/manager/impl/node_execution_manager.go:163-211)\n[flyteadmin/pkg/manager/impl/task_execution_manager.go:63-165](flyteadmin/pkg/manager/impl/task_execution_manager.go:63-165)\n[flyteadmin/pkg/repositories/transformers/execution.go:208-300](flyteadmin/pkg/repositories/transformers/execution.go:208-300)\n\n## Database Schema\n\nThe execution model is stored in multiple tables:\n\n| Table | Purpose |\n|-------|---------|\n| executions | Primary execution data |\n| execution_events | Events for each execution |\n| node_executions | Individual node status |\n| node_execution_events | Events for nodes |\n| task_executions | Task execution data |\n\nSource:\n[flyteadmin/pkg/repositories/config/migrations.go:21-24](flyteadmin/pkg/repositories/config/migrations.go:21-24)\n\n## Workflow Executor Integration\n\nFlyteAdmin communicates with the workflow execution engine (usually FlytePropeller) through the `WorkflowExecutor` interface. The execution parameters include:\n\n1. Inputs literal map\n2. Execution configuration\n3. Security context\n4. Resource constraints\n5. References to offloaded data\n6. Labels and annotations\n\nThe workflow executor creates the actual workflow execution in Kubernetes (as a FlyteWorkflow CRD).\n\nSources:\n[flyteadmin/pkg/workflowengine/interfaces/executor.go:15-60](flyteadmin/pkg/workflowengine/interfaces/executor.go:15-60)\n[flyteadmin/pkg/workflowengine/impl/prepare_execution.go:30-37](flyteadmin/pkg/workflowengine/impl/prepare_execution.go:30-37)\n\n## Notification System\n\nFlyteAdmin can send notifications at various execution phase transitions:\n\n1. Notification settings can be specified in the launch plan or execution request\n2. The execution model stores notification configuration\n3. When phase transitions occur, notifications are sent to configured endpoints\n4. Notifications can be disabled for individual executions\n\nSources:\n[flyteadmin/pkg/manager/impl/execution_manager.go:653-665](flyteadmin/pkg/manager/impl/execution_manager.go:653-665)"])</script><script>self.__next_f.push([1,"1f:T4980,"])</script><script>self.__next_f.push([1,"# FlytePropeller Execution\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableArrayNode.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableArrayNode.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableTaskNodeStatus.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableTaskNodeStatus.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/MutableTaskNodeStatus.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/MutableTaskNodeStatus.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status_test.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status_test.go)\n- [flytepropeller/pkg/compiler/transformers/k8s/node.go](flytepropeller/pkg/compiler/transformers/k8s/node.go)\n- [flytepropeller/pkg/compiler/transformers/k8s/node_test.go](flytepropeller/pkg/compiler/transformers/k8s/node_test.go)\n- [flytepropeller/pkg/controller/config/config.go](flytepropeller/pkg/controller/config/config.go)\n- [flytepropeller/pkg/controller/config/config_flags.go](flytepropeller/pkg/controller/config/config_flags.go)\n- [flytepropeller/pkg/controller/config/config_flags_test.go](flytepropeller/pkg/controller/config/config_flags_test.go)\n- [flytepropeller/pkg/controller/controller.go](flytepropeller/pkg/controller/controller.go)\n- [flytepropeller/pkg/controller/nodes/array/handler.go](flytepropeller/pkg/controller/nodes/array/handler.go)\n- [flytepropeller/pkg/controller/nodes/array/handler_test.go](flytepropeller/pkg/controller/nodes/array/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/array/node_execution_context.go](flytepropeller/pkg/controller/nodes/array/node_execution_context.go)\n- [flytepropeller/pkg/controller/nodes/array/node_execution_context_test.go](flytepropeller/pkg/controller/nodes/array/node_execution_context_test.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/dynamic_workflow.go](flytepropeller/pkg/controller/nodes/dynamic/dynamic_workflow.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler.go](flytepropeller/pkg/controller/nodes/dynamic/handler.go)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler_test.go](flytepropeller/pkg/controller/nodes/dynamic/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/executor.go](flytepropeller/pkg/controller/nodes/executor.go)\n- [flytepropeller/pkg/controller/nodes/executor_test.go](flytepropeller/pkg/controller/nodes/executor_test.go)\n- [flytepropeller/pkg/controller/nodes/handler/state.go](flytepropeller/pkg/controller/nodes/handler/state.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_info.go](flytepropeller/pkg/controller/nodes/handler/transition_info.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_info_test.go](flytepropeller/pkg/controller/nodes/handler/transition_info_test.go)\n- [flytepropeller/pkg/controller/nodes/handler/transition_test.go](flytepropeller/pkg/controller/nodes/handler/transition_test.go)\n- [flytepropeller/pkg/controller/nodes/node_state_manager.go](flytepropeller/pkg/controller/nodes/node_state_manager.go)\n- [flytepropeller/pkg/controller/nodes/transformers.go](flytepropeller/pkg/controller/nodes/transformers.go)\n- [flytepropeller/pkg/controller/workflow/executor_test.go](flytepropeller/pkg/controller/workflow/executor_test.go)\n\n\u003c/details\u003e\n\n\n\nThis document explains how FlytePropeller, Flyte's Kubernetes-based workflow execution engine, processes and executes workflows. It covers the core execution architecture, node execution model, and execution flow. For information about FlytePropeller deployment and configuration, see [Deployment](#2).\n\n## Core Execution Architecture\n\nFlytePropeller is a Kubernetes controller that executes workflows represented as FlyteWorkflow custom resources. It follows a declarative reconciliation pattern, continuously comparing the current state of workflow executions with their desired state and taking actions to converge them.\n\n```mermaid\nflowchart TD\n    subgraph \"FlytePropeller\"\n        Controller[\"Controller\"]\n        WorkflowExecutor[\"WorkflowExecutor\"]\n        NodeExecutor[\"NodeExecutor\"]\n        HandlerFactory[\"NodeHandlerFactory\"]\n        \n        Controller --\u003e|\"1. Process\\nFlyteWorkflow CR\"| WorkflowExecutor\n        WorkflowExecutor --\u003e|\"2. Execute\\nNodes\"| NodeExecutor\n        NodeExecutor --\u003e|\"3. Get Handler\\nfor Node Type\"| HandlerFactory\n        \n        HandlerFactory --\u003e|\"4. Create\\nHandler\"| NodeHandlers\n    end\n    \n    subgraph \"NodeHandlers\"\n        TaskHandler[\"TaskHandler\"]\n        DynamicHandler[\"DynamicNodeHandler\"]\n        WorkflowHandler[\"WorkflowNodeHandler\"]\n        BranchHandler[\"BranchNodeHandler\"]\n        ArrayHandler[\"ArrayNodeHandler\"]\n        StartEndHandler[\"Start/EndNodeHandler\"]\n    end\n    \n    subgraph \"K8s Resources\"\n        FlyteWorkflow[\"FlyteWorkflow CR\"]\n        Pods[\"Task Pods\"]\n    end\n    \n    K8sAPI[\"Kubernetes API\"] --\u003e Controller\n    Controller --\u003e K8sAPI\n    NodeHandlers --\u003e Pods\n    FlyteWorkflow --\u003e Controller\n```\n\nSources:\n- [flytepropeller/pkg/controller/controller.go:60-97](flytepropeller/pkg/controller/controller.go:60-97)\n- [flytepropeller/pkg/controller/controller.go:326-365](flytepropeller/pkg/controller/controller.go:326-365)\n- [flytepropeller/pkg/controller/nodes/executor.go:97-107](flytepropeller/pkg/controller/nodes/executor.go:97-107)\n\n## Workflow Execution Flow\n\nWhen a FlyteWorkflow custom resource is created or updated, FlytePropeller reconciles it by executing nodes in the workflow in dependency order. The execution follows these key steps:\n\n```mermaid\nsequenceDiagram\n    participant Controller as FlytePropeller Controller\n    participant WorkflowExec as Workflow Executor\n    participant NodeExec as Node Executor\n    participant Handler as Node Handler\n    participant K8s as Kubernetes\n    \n    Controller-\u003e\u003eWorkflowExec: Handle FlyteWorkflow\n    WorkflowExec-\u003e\u003eWorkflowExec: Initialize workflow context\n    \n    loop Until workflow completes\n        WorkflowExec-\u003e\u003eNodeExec: Execute node\n        NodeExec-\u003e\u003eHandler: Get handler for node type\n        Handler-\u003e\u003eNodeExec: Initialize handler\n        \n        alt If node not started\n            NodeExec-\u003e\u003eNodeExec: Prepare inputs\n            NodeExec-\u003e\u003eHandler: Handle node (phase: NotYetStarted)\n            Handler-\u003e\u003eNodeExec: Return transition to Queued\n        else If node queued\n            NodeExec-\u003e\u003eHandler: Handle node (phase: Queued)\n            Handler-\u003e\u003eK8s: Create resources\n            Handler-\u003e\u003eNodeExec: Return transition to Running\n        else If node running\n            NodeExec-\u003e\u003eHandler: Handle node (phase: Running)\n            Handler-\u003e\u003eK8s: Check resources\n            alt If resources complete\n                Handler-\u003e\u003eNodeExec: Return transition to Succeeding\n            else If resources failed\n                Handler-\u003e\u003eNodeExec: Return transition to Failing\n            else\n                Handler-\u003e\u003eNodeExec: Return transition to Running\n            end\n        else If node succeeding\n            NodeExec-\u003e\u003eHandler: Handle node (phase: Succeeding)\n            Handler-\u003e\u003eNodeExec: Return transition to Succeeded\n        else If node failing\n            NodeExec-\u003e\u003eHandler: Handle node (phase: Failing)\n            Handler-\u003e\u003eNodeExec: Return transition to Failed\n        end\n        \n        NodeExec-\u003e\u003eWorkflowExec: Return node status\n        \n        alt If node succeeded or terminal\n            WorkflowExec-\u003e\u003eNodeExec: Execute downstream nodes\n        end\n    end\n    \n    WorkflowExec-\u003e\u003eController: Update workflow status\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:175-262](flytepropeller/pkg/controller/nodes/executor.go:175-262)\n- [flytepropeller/pkg/controller/nodes/executor.go:264-341](flytepropeller/pkg/controller/nodes/executor.go:264-341)\n\n## Node Execution Model\n\nThe workflow execution model in FlytePropeller is based on a directed acyclic graph (DAG) where nodes represent tasks, subworkflows, or control flow elements. Nodes transition through different phases as they execute.\n\n### Node Types\n\nFlytePropeller supports various node types, each with specialized handling:\n\n| Node Type | Description | Handler |\n|-----------|-------------|---------|\n| Task      | Executes a Flyte task using the appropriate plugin | TaskHandler |\n| Workflow  | Executes a subworkflow or remote workflow | WorkflowNodeHandler |\n| Branch    | Evaluates conditions and selects execution path | BranchNodeHandler |\n| Dynamic   | Creates and executes a workflow at runtime | DynamicNodeHandler |\n| Array     | Executes tasks in parallel across an array of inputs | ArrayNodeHandler |\n| Start     | Special node marking the entry point of a workflow | StartHandler |\n| End       | Special node marking the completion of a workflow | EndHandler |\n\nSources:\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go:37-49](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go:37-49)\n- [flytepropeller/pkg/controller/nodes/executor.go:1-17](flytepropeller/pkg/controller/nodes/executor.go:1-17)\n\n### Node Phases\n\nEach node progresses through a series of phases that represent its execution state:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e NotYetStarted\n    NotYetStarted --\u003e Queued: Can execute\n    Queued --\u003e Running: Handler started\n    Running --\u003e Succeeding: Task completed\n    Running --\u003e Failing: Task failed\n    Running --\u003e TimingOut: Timeout detected\n    Running --\u003e DynamicRunning: Dynamic workflow created\n    Succeeding --\u003e Succeeded: Outputs processed\n    Failing --\u003e Failed: Error recorded\n    Failing --\u003e RetryableFailure: Retryable error\n    TimingOut --\u003e TimedOut: Timeout confirmed\n    RetryableFailure --\u003e Queued: Retry\n    DynamicRunning --\u003e Succeeding: Dynamic workflow completed\n    DynamicRunning --\u003e Failing: Dynamic workflow failed\n    Succeeded --\u003e [*]\n    Failed --\u003e [*]\n    TimedOut --\u003e [*]\n    \n    NotYetStarted --\u003e Skipped: Condition false\n    Skipped --\u003e [*]\n```\n\nSources:\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go:51-68](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/iface.go:51-68)\n- [flytepropeller/pkg/controller/nodes/handler/transition_info.go:13-25](flytepropeller/pkg/controller/nodes/handler/transition_info.go:13-25)\n\n## Node Execution Implementation\n\nThe core of FlytePropeller's execution engine is the recursive node executor, which traverses the workflow DAG and executes nodes in order.\n\n### Recursive Node Execution\n\nThe recursive node execution algorithm:\n\n1. Starts with the workflow's start node\n2. Processes each node based on its current phase\n3. When a node completes, traverses to its downstream nodes\n4. Continues until all nodes have reached a terminal state\n\n```mermaid\nflowchart TD\n    start[Start] --\u003e nodeState{Node Phase?}\n    \n    nodeState --\u003e|\"NotYetStarted\\nQueued\\nRunning\"| canExecute{Can Execute?}\n    canExecute --\u003e|No| returnPending[Return Pending]\n    canExecute --\u003e|Yes| getHandler[Get Node Handler]\n    getHandler --\u003e handleNode[Handle Node]\n    handleNode --\u003e updateState[Update Node State]\n    updateState --\u003e returnStatus[Return Status]\n    \n    nodeState --\u003e|\"Succeeded\\nSkipped\\nRecovered\"| handleDownstream[Process Downstream Nodes]\n    handleDownstream --\u003e checkAny{Any Downstream\\nRunning?}\n    checkAny --\u003e|Yes| returnPending\n    checkAny --\u003e|No| returnComplete[Return Complete]\n    \n    nodeState --\u003e|\"Failed\\nTimedOut\"| handleFailure[Process Downstream Nodes]\n    handleFailure --\u003e propagateFailure[Propagate Failure]\n    propagateFailure --\u003e returnFailure[Return Failed Status]\n    \n    returnPending --\u003e end[End]\n    returnComplete --\u003e end\n    returnStatus --\u003e end\n    returnFailure --\u003e end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:175-262](flytepropeller/pkg/controller/nodes/executor.go:175-262)\n- [flytepropeller/pkg/controller/nodes/executor.go:264-341](flytepropeller/pkg/controller/nodes/executor.go:264-341)\n\n### Handling Node Transitions\n\nNode transitions are managed through a handler pattern where specialized handlers process different node types. Each handler implements the `NodeHandler` interface:\n\n```\nNodeHandler Interface\n Handle(ctx, nodeExecutionContext)  Transition, error\n Finalize(ctx, nodeExecutionContext)  error  \n Abort(ctx, nodeExecutionContext, reason)  error\n FinalizeRequired()  bool\n```\n\nThe key method is `Handle()`, which processes the node based on its current state and returns a transition that indicates the next state.\n\nSources:\n- [flytepropeller/pkg/controller/nodes/handler/transition_info.go](flytepropeller/pkg/controller/nodes/handler/transition_info.go)\n- [flytepropeller/pkg/controller/nodes/executor.go:97-107](flytepropeller/pkg/controller/nodes/executor.go:97-107)\n\n## Special Node Types\n\n### Dynamic Node Execution\n\nDynamic nodes allow workflows to generate subworkflows at runtime. They follow a specialized state machine:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e DynamicNodePhaseNone\n    DynamicNodePhaseNone --\u003e DynamicNodePhaseParentFinalizing: Parent succeeded with futures file\n    DynamicNodePhaseParentFinalizing --\u003e DynamicNodePhaseParentFinalized: Parent node finalized\n    DynamicNodePhaseParentFinalized --\u003e DynamicNodePhaseExecuting: Generated workflow ready\n    DynamicNodePhaseExecuting --\u003e DynamicNodePhaseFailing: Subworkflow failed\n    DynamicNodePhaseExecuting --\u003e Success: Subworkflow succeeded\n    DynamicNodePhaseFailing --\u003e Failed: Failure handled\n    Success --\u003e [*]\n    Failed --\u003e [*]\n```\n\nSources:\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:81-95](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:81-95)\n- [flytepropeller/pkg/controller/nodes/dynamic/handler.go:175-233](flytepropeller/pkg/controller/nodes/dynamic/handler.go:175-233)\n\n### Array Node Execution\n\nArray nodes handle parallel execution of tasks across a collection of inputs. The execution process involves:\n\n1. Validating array input lengths\n2. Initializing array state\n3. Creating and executing subnodes in parallel based on parallelism constraints\n4. Collecting and aggregating results\n\nThe array node state machine includes these phases:\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e ArrayNodePhaseNone\n    ArrayNodePhaseNone --\u003e ArrayNodePhaseExecuting: Initialized\n    ArrayNodePhaseExecuting --\u003e ArrayNodePhaseSucceeding: All subnodes completed\n    ArrayNodePhaseExecuting --\u003e ArrayNodePhaseFailing: Some subnodes failed\n    ArrayNodePhaseSucceeding --\u003e Success: Outputs aggregated\n    ArrayNodePhaseFailing --\u003e Failed: Failure handled\n    Success --\u003e [*]\n    Failed --\u003e [*]\n```\n\nSources:\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:222-230](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/node_status.go:222-230)\n- [flytepropeller/pkg/controller/nodes/array/handler.go:190-460](flytepropeller/pkg/controller/nodes/array/handler.go:190-460)\n\n## Error Handling and Recovery\n\nFlytePropeller implements robust error handling and recovery mechanisms:\n\n### Retry Behavior\n\nNodes can be configured with retry strategies specifying:\n- Maximum number of attempts\n- Backoff behavior\n- Whether to retry on system failures\n\n```mermaid\nflowchart TD\n    start[Node Failed] --\u003e retryable{Is Error\\nRetryable?}\n    retryable --\u003e|No| failed[Mark as Failed]\n    retryable --\u003e|Yes| attempts{Max Attempts\\nReached?}\n    attempts --\u003e|Yes| failed\n    attempts --\u003e|No| sysFailure{Is System\\nFailure?}\n    sysFailure --\u003e|Yes| sysAttempts{Max System\\nFailures Reached?}\n    sysFailure --\u003e|No| retryNode[Increment Attempts\\nRetry Node]\n    sysAttempts --\u003e|Yes| failed\n    sysAttempts --\u003e|No| retryNode\n    \n    failed --\u003e end[End]\n    retryNode --\u003e end\n```\n\nSources:\n- [flytepropeller/pkg/controller/config/config.go:278-285](flytepropeller/pkg/controller/config/config.go:278-285)\n- [flytepropeller/pkg/controller/nodes/executor.go:483-504](flytepropeller/pkg/controller/nodes/executor.go:483-504)\n\n### Recovery Mechanisms\n\nFlytePropeller supports recovery from execution failures by:\n\n1. Attempting to recover node executions from previous runs\n2. Reusing cached outputs when available\n3. Handling node state transitions during recovery\n\nWhen a node is being recovered, FlytePropeller:\n- Checks if a previous execution exists\n- Retrieves inputs and outputs from the previous execution\n- Restores the node to the appropriate state\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:551-726](flytepropeller/pkg/controller/nodes/executor.go:551-726)\n\n## Workflow Termination\n\nWhen a workflow completes (either successfully or with failure), FlytePropeller:\n\n1. Finalizes all nodes that require finalization\n2. Updates the workflow status to the terminal state\n3. Records workflow completion events\n4. Releases all resources\n\nFor graceful termination, a finalization process is invoked for any nodes that need cleanup:\n\n```mermaid\nflowchart TD\n    start[Start Termination] --\u003e phase{Workflow Phase}\n    \n    phase --\u003e|\"Succeeded\\nFailed\\nAborted\"| finalizeNeeded{Any Nodes Need\\nFinalization?}\n    finalizeNeeded --\u003e|Yes| finalizeNodes[Finalize Nodes]\n    finalizeNeeded --\u003e|No| releaseResources[Release Resources]\n    finalizeNodes --\u003e releaseResources\n    \n    releaseResources --\u003e recordEvents[Record Terminal Events]\n    recordEvents --\u003e end[End]\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/executor.go:343-400](flytepropeller/pkg/controller/nodes/executor.go:343-400)\n- [flytepropeller/pkg/controller/workflow/executor_test.go:1187-1297](flytepropeller/pkg/controller/workflow/executor_test.go:1187-1297)\n\n## Configuration\n\nFlytePropeller's execution behavior can be customized through configuration options:\n\n| Configuration | Description | Default |\n|---------------|-------------|---------|\n| `MaxNodeRetriesOnSystemFailures` | Maximum retries for system failures | 3 |\n| `InterruptibleFailureThreshold` | Threshold for interruptible failures | -1 |\n| `DefaultMaxAttempts` | Default max attempts for a node | 1 |\n| `MaxParallelism` | Maximum parallelism for tasks and launch plans | 0 (unlimited) |\n| `MaxStreakLength` | Maximum consecutive rounds for one workflow | 8 |\n| `EventVersion` | Controls event format version | 0 |\n\nSources:\n- [flytepropeller/pkg/controller/config/config.go:55-138](flytepropeller/pkg/controller/config/config.go:55-138)\n- [flytepropeller/pkg/controller/nodes/executor.go:143-173](flytepropeller/pkg/controller/nodes/executor.go:143-173)"])</script><script>self.__next_f.push([1,"20:T7300,"])</script><script>self.__next_f.push([1,"# Task Execution\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flytepropeller/pkg/controller/nodes/task/backoff/controller.go](flytepropeller/pkg/controller/nodes/task/backoff/controller.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go](flytepropeller/pkg/controller/nodes/task/backoff/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config.go](flytepropeller/pkg/controller/nodes/task/config/config.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags.go](flytepropeller/pkg/controller/nodes/task/config/config_flags.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go](flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go)\n- [flytepropeller/pkg/controller/nodes/task/handler.go](flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/handler_test.go](flytepropeller/pkg/controller/nodes/task/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go](flytepropeller/pkg/controller/nodes/task/plugin_config.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config_test.go](flytepropeller/pkg/controller/nodes/task/plugin_config_test.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/noop_resourcemanager.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/noop_resourcemanager.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager_test.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager_test.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/resourceconstraints.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/resourceconstraints.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager_test.go](flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager_test.go)\n- [flytepropeller/pkg/controller/nodes/task/taskexec_context.go](flytepropeller/pkg/controller/nodes/task/taskexec_context.go)\n- [flytepropeller/pkg/controller/nodes/task/taskexec_context_test.go](flytepropeller/pkg/controller/nodes/task/taskexec_context_test.go)\n- [flytepropeller/pkg/controller/nodes/task/transformer.go](flytepropeller/pkg/controller/nodes/task/transformer.go)\n- [flytepropeller/pkg/controller/nodes/task/transformer_test.go](flytepropeller/pkg/controller/nodes/task/transformer_test.go)\n\n\u003c/details\u003e\n\n\n\nThis page provides a detailed overview of how tasks are executed in Flyte. It covers the task execution lifecycle, including the plugin system, resource management, and status handling. For information about node execution, see [FlytePropeller Execution Engine](#3.2). For information about array tasks specifically, see [Array Tasks](#3.4).\n\n## Task Execution Overview\n\nTask execution in Flyte is handled by the Task Handler, which delegates the actual execution to plugins. The Task Handler is responsible for managing the task execution lifecycle, including plugin resolution, resource management, state transitions, and event reporting.\n\n```mermaid\ngraph TD\n    subgraph \"Task Execution Flow\"\n        NodeExec[\"NodeExecutionContext\"] --\u003e|\"calls Handle()\"| TaskHandler[\"Handler\"]\n        TaskHandler --\u003e|\"1. Resolves plugin\"| Plugin[\"Plugin\"]\n        TaskHandler --\u003e|\"2. Creates context\"| TaskExecCtx[\"TaskExecutionContext\"]\n        TaskHandler --\u003e|\"3. Invokes plugin\"| Plugin\n        Plugin --\u003e|\"4. Returns phase info\"| TaskHandler\n        TaskHandler --\u003e|\"5. Records events\"| EventsRecorder[\"EventsRecorder\"]\n        TaskHandler --\u003e|\"6. Updates state\"| NodeState[\"NodeStateWriter\"]\n        TaskHandler --\u003e|\"7. Returns transition\"| NodeExec\n    end\n```\n\nSources: \n- [flytepropeller/pkg/controller/nodes/task/handler.go:642-797](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/transformer.go:90-201](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/transformer.go)\n\n## Task Execution Lifecycle\n\nThe task execution process follows a well-defined lifecycle that handles tasks from initialization to completion:\n\n```mermaid\nsequenceDiagram\n    participant NC as NodeExecutionContext\n    participant TH as Task Handler\n    participant PR as Plugin Registry\n    participant TEC as TaskExecutionContext\n    participant P as Plugin\n    participant RM as ResourceManager\n    participant ER as EventsRecorder\n    participant NSW as NodeStateWriter\n\n    NC-\u003e\u003eTH: Handle(ctx, nCtx)\n    TH-\u003e\u003ePR: ResolvePlugin(taskType, executionConfig)\n    PR--\u003e\u003eTH: plugin\n    TH-\u003e\u003eTEC: newTaskExecutionContext(ctx, nCtx, plugin)\n    TH-\u003e\u003eTH: Get current NodeState\n    \n    alt First execution (PhaseUndefined)\n        TH-\u003e\u003eP: Handle(ctx, taskExecutionContext)\n        P--\u003e\u003eTH: PhaseInfo\n    else Ongoing execution\n        TH-\u003e\u003eP: Handle(ctx, taskExecutionContext)\n        P--\u003e\u003eTH: PhaseInfo\n    end\n    \n    TH-\u003e\u003eTH: Process plugin transition\n    TH-\u003e\u003eER: RecordTaskEvent(event)\n    TH-\u003e\u003eNSW: PutTaskNodeState(state)\n    \n    alt Task not terminal\n        TH-\u003e\u003eNC: IncrementParallelism()\n    end\n    \n    TH--\u003e\u003eNC: Return transition\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/handler.go:642-797](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/handler.go:376-457](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n\n### Key Task Execution Phases\n\nTasks go through various phases during execution:\n\n1. **PhaseUndefined**: Initial state\n2. **PhaseNotReady**: Task dependencies not yet satisfied\n3. **PhaseQueued**: Task submitted for execution\n4. **PhaseInitializing**: Task execution is initializing\n5. **PhaseWaitingForResources**: Task waiting for resources to be available\n6. **PhaseRunning**: Task is actively running\n7. **PhaseSuccess**: Task completed successfully\n8. **PhasePermanentFailure**: Task failed (non-recoverable)\n9. **PhaseRetryableFailure**: Task failed (recoverable)\n10. **PhaseAborted**: Task was aborted\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/transformer.go:31-56](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/transformer.go)\n\n## Plugin Architecture\n\nTask execution in Flyte is handled by plugins. The plugin system is extensible and supports different types of task execution.\n\n```mermaid\ngraph TD\n    subgraph \"Task Handler\"\n        TH[\"Handler\"]\n        PR[\"PluginRegistry\"]\n        DefaultPlugin[\"DefaultPlugin\"]\n        PluginsForType[\"PluginsForType Map\"]\n    end\n    \n    subgraph \"Task Plugins\"\n        CorePlugins[\"Core Plugins\"]\n        K8sPlugins[\"K8s Plugins\"]\n        WebAPIPlugins[\"WebAPI Plugins\"]\n    end\n    \n    subgraph \"K8s Plugins\"\n        K8sPM[\"K8s PluginManager\"]\n        PodPlugin[\"Pod Plugin\"]\n        SparkPlugin[\"Spark Plugin\"]\n        PyTorchPlugin[\"PyTorch Plugin\"]\n    end\n    \n    subgraph \"WebAPI Plugins\"\n        AgentPlugin[\"Agent Plugin\"]\n        BigQueryPlugin[\"BigQuery Plugin\"]\n        SnowflakePlugin[\"Snowflake Plugin\"]\n    end\n    \n    TH --\u003e|\"uses\"| PR\n    TH --\u003e|\"maintains\"| DefaultPlugin\n    TH --\u003e|\"maintains\"| PluginsForType\n    \n    PR --\u003e|\"registers\"| CorePlugins\n    PR --\u003e|\"registers\"| K8sPlugins\n    PR --\u003e|\"registers\"| WebAPIPlugins\n    \n    K8sPlugins --\u003e|\"manages\"| K8sPM\n    K8sPM --\u003e|\"creates\"| PodPlugin\n    K8sPM --\u003e|\"creates\"| SparkPlugin\n    K8sPM --\u003e|\"creates\"| PyTorchPlugin\n    \n    WebAPIPlugins --\u003e|\"creates\"| AgentPlugin\n    WebAPIPlugins --\u003e|\"creates\"| BigQueryPlugin\n    WebAPIPlugins --\u003e|\"creates\"| SnowflakePlugin\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/handler.go:228-424](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-76](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/plugin_config.go)\n\n### Plugin Resolution\n\nWhen a task is executed, the Task Handler resolves the appropriate plugin based on the task type and execution configuration. Plugin resolution follows this logic:\n\n1. Check for plugin overrides in the execution config for the task type\n2. If no override is found, use the default plugin for the task type\n3. If no default plugin for the task type exists, check if it's an agent-compatible task type\n4. If all else fails, use the default plugin (if configured)\n\n```mermaid\nflowchart TD\n    Start[\"Task Execution\"] --\u003e CheckOverrides[\"Check execution config for overrides\"]\n    CheckOverrides --\u003e OverridesExist{\"Overrides exist?\"}\n    OverridesExist --\u003e|Yes| TryOverrides[\"Try each override plugin\"]\n    TryOverrides --\u003e OverrideFound{\"Override plugin\\nfound?\"}\n    OverrideFound --\u003e|Yes| UseOverride[\"Use override plugin\"]\n    OverrideFound --\u003e|No| CheckMissingBehavior{\"Missing behavior\\nis FAIL?\"}\n    CheckMissingBehavior --\u003e|Yes| FailResolution[\"Fail resolution\"]\n    CheckMissingBehavior --\u003e|No| CheckDefaultForType[\"Check default plugin for task type\"]\n    \n    OverridesExist --\u003e|No| CheckDefaultForType\n    CheckDefaultForType --\u003e DefaultExists{\"Default exists\\nfor task type?\"}\n    DefaultExists --\u003e|Yes| UseDefault[\"Use default plugin for task type\"]\n    DefaultExists --\u003e|No| CheckWebAPIPlugins[\"Check if task type is handled by WebAPI plugins\"]\n    \n    CheckWebAPIPlugins --\u003e WebAPIHandles{\"WebAPI handles\\ntask type?\"}\n    WebAPIHandles --\u003e|Yes| UseWebAPI[\"Use WebAPI plugin\"]\n    WebAPIHandles --\u003e|No| CheckDefaultPlugin[\"Check if default plugin exists\"]\n    \n    CheckDefaultPlugin --\u003e DefaultPluginExists{\"Default plugin\\nexists?\"}\n    DefaultPluginExists --\u003e|Yes| UseDefaultPlugin[\"Use default plugin\"]\n    DefaultPluginExists --\u003e|No| FailWithError[\"Fail with error: no plugin for task type\"]\n    \n    UseOverride --\u003e End[\"Return resolved plugin\"]\n    UseDefault --\u003e End\n    UseWebAPI --\u003e End\n    UseDefaultPlugin --\u003e End\n    FailResolution --\u003e End[\"Error: no plugin found\"]\n    FailWithError --\u003e End\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/handler.go:381-423](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-76](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/plugin_config.go)\n\n## K8s Plugin Manager\n\nThe K8s Plugin Manager is a core component of Flyte's task execution system. It creates and manages Kubernetes resources for task execution.\n\n```mermaid\ngraph TD\n    subgraph \"K8s Plugin Manager\"\n        PM[\"PluginManager\"]\n        RM[\"ResourceMonitor\"]\n        BOC[\"BackOffController\"]\n        EW[\"EventWatcher\"]\n    end\n    \n    subgraph \"Kubernetes\"\n        Client[\"KubeClient\"]\n        Resources[\"K8s Resources\"]\n        Events[\"K8s Events\"]\n    end\n    \n    subgraph \"Plugin Lifecycle Methods\"\n        Handle[\"Handle()\"]\n        LaunchResource[\"launchResource()\"]\n        CheckResourcePhase[\"checkResourcePhase()\"]\n        Abort[\"Abort()\"]\n        Finalize[\"Finalize()\"]\n    end\n    \n    PM --\u003e|\"uses\"| Client\n    PM --\u003e|\"monitors\"| RM\n    PM --\u003e|\"manages backoff\"| BOC\n    PM --\u003e|\"watches\"| EW\n    \n    Handle --\u003e|\"calls\"| LaunchResource\n    Handle --\u003e|\"calls\"| CheckResourcePhase\n    \n    LaunchResource --\u003e|\"creates\"| Resources\n    CheckResourcePhase --\u003e|\"checks\"| Resources\n    EW --\u003e|\"monitors\"| Events\n    Abort --\u003e|\"deletes/updates\"| Resources\n    Finalize --\u003e|\"removes finalizers\"| Resources\n    \n    BOC --\u003e|\"controls\"| LaunchResource\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-552](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n\n### K8s Plugin Execution Flow\n\n```mermaid\nsequenceDiagram\n    participant TC as TaskExecutionContext\n    participant PM as PluginManager\n    participant KC as KubeClient\n    participant KA as Kubernetes API\n    participant BOC as BackOffController\n    \n    TC-\u003e\u003ePM: Handle(ctx, tCtx)\n    \n    alt First time (PhaseNotStarted)\n        PM-\u003e\u003ePM: Build resource (Pod, etc.)\n        PM-\u003e\u003ePM: Add object metadata\n        \n        alt Resource quota may be exceeded\n            PM-\u003e\u003eBOC: GetOrCreateHandler(resourceKey)\n            BOC--\u003e\u003ePM: backOffHandler\n            PM-\u003e\u003eBOC: Handle(operation, resourceRequest)\n            \n            alt Resource request exceeds ceiling\n                BOC--\u003e\u003ePM: Error: operation blocked by backoff\n                PM--\u003e\u003eTC: PhaseWaitingForResources\n            else Resource request within ceiling\n                BOC-\u003e\u003eKC: Create(resource)\n                \n                alt Creation successful\n                    KC-\u003e\u003eKA: Create resource\n                    KA--\u003e\u003eKC: Resource created\n                    KC--\u003e\u003eBOC: Success\n                    BOC--\u003e\u003ePM: Success\n                    PM--\u003e\u003eTC: PhaseQueued\n                else Resource quota exceeded\n                    KC-\u003e\u003eKA: Create resource\n                    KA--\u003e\u003eKC: Error: resource quota exceeded\n                    KC--\u003e\u003eBOC: Error: resource quota exceeded\n                    BOC--\u003e\u003ePM: Error: resource quota exceeded\n                    PM--\u003e\u003eTC: PhaseWaitingForResources\n                end\n            end\n            \n        else Normal resource creation\n            PM-\u003e\u003eKC: Create(resource)\n            \n            alt Creation successful\n                KC-\u003e\u003eKA: Create resource\n                KA--\u003e\u003eKC: Resource created\n                KC--\u003e\u003ePM: Success\n                PM--\u003e\u003eTC: PhaseQueued\n            else Creation failed\n                KC-\u003e\u003eKA: Create resource\n                KA--\u003e\u003eKC: Error\n                KC--\u003e\u003ePM: Error\n                PM--\u003e\u003eTC: Error based on failure type\n            end\n        end\n        \n    else Resource already started\n        PM-\u003e\u003ePM: Build identity resource\n        PM-\u003e\u003eKC: Get(resource)\n        KC-\u003e\u003eKA: Get resource\n        KA--\u003e\u003eKC: Resource\n        KC--\u003e\u003ePM: Resource\n        \n        PM-\u003e\u003ePM: GetTaskPhase(resource)\n        \n        alt Resource successful\n            PM-\u003e\u003eTC: PhaseSuccess\n        else Resource still running\n            PM-\u003e\u003eTC: PhaseRunning\n        else Resource failed\n            PM-\u003e\u003eTC: PhaseRetryableFailure or PhasePermanentFailure\n        end\n    end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:272-330](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n\n## Resource Management\n\nResource management is a critical aspect of task execution in Flyte. It ensures that tasks are executed efficiently and within resource constraints.\n\n```mermaid\ngraph TD\n    subgraph \"Resource Management Architecture\"\n        TH[\"Task Handler\"]\n        RM[\"ResourceManager\"]\n        RTRM[\"TaskResourceManager (Proxy)\"]\n        BCRM[\"BaseResourceManager\"]\n        BRM[\"Builder\"]\n        RR[\"ResourceRegistrar\"]\n    end\n    \n    subgraph \"Resource Manager Implementations\"\n        NoopRM[\"NoopResourceManager\"]\n        RedisRM[\"RedisResourceManager\"]\n    end\n    \n    subgraph \"Resource Constraints\"\n        PRC[\"ProjectScopeResourceConstraint\"]\n        NRC[\"NamespaceScopeResourceConstraint\"]\n    end\n    \n    TH --\u003e|\"creates\"| RTRM\n    RTRM --\u003e|\"wraps\"| BCRM\n    BRM --\u003e|\"builds\"| BCRM\n    RM --\u003e|\"provides\"| RR\n    \n    BCRM -.-\u003e|\"implemented by\"| NoopRM\n    BCRM -.-\u003e|\"implemented by\"| RedisRM\n    \n    RTRM --\u003e|\"composes\"| PRC\n    RTRM --\u003e|\"composes\"| NRC\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go:13-152](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/noop_resourcemanager.go:1-49](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/resourcemanager/noop_resourcemanager.go)\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager.go:13-174](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/resourcemanager/redis_resourcemanager.go)\n\n### Resource Allocation Flow\n\n```mermaid\nsequenceDiagram\n    participant P as Plugin\n    participant RTRM as TaskResourceManager\n    participant RM as ResourceManager\n    \n    P-\u003e\u003eRTRM: AllocateResource(namespace, token, constraints)\n    RTRM-\u003e\u003eRTRM: ComposeResourceConstraint(constraints)\n    RTRM-\u003e\u003eRTRM: Prepend token prefix\n    RTRM-\u003e\u003eRM: AllocateResource(namespace, prefixedToken, composedConstraints)\n    RM--\u003e\u003eRTRM: AllocationStatus\n    RTRM-\u003e\u003eRTRM: Record ResourcePoolInfo\n    RTRM--\u003e\u003eP: AllocationStatus\n    \n    P-\u003e\u003eRTRM: ReleaseResource(namespace, token)\n    RTRM-\u003e\u003eRTRM: Prepend token prefix\n    RTRM-\u003e\u003eRM: ReleaseResource(namespace, prefixedToken)\n    RM--\u003e\u003eRTRM: Success/Error\n    RTRM--\u003e\u003eP: Success/Error\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go:93-135](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/resourcemanager/resourcemanager.go)\n\n## Backoff Mechanism\n\nWhen resources are constrained, Flyte uses a backoff mechanism to avoid constant retries that would overwhelm the system.\n\n```mermaid\ngraph TD\n    subgraph \"Backoff System Components\"\n        BOC[\"BackOffController\"]\n        CRABH[\"ComputeResourceAwareBackOffHandler\"]\n        SBB[\"SimpleBackOffBlocker\"]\n        CRC[\"ComputeResourceCeilings\"]\n    end\n    \n    subgraph \"Flow Control\"\n        IsBlocking{\"Is blocking?\"}\n        IsEligible{\"Resource request\\nbelow ceiling?\"}\n        Operation[\"Operation (e.g., create pod)\"]\n        IsResourceError{\"Resource\\nquota error?\"}\n        UpdateCeiling[\"Update resource ceiling\"]\n        BackOff[\"Back off (increase exponent)\"]\n        BlockOperation[\"Block operation\"]\n        ReturnSuccess[\"Return success\"]\n        ReturnError[\"Return error\"]\n    end\n    \n    BOC --\u003e|\"manages\"| CRABH\n    CRABH --\u003e|\"contains\"| SBB\n    CRABH --\u003e|\"contains\"| CRC\n    \n    CRABH --\u003e|\"flow begins\"| IsBlocking\n    IsBlocking --\u003e|\"Yes\"| IsEligible\n    IsBlocking --\u003e|\"No\"| Operation\n    \n    IsEligible --\u003e|\"Yes\"| Operation\n    IsEligible --\u003e|\"No\"| BlockOperation\n    \n    Operation --\u003e|\"Result\"| IsResourceError\n    IsResourceError --\u003e|\"Yes\"| UpdateCeiling\n    IsResourceError --\u003e|\"No\"| ReturnSuccess\n    \n    UpdateCeiling --\u003e BackOff\n    BackOff --\u003e ReturnError\n    BlockOperation --\u003e ReturnError\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go:128-192](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/backoff/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/controller.go:22-62](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/backoff/controller.go)\n\n## Task Execution Context\n\nThe Task Execution Context provides all the information needed for a plugin to execute a task.\n\n```mermaid\nclassDiagram\n    class TaskExecutionContext {\n        +TaskExecutionMetadata() TaskExecutionMetadata\n        +InputReader() InputReader\n        +OutputWriter() OutputWriter\n        +TaskReader() TaskReader\n        +PluginStateReader() PluginStateReader\n        +PluginStateWriter() PluginStateWriter\n        +ResourceManager() ResourceManager\n        +SecretManager() SecretManager\n        +DataStore() DataStore\n        +Catalog() CatalogClient\n        +EventsRecorder() EventsRecorder\n        +TaskRefreshIndicator() SignalAsync\n    }\n    \n    class TaskExecutionMetadata {\n        +GetTaskExecutionID() TaskExecutionID\n        +GetNamespace() string\n        +GetLabels() map[string]string\n        +GetAnnotations() map[string]string\n        +GetOwnerReference() OwnerReference\n        +GetOverrides() TaskOverrides\n        +GetMaxAttempts() uint32\n        +GetPlatformResources() ResourceRequirements\n        +GetEnvironmentVariables() map[string]string\n    }\n    \n    class TaskExecutionID {\n        +GetID() TaskExecutionIdentifier\n        +GetGeneratedName() string\n        +GetUniqueNodeID() string\n    }\n    \n    TaskExecutionContext \"1\" --\u003e \"1\" TaskExecutionMetadata\n    TaskExecutionMetadata \"1\" --\u003e \"1\" TaskExecutionID\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/taskexec_context.go:28-106](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/taskexec_context.go)\n- [flytepropeller/pkg/controller/nodes/task/taskexec_context.go:106-154](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/taskexec_context.go)\n- [flytepropeller/pkg/controller/nodes/task/taskexec_context.go:244-316](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/taskexec_context.go)\n\n## Task Execution Events\n\nTask execution progress is tracked through events. These events are sent to FlyteAdmin and used to update the UI and track task status.\n\n| Event Phase | Description | Next Possible Phases |\n|-------------|-------------|----------------------|\n| UNDEFINED | Initial state | QUEUED |\n| QUEUED | Task submitted for execution | INITIALIZING, RUNNING, FAILED |\n| INITIALIZING | Task execution is initializing | RUNNING, WAITING_FOR_RESOURCES, FAILED |\n| WAITING_FOR_RESOURCES | Task waiting for resources | INITIALIZING, RUNNING, FAILED |\n| RUNNING | Task is actively running | SUCCEEDED, FAILED |\n| SUCCEEDED | Task completed successfully | (terminal) |\n| FAILED | Task failed (permanent or retryable) | (terminal) |\n| ABORTED | Task was aborted | (terminal) |\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/transformer.go:31-56](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/transformer.go)\n- [flytepropeller/pkg/controller/nodes/task/transformer.go:90-201](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/transformer.go)\n- [flytepropeller/pkg/controller/nodes/task/handler.go:734-775](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n\n## Error Handling and Recovery\n\nTask execution can encounter various error scenarios that need to be handled appropriately.\n\n### Output Validation Errors\n\nWhen a task succeeds but fails to produce valid outputs, the handler determines if the error is recoverable:\n\n```mermaid\nflowchart TD\n    Start[\"Validate Output\"] --\u003e TaskSuccess{\"Task reports\\nsuccess?\"}\n    TaskSuccess --\u003e|No| EndNoError[\"Return no error\"]\n    TaskSuccess --\u003e|Yes| OutputsDeclared{\"Outputs\\ndeclared?\"}\n    \n    OutputsDeclared --\u003e|No| EndNoError\n    OutputsDeclared --\u003e|Yes| ReaderExists{\"Output reader\\nexists?\"}\n    \n    ReaderExists --\u003e|No| ReturnRecoverable[\"Return recoverable error:\\nOutputs not generated\"]\n    ReaderExists --\u003e|Yes| CheckError{\"Is output\\nan error?\"}\n    \n    CheckError --\u003e|Yes| ReadError[\"Read error from output\"]\n    ReadError --\u003e ReturnTaskError[\"Return task error\"]\n    \n    CheckError --\u003e|No| CheckOutputExists{\"Output file\\nexists?\"}\n    CheckOutputExists --\u003e|No| ReturnRecoverable2[\"Return recoverable error:\\nOutputs not found\"]\n    \n    CheckOutputExists --\u003e|Yes| IsFile{\"Is direct file?\"}\n    IsFile --\u003e|No| CommitOutput[\"Commit output to storage\"]\n    CommitOutput --\u003e EndNoError\n    \n    IsFile --\u003e|Yes| EndNoError\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/handler.go:798-884](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n\n### Resource Quota Handling\n\nWhen a task encounters resource quota limitations, Flyte uses a backoff mechanism to avoid overwhelming the system with retries:\n\n```mermaid\nflowchart TD\n    Start[\"Task Resource Creation\"] --\u003e QuotaExceeded{\"Resource quota\\nexceeded?\"}\n    \n    QuotaExceeded --\u003e|No| Continue[\"Continue execution\"]\n    QuotaExceeded --\u003e|Yes| EligibleRequest{\"Request exceeds\\nquota limits?\"}\n    \n    EligibleRequest --\u003e|Yes| PermanentFailure[\"Permanent failure:\\nResourceRequestsExceedLimits\"]\n    EligibleRequest --\u003e|No| BackOffActive{\"BackOff\\ncontroller active?\"}\n    \n    BackOffActive --\u003e|Yes| UpdateBackOff[\"Update backoff parameters\"]\n    BackOffActive --\u003e|No| SimpleWait[\"Wait for resources\"]\n    \n    UpdateBackOff --\u003e WaitForResources[\"Transition to\\nWaitingForResources phase\"]\n    SimpleWait --\u003e WaitForResources\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:232-246](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go:128-192](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/backoff/handler.go)\n\n## Task Abort and Finalization\n\nTasks may need to be aborted or finalized in certain scenarios, such as when a workflow is terminated or when resources need to be cleaned up.\n\n### Abort Process\n\n```mermaid\nsequenceDiagram\n    participant NC as NodeExecutionContext\n    participant TH as Task Handler\n    participant P as Plugin\n    participant ER as EventsRecorder\n    \n    NC-\u003e\u003eTH: Abort(ctx, nCtx, reason)\n    \n    alt Task in terminal phase (and not cleanup on failure)\n        TH--\u003e\u003eNC: Return (nothing to do)\n    else Task needs abortion\n        TH-\u003e\u003eTH: ResolvePlugin(taskType, executionConfig)\n        TH-\u003e\u003eTH: Create taskExecutionContext\n        TH-\u003e\u003eP: Abort(ctx, tCtx)\n        \n        TH-\u003e\u003eER: Record buffered events with Aborted phase\n        TH-\u003e\u003eER: Record abort event with reason\n        \n        TH--\u003e\u003eNC: Return success or error\n    end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/handler.go:886-964](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:410-457](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n\n### K8s Resource Finalization\n\n```mermaid\nsequenceDiagram\n    participant PM as PluginManager\n    participant Client as KubeClient\n    participant O as K8sObject\n    \n    PM-\u003e\u003ePM: getResource(tCtx)\n    PM-\u003e\u003eClient: Get(resource)\n    \n    alt Resource exists\n        Client--\u003e\u003ePM: Resource object\n        PM-\u003e\u003ePM: clearFinalizer(ctx, object)\n        PM-\u003e\u003eClient: Update(object without finalizer)\n        \n        alt DeleteResourceOnFinalize enabled\n            PM-\u003e\u003eClient: Delete(object)\n        end\n    else Resource doesn't exist\n        Client--\u003e\u003ePM: NotFound error\n        PM--\u003e\u003ePM: Continue (nothing to do)\n    end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:460-552](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n\n## Configuration\n\nTask execution behavior can be configured through various configuration options:\n\n| Configuration | Description | Default |\n|---------------|-------------|---------|\n| `task-plugins.enabled-plugins` | List of plugins to enable | [] (all plugins enabled) |\n| `task-plugins.default-for-task-types` | Maps task types to their default plugin handler | {} |\n| `max-plugin-phase-versions` | Maximum number of plugin phase versions allowed | 100000 |\n| `backoff.base-second` | Base duration for exponential backoff | 2 seconds |\n| `backoff.max-duration` | Maximum backoff duration | 20 seconds |\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/config/config.go:15-101](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/config/config.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-76](https://github.com/flyteorg/flyte/blob/master/flytepropeller/pkg/controller/nodes/task/plugin_config.go)"])</script><script>self.__next_f.push([1,"21:T3f50,"])</script><script>self.__next_f.push([1,"# Array Tasks\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go)\n- [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableArrayNode.go](flytepropeller/pkg/apis/flyteworkflow/v1alpha1/mocks/ExecutableArrayNode.go)\n- [flytepropeller/pkg/compiler/transformers/k8s/node.go](flytepropeller/pkg/compiler/transformers/k8s/node.go)\n- [flytepropeller/pkg/compiler/transformers/k8s/node_test.go](flytepropeller/pkg/compiler/transformers/k8s/node_test.go)\n- [flytepropeller/pkg/controller/config/config.go](flytepropeller/pkg/controller/config/config.go)\n- [flytepropeller/pkg/controller/config/config_flags.go](flytepropeller/pkg/controller/config/config_flags.go)\n- [flytepropeller/pkg/controller/config/config_flags_test.go](flytepropeller/pkg/controller/config/config_flags_test.go)\n- [flytepropeller/pkg/controller/nodes/array/handler.go](flytepropeller/pkg/controller/nodes/array/handler.go)\n- [flytepropeller/pkg/controller/nodes/array/handler_test.go](flytepropeller/pkg/controller/nodes/array/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/array/node_execution_context.go](flytepropeller/pkg/controller/nodes/array/node_execution_context.go)\n- [flytepropeller/pkg/controller/nodes/array/node_execution_context_test.go](flytepropeller/pkg/controller/nodes/array/node_execution_context_test.go)\n\n\u003c/details\u003e\n\n\n\nThis document explains how array nodes are processed for parallel execution of tasks within Flyte. Array tasks allow you to execute the same task over a collection of inputs in parallel, providing a simple and efficient way to process data at scale. For details about individual task execution, see [Task Execution](#3.3).\n\n## Overview\n\nArray tasks enable a form of map-reduce pattern where the same operation is performed on each item in an input collection. Flyte manages the fan-out execution, monitoring, and collection of results with configurable parallelism, retry behavior, and success criteria.\n\n```mermaid\ngraph TD\n    subgraph \"Array Task Execution\"\n        InputCollection[\"Input Collection\"] --\u003e SplitInputs[\"Split Inputs\"]\n        SplitInputs --\u003e |\"Item 1\"| Task1[\"SubNode Task 1\"]\n        SplitInputs --\u003e |\"Item 2\"| Task2[\"SubNode Task 2\"]\n        SplitInputs --\u003e |\"Item 3\"| Task3[\"SubNode Task 3\"]\n        SplitInputs --\u003e |\"Item n\"| TaskN[\"SubNode Task n\"]\n        \n        Task1 --\u003e |\"Result 1\"| GatherOutputs[\"Gather Outputs\"]\n        Task2 --\u003e |\"Result 2\"| GatherOutputs\n        Task3 --\u003e |\"Result 3\"| GatherOutputs\n        TaskN --\u003e |\"Result n\"| GatherOutputs\n        \n        GatherOutputs --\u003e OutputCollection[\"Output Collection\"]\n    end\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:54-764](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Array Node Structure\n\nAn array node is defined by an `ArrayNodeSpec` that contains:\n\n- **SubNodeSpec**: The specification of the task to be executed for each item in the input collection\n- **Parallelism**: Optional limit on the number of concurrent executions\n- **MinSuccesses**: Optional minimum number of successful executions required for the array to be considered successful\n- **MinSuccessRatio**: Optional minimum ratio of successful executions (alternative to MinSuccesses)\n- **BoundInputs**: Optional list of inputs that should not be split (passed directly to each task)\n\n```mermaid\nclassDiagram\n    class ArrayNodeSpec {\n        +NodeSpec SubNodeSpec\n        +uint32* Parallelism\n        +uint32* MinSuccesses\n        +float32* MinSuccessRatio\n        +string[] BoundInputs\n        +GetSubNodeSpec() *NodeSpec\n        +GetParallelism() *uint32\n        +GetMinSuccesses() *uint32\n        +GetMinSuccessRatio() *float32\n        +GetBoundInputs() []string\n    }\n```\n\nSources: [flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go:1-29](https://github.com/flyteorg/flyte/flytepropeller/pkg/apis/flyteworkflow/v1alpha1/array.go), [flytepropeller/pkg/compiler/transformers/k8s/node.go:178-208](https://github.com/flyteorg/flyte/flytepropeller/pkg/compiler/transformers/k8s/node.go)\n\n## Input Handling\n\nWhen an array task executes, the inputs are processed as follows:\n\n1. For each input that is a collection and not in the `BoundInputs` list, items are distributed to individual subtasks\n2. Each subtask receives a single element from each collection input\n3. Non-collection inputs and bound inputs are passed directly to each subtask\n\nIf all inputs are collections of the same length, each subtask receives the corresponding item from each collection. For example, with collections `[a, b, c]` and `[x, y, z]`, the first subtask receives `a` and `x`, the second receives `b` and `y`, and so on.\n\n```mermaid\ngraph TD\n    subgraph \"Input Processing\"\n        Input[\"Input LiteralMap\"] --\u003e |\"Collection inputs\"| Distribute[\"Distribute items to subtasks\"]\n        Input --\u003e |\"Scalar inputs\"| CopyToAll[\"Copy to all subtasks\"]\n        Input --\u003e |\"Bound collection inputs\"| CopyToAll\n        \n        Distribute --\u003e SubTask1[\"SubTask 1 inputs\"]\n        Distribute --\u003e SubTask2[\"SubTask 2 inputs\"]\n        Distribute --\u003e SubTaskN[\"SubTask n inputs\"]\n        \n        CopyToAll --\u003e SubTask1\n        CopyToAll --\u003e SubTask2\n        CopyToAll --\u003e SubTaskN\n    end\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/node_execution_context.go:15-50](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/node_execution_context.go), [flytepropeller/pkg/controller/nodes/array/handler.go:783-786](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Parallelism Control\n\nArray tasks offer flexible parallelism control through several mechanisms:\n\n### Parallelism Behaviors\n\nThese behaviors are controlled by the `DefaultParallelismBehavior` configuration:\n\n- **Hybrid** (`ParallelismBehaviorHybrid`): Uses exact parallelism specified by the array node\n- **Unlimited** (`ParallelismBehaviorUnlimited`): Maximum possible parallelism for nil/0 values\n- **Workflow** (`ParallelismBehaviorWorkflow`): Uses workflow-level parallelism for nil/0 values\n\n### Configuring Parallelism\n\nParallelism is determined through several factors:\n\n1. Node-specific parallelism (if specified in the `ArrayNode` definition)\n2. Workflow-level parallelism limit\n3. System-level configuration settings\n\nThe actual parallelism is calculated based on the behavior mode and the available parallelism in the workflow.\n\n```mermaid\nflowchart TD\n    Start[\"Determine parallelism\"] --\u003e HasNodeParallelism{\"Has node\\nparallelism?\"}\n    \n    HasNodeParallelism --\u003e|\"Yes\"| UseNodeParallelism[\"Use node parallelism\"]\n    HasNodeParallelism --\u003e|\"No\"| CheckBehavior{\"Check default\\nbehavior\"}\n    \n    CheckBehavior --\u003e|\"Hybrid\"| UseWorkflowParallelism[\"Use workflow parallelism\"]\n    CheckBehavior --\u003e|\"Unlimited\"| UseUnlimited[\"Use maximum available\"]\n    CheckBehavior --\u003e|\"Workflow\"| UseWorkflowParallelism\n    \n    UseNodeParallelism --\u003e EnforceLimit[\"Enforce workflow maximum\"]\n    UseWorkflowParallelism --\u003e EnforceLimit\n    UseUnlimited --\u003e EnforceLimit\n    \n    EnforceLimit --\u003e End[\"Execute with chosen parallelism\"]\n```\n\nSources: [flytepropeller/pkg/controller/config/config.go:330-347](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/config/config.go), [flytepropeller/pkg/controller/nodes/array/handler.go:302-359](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Success Criteria\n\nArray tasks provide two ways to define success criteria:\n\n1. **MinSuccesses**: Absolute number of subtasks that must succeed\n2. **MinSuccessRatio**: Fraction of subtasks that must succeed\n\nIf no success criteria are specified, all subtasks must succeed for the array task to be considered successful.\n\nThe system calculates whether successful completion is still possible:\n\n```mermaid\ngraph TD\n    Start[\"Evaluate array status\"] --\u003e Calculate[\"Calculate counts:\\n- Success count\\n- Failed count\\n- Running count\"]\n    \n    Calculate --\u003e CheckMinSuccesses{\"Can reach\\nminimum successes?\"}\n    \n    CheckMinSuccesses --\u003e|\"No\"| MarkFailing[\"Mark ArrayNode as failing\"]\n    CheckMinSuccesses --\u003e|\"Yes\"| CheckIfComplete{\"All tasks complete?\"}\n    \n    CheckIfComplete --\u003e|\"No\"| MarkExecuting[\"Continue executing\"]\n    CheckIfComplete --\u003e|\"Yes\"| CheckEnough{\"Enough successes?\"}\n    \n    CheckEnough --\u003e|\"Yes\"| MarkSucceeding[\"Mark ArrayNode as succeeding\"]\n    CheckEnough --\u003e|\"No\"| MarkFailing\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:437-472](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Execution Lifecycle\n\nThe array task goes through several phases during execution:\n\n1. **ArrayNodePhaseNone**: Initial state\n2. **ArrayNodePhaseExecuting**: Tasks are being executed\n3. **ArrayNodePhaseFailing**: Failure conditions have been met\n4. **ArrayNodePhaseSucceeding**: Success conditions have been met\n\n### State Management\n\nThe array handler maintains state for each subtask using compact bit arrays for efficiency:\n\n- **SubNodePhases**: Current phase of each subnode\n- **SubNodeTaskPhases**: Task execution phase of each subnode\n- **SubNodeRetryAttempts**: Number of retry attempts for each subnode\n- **SubNodeSystemFailures**: Number of system failures for each subnode\n- **SubNodeDeltaTimestamps**: Time difference from parent node start\n\n```mermaid\nstateDiagram-v2\n    [*] --\u003e ArrayNodePhaseNone\n    \n    ArrayNodePhaseNone --\u003e ArrayNodePhaseExecuting: Initialize state\n    \n    ArrayNodePhaseExecuting --\u003e ArrayNodePhaseExecuting: Process subtasks\n    ArrayNodePhaseExecuting --\u003e ArrayNodePhaseFailing: Not enough successes possible\n    ArrayNodePhaseExecuting --\u003e ArrayNodePhaseSucceeding: Min successes reached \u0026 all tasks done\n    \n    ArrayNodePhaseFailing --\u003e [*]: Report failure\n    \n    ArrayNodePhaseSucceeding --\u003e [*]: Gather outputs \u0026 report success\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:198-645](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Output Aggregation\n\nWhen an array task completes successfully, it gathers outputs from all subtasks and combines them into collections:\n\n1. For each output variable from the subtasks, a collection is created\n2. Each collection contains the corresponding output from each successful subtask\n3. For failed subtasks (when using MinSuccesses or MinSuccessRatio), nil values are used\n4. The output collections maintain the same order as the input collections\n\nThe combined outputs are then stored in the `outputs.pb` file in the node's output directory.\n\n```mermaid\ngraph TD\n    subgraph \"Output Aggregation\"\n        SubTask1[\"SubTask 1 Output\"] --\u003e |\"value1\"| OutputVar1[\"Collection for Output 1\"]\n        SubTask2[\"SubTask 2 Output\"] --\u003e |\"value2\"| OutputVar1\n        SubTask3[\"SubTask 3 Output\"] --\u003e |\"value3\"| OutputVar1\n        \n        SubTask1 --\u003e |\"result1\"| OutputVar2[\"Collection for Output 2\"]\n        SubTask2 --\u003e |\"result2\"| OutputVar2\n        SubTask3 --\u003e |\"result3\"| OutputVar2\n        \n        OutputVar1 --\u003e OutputLiteralMap[\"Combined Output LiteralMap\"]\n        OutputVar2 --\u003e OutputLiteralMap\n        \n        OutputLiteralMap --\u003e Store[\"Store in output.pb\"]\n    end\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:496-626](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)\n\n## Configuration\n\nArray tasks can be configured through several options in the Flyte configuration:\n\n| Configuration Option | Default | Description |\n|----------------------|---------|-------------|\n| `EventVersion` | 0 | Controls the event format for array nodes (0=legacy, 1=new) |\n| `DefaultParallelismBehavior` | `ParallelismBehaviorUnlimited` | Default behavior for handling parallelism |\n| `UseMapPluginLogs` | false | Use map plugin logs for subnode log links |\n| `MaxTaskPhaseVersionAttempts` | 3 | Maximum retries for handling task phase version conflicts |\n\nSources: [flytepropeller/pkg/controller/config/config.go:124-129](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/config/config.go)\n\n## Implementation Architecture\n\nThe array task execution is handled by the `arrayNodeHandler` which implements the `interfaces.NodeHandler` interface:\n\n```mermaid\nclassDiagram\n    class NodeHandler {\n        \u003c\u003cinterface\u003e\u003e\n        +Handle(context.Context, NodeExecutionContext) (Transition, error)\n        +Abort(context.Context, NodeExecutionContext, string) error\n        +Finalize(context.Context, NodeExecutionContext) error\n        +FinalizeRequired() bool\n        +Setup(context.Context, SetupContext) error\n    }\n    \n    class arrayNodeHandler {\n        -eventConfig *config.EventConfig\n        -literalOffloadingConfig config.LiteralOffloadingConfig\n        -gatherOutputsRequestChannel chan *gatherOutputsRequest\n        -metrics metrics\n        -nodeExecutionRequestChannel chan *nodeExecutionRequest\n        -nodeExecutor interfaces.Node\n        -pluginStateBytesNotStarted []byte\n        -pluginStateBytesStarted []byte\n        +Handle(context.Context, NodeExecutionContext) (Transition, error)\n        +Abort(context.Context, NodeExecutionContext, string) error\n        +Finalize(context.Context, NodeExecutionContext) error\n        +FinalizeRequired() bool\n        +Setup(context.Context, SetupContext) error\n    }\n    \n    NodeHandler \u003c|-- arrayNodeHandler\n```\n\nThe handler uses worker pools to process subtask executions and gather outputs in parallel:\n\n```mermaid\ngraph TD\n    subgraph \"Worker Architecture\"\n        ArrayHandler[\"arrayNodeHandler\"] --\u003e |\"create\"| Workers[\"Worker Pool\\n(NodeExecutionWorkerCount)\"]\n        \n        Workers --\u003e |\"process\"| NodeExecChannel[\"nodeExecutionRequestChannel\"]\n        Workers --\u003e |\"process\"| GatherOutputsChannel[\"gatherOutputsRequestChannel\"]\n        \n        NodeExecChannel --\u003e |\"send requests\"| NodeExec[\"Node Execution Requests\"]\n        GatherOutputsChannel --\u003e |\"send requests\"| OutputGather[\"Output Gathering Requests\"]\n        \n        NodeExec --\u003e |\"results\"| ResponseChannel[\"Response Channels\"]\n        OutputGather --\u003e |\"results\"| ResponseChannel\n    end\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:54-764](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go), [flytepropeller/pkg/controller/config/config.go:181-183](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/config/config.go)\n\n## Special Handling\n\n### Literal Offloading\n\nFor large output collections, the array handler supports offloading literals to external storage when they exceed a configured size threshold. This prevents overloading the Kubernetes data store with large outputs:\n\n```mermaid\nflowchart TD\n    Start[\"Process output collection\"] --\u003e CheckSize{\"Is output size \u003e threshold?\"}\n    \n    CheckSize --\u003e|\"Yes\"| Offload[\"Offload to blob storage\"]\n    CheckSize --\u003e|\"No\"| StoreInline[\"Store inline\"]\n    \n    Offload --\u003e UpdateLiteral[\"Update literal with reference\"]\n    StoreInline --\u003e UpdateLiteral\n    \n    UpdateLiteral --\u003e Save[\"Save to outputs.pb\"]\n```\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:608-618](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go), [flytepropeller/pkg/controller/config/config.go:186-193](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/config/config.go)\n\n## Error Handling\n\nArray tasks provide robust error handling mechanisms:\n\n1. **Retries**: Individual subtasks can be retried based on retry configuration\n2. **Partial Success**: Array tasks can succeed even with some failed subtasks (using MinSuccesses or MinSuccessRatio)\n3. **Error Aggregation**: Error messages from failed subtasks are aggregated for easy diagnosis\n\nWhen an array task fails, the aggregated error message includes information about which subtasks failed and why.\n\nSources: [flytepropeller/pkg/controller/nodes/array/handler.go:362-426](https://github.com/flyteorg/flyte/flytepropeller/pkg/controller/nodes/array/handler.go)"])</script><script>self.__next_f.push([1,"22:T44f0,"])</script><script>self.__next_f.push([1,"# Plugin System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteplugins/go/tasks/config_load_test.go](flyteplugins/go/tasks/config_load_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_cache.go](flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_cache.go)\n- [flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_client.go](flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_client.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/testdata/config.yaml](flyteplugins/go/tasks/pluginmachinery/flytek8s/testdata/config.yaml)\n- [flyteplugins/go/tasks/plugins/array/k8s/integration_test.go](flyteplugins/go/tasks/plugins/array/k8s/integration_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/container_test.go](flyteplugins/go/tasks/plugins/k8s/pod/container_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go](flyteplugins/go/tasks/plugins/k8s/pod/plugin.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/sidecar_test.go](flyteplugins/go/tasks/plugins/k8s/pod/sidecar_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go](flyteplugins/go/tasks/plugins/k8s/spark/spark.go)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark_test.go](flyteplugins/go/tasks/plugins/k8s/spark/spark_test.go)\n- [flyteplugins/go/tasks/testdata/config.yaml](flyteplugins/go/tasks/testdata/config.yaml)\n- [flytepropeller/pkg/controller/nodes/task/backoff/controller.go](flytepropeller/pkg/controller/nodes/task/backoff/controller.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go](flytepropeller/pkg/controller/nodes/task/backoff/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config.go](flytepropeller/pkg/controller/nodes/task/config/config.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags.go](flytepropeller/pkg/controller/nodes/task/config/config_flags.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go](flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go](flytepropeller/pkg/controller/nodes/task/plugin_config.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config_test.go](flytepropeller/pkg/controller/nodes/task/plugin_config_test.go)\n\n\u003c/details\u003e\n\n\n\nThe Flyte Plugin System provides an extensible architecture for executing tasks on various backends, primarily focusing on Kubernetes-based execution environments. This page documents how plugins are structured, registered, and how they manage the task execution lifecycle within Flyte's architecture.\n\n## Architecture Overview\n\nThe plugin system acts as the bridge between Flyte's workflow execution engine (FlytePropeller) and the underlying execution platform (primarily Kubernetes). It allows Flyte to support diverse task types and execution environments through a standardized interface.\n\n```mermaid\ngraph TD\n    subgraph \"FlytePropeller Control Flow\"\n        TE[\"TaskExecutor\"] --\u003e PM[\"PluginManager\"]\n    end\n    \n    subgraph \"Plugin System\"\n        PM --\u003e KPI[\"k8s.Plugin Interface\"]\n        PM --\u003e BAI[\"PluginAbortOverride Interface\"]\n        KPI --\u003e PP[\"Pod Plugin\"]\n        KPI --\u003e SP[\"Spark Plugin\"]\n        KPI --\u003e OP[\"Other Plugins...\"]\n    end\n    \n    subgraph \"Kubernetes Resources\"\n        PP --\u003e Pod[\"Pod Resources\"]\n        SP --\u003e SparkApp[\"SparkApplication CRD\"]\n        OP --\u003e OtherRes[\"Other K8s Resources\"]\n    end\n    \n    PM --\u003e KC[\"KubeClient\"]\n    KC --\u003e K8S[\"Kubernetes API\"]\n    K8S --\u003e Pod\n    K8S --\u003e SparkApp\n    K8S --\u003e OtherRes\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go]()\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go]()\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go]()\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go]()\n\n## Plugin Interfaces\n\nThe core of the plugin system is the `k8s.Plugin` interface, which all Kubernetes-based plugins must implement:\n\n```go\ntype Plugin interface {\n    GetProperties() PluginProperties\n    BuildResource(ctx context.Context, taskCtx core.TaskExecutionContext) (client.Object, error)\n    BuildIdentityResource(ctx context.Context, taskCtx core.TaskExecutionMetadata) (client.Object, error)\n    GetTaskPhase(ctx context.Context, pluginContext PluginContext, resource client.Object) (core.PhaseInfo, error)\n}\n```\n\nSome plugins may also implement the optional `PluginAbortOverride` interface to customize abort behavior:\n\n```go\ntype PluginAbortOverride interface {\n    OnAbort(ctx context.Context, tCtx core.TaskExecutionContext, resource client.Object) (AbortBehavior, error)\n}\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:105-129]()\n\n## Plugin Manager\n\nThe `PluginManager` is the central orchestrator of the plugin system, managing the lifecycle of Kubernetes resources created by plugins:\n\n```go\ntype PluginManager struct {\n    id string\n    plugin k8s.Plugin\n    resourceToWatch runtime.Object\n    kubeClient pluginsCore.KubeClient\n    metrics PluginMetrics\n    backOffController *backoff.Controller\n    resourceLevelMonitor *ResourceMonitorIndex\n    eventWatcher EventWatcher\n    updateBaseBackoffDuration int\n    updateBackoffRetries int\n}\n```\n\nThe manager implements several key methods:\n\n| Method | Description |\n|--------|-------------|\n| `Handle` | Core execution method that creates resources and monitors status |\n| `Abort` | Handles task abortion (cancellation) |\n| `Finalize` | Performs cleanup after task completion |\n| `GetProperties` | Returns plugin properties |\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-111]()\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-408]()\n\n## Plugin Execution Flow\n\nThe execution of a task through the plugin system follows a defined sequence:\n\n```mermaid\nsequenceDiagram\n    participant TE as \"TaskExecutor\"\n    participant PM as \"PluginManager\"\n    participant PSR as \"PluginStateReader\"\n    participant P as \"Plugin\"\n    participant K8s as \"Kubernetes API\"\n    participant PSW as \"PluginStateWriter\"\n    \n    TE-\u003e\u003ePM: Handle(TaskContext)\n    PM-\u003e\u003ePSR: Get(PluginState)\n    PSR--\u003e\u003ePM: PluginState\n    \n    alt Phase == PluginPhaseNotStarted\n        PM-\u003e\u003eP: BuildResource(TaskContext)\n        P--\u003e\u003ePM: K8s Resource\n        PM-\u003e\u003eK8s: Create Resource\n        K8s--\u003e\u003ePM: Created\n        PM-\u003e\u003ePSW: Put(PluginPhaseStarted)\n    else Phase == PluginPhaseStarted\n        PM-\u003e\u003eP: BuildIdentityResource(TaskContext)\n        P--\u003e\u003ePM: Resource Identity\n        PM-\u003e\u003eK8s: Get Resource Status\n        K8s--\u003e\u003ePM: Resource Status\n        PM-\u003e\u003eP: GetTaskPhase(Resource)\n        P--\u003e\u003ePM: PhaseInfo\n        PM-\u003e\u003ePSW: Put(Updated State)\n    end\n    \n    PM--\u003e\u003eTE: Phase Transition\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-408]()\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260]()\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:272-330]()\n\n## Plugin State\n\nThe plugin system maintains state through the `PluginState` structure:\n\n```go\ntype PluginState struct {\n    Phase PluginPhase\n    K8sPluginState k8s.PluginState\n    LastEventUpdate time.Time\n}\n```\n\nThe `PluginPhase` can be one of:\n- `PluginPhaseNotStarted`: Initial state\n- `PluginPhaseAllocationTokenAcquired`: Token acquired for resource allocation\n- `PluginPhaseStarted`: Resource creation initiated\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:54-66]()\n\n## Built-in Plugins\n\n### Pod Plugin\n\nThe Pod plugin is the core plugin for container execution, handling both container and pod tasks:\n\n```go\ntype plugin struct {}\n\nfunc (plugin) BuildIdentityResource(_ context.Context, _ pluginsCore.TaskExecutionMetadata) (client.Object, error) {\n    return flytek8s.BuildIdentityPod(), nil\n}\n\nfunc (p plugin) BuildResource(ctx context.Context, taskCtx pluginsCore.TaskExecutionContext) (client.Object, error) {\n    // Build a pod resource based on the task template\n}\n\nfunc (p plugin) GetTaskPhase(ctx context.Context, pluginContext k8s.PluginContext, r client.Object) (pluginsCore.PhaseInfo, error) {\n    // Determine the task phase based on the pod status\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:39-147]()\n\n### Spark Plugin\n\nThe Spark plugin executes Apache Spark applications on Kubernetes using the Spark Operator:\n\n```go\ntype sparkResourceHandler struct {}\n\nfunc (sparkResourceHandler) BuildResource(ctx context.Context, taskCtx pluginsCore.TaskExecutionContext) (client.Object, error) {\n    // Parse the SparkJob custom structure from task template\n    // Create spark config and driver/executor specs\n    // Build a SparkApplication custom resource\n}\n\nfunc (sparkResourceHandler) GetTaskPhase(ctx context.Context, pluginContext k8s.PluginContext, resource client.Object) (pluginsCore.PhaseInfo, error) {\n    // Determine the task phase based on the SparkApplication status\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-554]()\n\n## Resource Management\n\n### K8s Resource Creation\n\nThe plugin system provides utilities to build and customize Kubernetes resources:\n\n```mermaid\ngraph TD\n    subgraph \"Pod Creation Flow\"\n        ToK8sPodSpec[\"ToK8sPodSpec\"] --\u003e BuildRawPod[\"BuildRawPod\"]\n        ToK8sPodSpec --\u003e ApplyFlytePodConfiguration[\"ApplyFlytePodConfiguration\"]\n        ApplyFlytePodConfiguration --\u003e AddFlyteCustomizationsToContainer[\"AddFlyteCustomizationsToContainer\"]\n        AddFlyteCustomizationsToContainer --\u003e ApplyResourceOverrides[\"ApplyResourceOverrides\"]\n    end\n    \n    subgraph \"Resource Handling\"\n        ApplyResourceOverrides --\u003e AdjustOrDefaultResource[\"AdjustOrDefaultResource\"]\n        AdjustOrDefaultResource --\u003e EnsureResourceRange[\"ensureResourceRange\"]\n    end\n    \n    subgraph \"Extended Resources\"\n        ApplyFlytePodConfiguration --\u003e ApplyGPUNodeSelectors[\"ApplyGPUNodeSelectors\"]\n        ApplyFlytePodConfiguration --\u003e ApplySharedMemory[\"ApplySharedMemory\"]\n    end\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:325-626]()\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go:44-190]()\n\n### Resource Configuration\n\nResource requirements and limits can be configured at multiple levels:\n\n| Configuration Level | Setting | Source |\n|---------------------|---------|--------|\n| Default | `DefaultCPURequest`, `DefaultMemoryRequest` | [flytek8s/config/config.go:102-104]() |\n| GPU | `GpuResourceName`, `GpuDeviceNodeLabel` | [flytek8s/config/config.go:171-183]() |\n| Node Selection | `DefaultNodeSelector`, `InterruptibleNodeSelector` | [flytek8s/config/config.go:109-126]() |\n| Tolerations | `DefaultTolerations`, `InterruptibleTolerations` | [flytek8s/config/config.go:108-122]() |\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go:80-217]()\n\n### Backoff System\n\nThe plugin system includes a sophisticated backoff mechanism for handling resource constraints:\n\n```go\ntype ComputeResourceAwareBackOffHandler struct {\n    *SimpleBackOffBlocker\n    *ComputeResourceCeilings\n}\n```\n\nWhen resources are constrained, the system implements exponential backoff to prevent overwhelming the cluster:\n\n```go\nfunc (h *ComputeResourceAwareBackOffHandler) Handle(ctx context.Context, operation func() error, requestedResourceList v1.ResourceList) error {\n    // Determine if the operation should proceed based on resource availability\n    // Track resource ceilings to avoid scheduling tasks that exceed available resources\n    // Implement exponential backoff when resources are constrained\n}\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go:111-192]()\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260]()\n\n## Plugin Registration and Configuration\n\n### Plugin Registration\n\nPlugins are registered with the system during initialization:\n\n```go\nfunc init() {\n    pluginmachinery.PluginRegistry().RegisterK8sPlugin(\n        k8s.PluginEntry{\n            ID: \"spark\",\n            RegisteredTaskTypes: []pluginsCore.TaskType{\"spark\"},\n            ResourceToWatch: \u0026sparkOp.SparkApplication{},\n            Plugin: sparkResourceHandler{},\n            IsDefault: false,\n        })\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:557-570]()\n\n### Configuration\n\nThe `K8sPluginConfig` controls default behavior for all Kubernetes plugins:\n\n```go\ntype K8sPluginConfig struct {\n    InjectFinalizer bool\n    DefaultAnnotations map[string]string\n    DefaultLabels map[string]string\n    DefaultEnvVars map[string]string\n    DefaultCPURequest resource.Quantity\n    DefaultMemoryRequest resource.Quantity\n    SchedulerName string\n    // ... many more fields\n}\n```\n\nThis configuration can be set via YAML:\n\n```yaml\nplugins:\n  k8s:\n    inject-finalizer: true\n    default-annotations:\n      cluster-autoscaler.kubernetes.io/safe-to-evict: \"false\"\n    default-cpus: 1000m\n    default-memory: 1024Mi\n    scheduler-name: flyte-scheduler\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go:80-217]()\n- [flyteplugins/go/tasks/testdata/config.yaml:1-20]()\n\n## Creating Custom Plugins\n\nTo create a custom plugin for a new task type or execution backend:\n\n1. Implement the `k8s.Plugin` interface\n2. Define a custom resource type or use existing Kubernetes resources\n3. Register your plugin with the system during initialization\n\nExample skeleton for a custom plugin:\n\n```go\n// 1. Define your plugin\ntype MyPlugin struct {}\n\nfunc (MyPlugin) GetProperties() k8s.PluginProperties { ... }\nfunc (MyPlugin) BuildResource(ctx context.Context, taskCtx pluginsCore.TaskExecutionContext) (client.Object, error) { ... }\nfunc (MyPlugin) BuildIdentityResource(ctx context.Context, taskCtx pluginsCore.TaskExecutionMetadata) (client.Object, error) { ... }\nfunc (MyPlugin) GetTaskPhase(ctx context.Context, pluginContext k8s.PluginContext, resource client.Object) (pluginsCore.PhaseInfo, error) { ... }\n\n// 2. Register your plugin\nfunc init() {\n    pluginmachinery.PluginRegistry().RegisterK8sPlugin(\n        k8s.PluginEntry{\n            ID: \"my-plugin\",\n            RegisteredTaskTypes: []pluginsCore.TaskType{\"my-task-type\"},\n            ResourceToWatch: \u0026MyResource{},\n            Plugin: MyPlugin{},\n            IsDefault: false,\n        })\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-70]()\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:557-570]()\n\n## Enabling and Configuring Plugins\n\nPlugins can be selectively enabled through the task configuration:\n\n```go\nfunc WranglePluginsAndGenerateFinalList(ctx context.Context, cfg *config.TaskPluginConfig, pr PluginRegistryIface,\n    kubeClientset kubernetes.Interface) (enabledPlugins []core.PluginEntry, defaultForTaskTypes map[pluginID][]taskType, err error) {\n    \n    // Load plugin configuration\n    pluginsConfigMeta, err := cfg.GetEnabledPlugins()\n    \n    // Determine which plugins to enable\n    allPluginsEnabled := pluginsConfigMeta.EnabledPlugins.Len() == 0\n    \n    // Create controllers and register plugins\n    backOffController := backoff.NewController(ctx)\n    monitorIndex := k8s.NewResourceMonitorIndex()\n    \n    // ... enable and configure plugins\n}\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-73]()\n\nThis plugin system architecture enables Flyte to execute tasks on various backends while maintaining a consistent execution model and providing robust resource management capabilities."])</script><script>self.__next_f.push([1,"23:T5b5f,"])</script><script>self.__next_f.push([1,"# Kubernetes Plugin Machinery\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteplugins/go/tasks/config_load_test.go](flyteplugins/go/tasks/config_load_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_cache.go](flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_cache.go)\n- [flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_client.go](flyteplugins/go/tasks/pluginmachinery/core/mocks/fake_k8s_client.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/k8spluginconfig_flags_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/k8s_resource_adds_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper_test.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper_test.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/testdata/config.yaml](flyteplugins/go/tasks/pluginmachinery/flytek8s/testdata/config.yaml)\n- [flyteplugins/go/tasks/plugins/array/k8s/integration_test.go](flyteplugins/go/tasks/plugins/array/k8s/integration_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/container_test.go](flyteplugins/go/tasks/plugins/k8s/pod/container_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go](flyteplugins/go/tasks/plugins/k8s/pod/plugin.go)\n- [flyteplugins/go/tasks/plugins/k8s/pod/sidecar_test.go](flyteplugins/go/tasks/plugins/k8s/pod/sidecar_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go](flyteplugins/go/tasks/plugins/k8s/spark/spark.go)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark_test.go](flyteplugins/go/tasks/plugins/k8s/spark/spark_test.go)\n- [flyteplugins/go/tasks/testdata/config.yaml](flyteplugins/go/tasks/testdata/config.yaml)\n- [flytepropeller/pkg/controller/nodes/task/backoff/controller.go](flytepropeller/pkg/controller/nodes/task/backoff/controller.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go](flytepropeller/pkg/controller/nodes/task/backoff/handler.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_map.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go](flytepropeller/pkg/controller/nodes/task/backoff/handler_test.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist.go)\n- [flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go](flytepropeller/pkg/controller/nodes/task/backoff/safe_resourcelist_test.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config.go](flytepropeller/pkg/controller/nodes/task/config/config.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags.go](flytepropeller/pkg/controller/nodes/task/config/config_flags.go)\n- [flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go](flytepropeller/pkg/controller/nodes/task/config/config_flags_test.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager_test.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go](flytepropeller/pkg/controller/nodes/task/plugin_config.go)\n- [flytepropeller/pkg/controller/nodes/task/plugin_config_test.go](flytepropeller/pkg/controller/nodes/task/plugin_config_test.go)\n\n\u003c/details\u003e\n\n\n\nThis page documents the Kubernetes Plugin Machinery in Flyte, which provides the framework for converting Flyte tasks to Kubernetes resources, managing their lifecycle, monitoring execution status, and handling resource customization. This is a core component that enables Flyte to execute tasks on Kubernetes clusters.\n\n## Overview\n\nThe Kubernetes Plugin Machinery is responsible for translating logical Flyte task definitions into physical Kubernetes resources and managing their execution. It provides a standardized approach for creating, monitoring, and cleaning up these resources, with support for various resource types beyond basic Pods (such as Spark applications, MPI jobs, etc.).\n\n```mermaid\ngraph TD\n    subgraph \"Flyte System\"\n        FlytePropeller[\"FlytePropeller\u003cbr\u003eWorkflow Executor\"]\n        PluginRegistry[\"Plugin Registry\"]\n        TaskExecutor[\"Task Executor\"]\n    end\n    \n    subgraph \"K8s Plugin Machinery\"\n        PluginManager[\"PluginManager\"]\n        K8sPlugins[\"K8s Plugins\u003cbr\u003e(Pod, Spark, etc.)\"]\n        ResourceHandler[\"Resource Handlers\"]\n        BackoffController[\"BackoffController\"]\n    end\n    \n    subgraph \"Kubernetes\"\n        K8sAPI[\"Kubernetes API\"]\n        Pods[\"Pods\"]\n        CRDs[\"Custom Resources\u003cbr\u003e(Spark, PyTorch, etc.)\"]\n    end\n    \n    FlytePropeller --\u003e|\"executes task\"| TaskExecutor\n    TaskExecutor --\u003e|\"selects plugin\"| PluginRegistry\n    PluginRegistry --\u003e|\"provides\"| PluginManager\n    PluginManager --\u003e|\"manages\"| K8sPlugins\n    K8sPlugins --\u003e|\"build resources\"| ResourceHandler\n    ResourceHandler --\u003e|\"create/monitor\"| K8sAPI\n    PluginManager --\u003e|\"handles retries\"| BackoffController\n    K8sAPI --\u003e|\"creates\"| Pods\n    K8sAPI --\u003e|\"creates\"| CRDs\n    K8sAPI --\u003e|\"status\"| PluginManager\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-111](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-111)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:26-40](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:26-40)\n\n## Core Components\n\n### Plugin Manager\n\nThe `PluginManager` is the central component responsible for orchestrating the lifecycle of Kubernetes resources. It handles task execution, monitoring, and cleanup, providing a consistent interface between Flyte and Kubernetes.\n\n```mermaid\nclassDiagram\n    class PluginManager {\n        +id string\n        +plugin k8s.Plugin\n        +resourceToWatch runtime.Object\n        +kubeClient pluginsCore.KubeClient\n        +metrics PluginMetrics\n        +backOffController *backoff.Controller\n        +resourceLevelMonitor *ResourceMonitorIndex\n        +eventWatcher EventWatcher\n        +Handle(ctx, tCtx) Transition\n        +Abort(ctx, tCtx) error\n        +Finalize(ctx, tCtx) error\n        +GetProperties() PluginProperties\n        +GetID() string\n    }\n```\n\nKey methods:\n- `Handle`: Main entry point for task execution\n- `Abort`: Handles task abortion\n- `Finalize`: Cleans up resources after execution\n- `launchResource`: Creates the Kubernetes resource\n- `checkResourcePhase`: Interprets resource state as task phase\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-111](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:99-111)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:132-142](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:132-142)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407)\n\n### Plugin Interface\n\nAll Kubernetes plugins must implement the `k8s.Plugin` interface, which defines how to create resources from tasks and interpret their execution status.\n\n```mermaid\nclassDiagram\n    class Plugin {\n        +GetProperties() PluginProperties\n        +BuildResource(ctx, taskCtx) client.Object\n        +BuildIdentityResource(ctx, meta) client.Object\n        +GetTaskPhase(ctx, pluginCtx, resource) PhaseInfo\n    }\n```\n\nKey methods:\n- `GetProperties`: Returns plugin configuration properties\n- `BuildResource`: Creates a full Kubernetes resource from a task\n- `BuildIdentityResource`: Creates a minimal resource for lookups\n- `GetTaskPhase`: Determines task execution phase from resource state\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:39-41](flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:39-41)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-57](flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-57)\n\n### Configuration System\n\nThe configuration system defined in `K8sPluginConfig` provides a rich set of options for customizing how resources are created and managed.\n\n```mermaid\nclassDiagram\n    class K8sPluginConfig {\n        +InjectFinalizer bool\n        +DefaultAnnotations map[string]string\n        +DefaultLabels map[string]string\n        +DefaultEnvVars map[string]string\n        +DefaultCPURequest resource.Quantity\n        +DefaultMemoryRequest resource.Quantity\n        +DefaultTolerations []v1.Toleration\n        +DefaultNodeSelector map[string]string\n        +DefaultAffinity *v1.Affinity\n        +SchedulerName string\n        +InterruptibleTolerations []v1.Toleration\n        +InterruptibleNodeSelector map[string]string\n        +ResourceTolerations map[ResourceName][]Toleration\n        +GpuResourceName v1.ResourceName\n        +PodPendingTimeout config2.Duration\n        +ImagePullBackoffGracePeriod config2.Duration\n    }\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go:80-255](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go:80-255)\n\n## Execution Workflow\n\nThe execution workflow shows how a Flyte task is transformed into a Kubernetes resource and monitored through completion.\n\n```mermaid\nsequenceDiagram\n    participant Propeller as FlytePropeller\n    participant Manager as PluginManager\n    participant Plugin as Plugin\n    participant K8s as Kubernetes API\n    participant Resource as K8s Resource\n    \n    Propeller-\u003e\u003eManager: Handle(taskCtx)\n    \n    alt Not Started Yet\n        Manager-\u003e\u003ePlugin: BuildResource(taskCtx)\n        Plugin--\u003e\u003eManager: K8s Resource Spec\n        Manager-\u003e\u003eK8s: Create Resource\n        \n        alt Resource Creation Error\n            K8s--\u003e\u003eManager: Error (quota/config)\n            Manager-\u003e\u003eManager: Handle BackOff\n            Manager--\u003e\u003ePropeller: PhaseInfo (Queued/Failed)\n        else Resource Created\n            K8s--\u003e\u003eManager: Resource Created\n            Manager--\u003e\u003ePropeller: PhaseInfo (Queued)\n        end\n        \n    else Already Started\n        Manager-\u003e\u003ePlugin: BuildIdentityResource(meta)\n        Plugin--\u003e\u003eManager: Identity Resource\n        Manager-\u003e\u003eK8s: Get Resource\n        K8s--\u003e\u003eManager: Current Resource State\n        Manager-\u003e\u003ePlugin: GetTaskPhase(resource)\n        Plugin--\u003e\u003eManager: PhaseInfo\n        Manager--\u003e\u003ePropeller: Transition\n    end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:332-407)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:272-330](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:272-330)\n\n## Resource Customization\n\nOne of the key features of the Kubernetes Plugin Machinery is its ability to customize Kubernetes resources with Flyte-specific configurations.\n\n### Pod Helper Functions\n\nThe `flytek8s` package provides a rich set of functions for customizing Kubernetes pods:\n\n```mermaid\ngraph TD\n    TaskTemplate[\"TaskTemplate\"] --\u003e|\"convert\"| RawPod[\"Raw Pod Spec\"]\n    RawPod --\u003e|\"customize\"| FlyteAnnotations[\"Add Flyte Annotations/Labels\"]\n    FlyteAnnotations --\u003e|\"add\"| ResourceRequirements[\"Apply Resource Requirements\"]\n    ResourceRequirements --\u003e|\"configure\"| NodeSelectors[\"Add Node Selectors\"]\n    NodeSelectors --\u003e|\"add\"| Tolerations[\"Add Tolerations\"]\n    Tolerations --\u003e|\"add\"| ExtendedResources[\"Handle Extended Resources (GPU)\"]\n    ExtendedResources --\u003e|\"merge with\"| PodTemplate[\"Merge with Pod Template\"]\n    PodTemplate --\u003e|\"finalize\"| FinalPod[\"Final Pod Spec\"]\n```\n\nKey customization functions:\n- `ToK8sPodSpec`: Main entry point for pod customization\n- `BuildRawPod`: Creates basic pod spec from task template\n- `ApplyFlytePodConfiguration`: Applies Flyte-specific configurations\n- `UpdatePod`: Updates pod with default configurations\n- `ApplyInterruptibleNodeAffinity`: Handles interruptible task scheduling\n- `ApplyGPUNodeSelectors`: Configures GPU-specific node selection\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:608-626](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:608-626)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:425-532](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:425-532)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:283-315](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:283-315)\n\n### Resource Requirements\n\nThe machinery provides sophisticated handling of resource requirements:\n\n```mermaid\nflowchart TD\n    Resources[\"Container Resources\"] --\u003e|\"customize\"| EnsureRequests[\"Ensure Required Resources\"]\n    EnsureRequests --\u003e|\"validate\"| CheckLimits[\"Check Against Limits\"]\n    CheckLimits --\u003e|\"adjust if needed\"| ValidResources[\"Valid Resource Requirements\"]\n    \n    subgraph \"Resource Processing\"\n        HandleCPU[\"Handle CPU Resources\"]\n        HandleMemory[\"Handle Memory Resources\"]\n        HandleGPU[\"Handle GPU Resources\"]\n        HandleStorage[\"Handle Storage Resources\"]\n    end\n    \n    ValidResources --\u003e HandleCPU\n    ValidResources --\u003e HandleMemory\n    ValidResources --\u003e HandleGPU\n    ValidResources --\u003e HandleStorage\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go:71-113](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go:71-113)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go:150-190](flyteplugins/go/tasks/pluginmachinery/flytek8s/container_helper.go:150-190)\n\n### Extended Resources: GPU Support\n\nThe system has special handling for GPU resources, including device selection and partition sizes:\n\n```mermaid\nflowchart TD\n    Task[\"Task with GPU Request\"] --\u003e|\"requires GPU\"| ApplyGPU[\"ApplyGPUNodeSelectors\"]\n    ApplyGPU --\u003e|\"determine\"| Device[\"Set GPU Device Type\"]\n    Device --\u003e|\"check for\"| Partitioning[\"GPU Partitioning\"]\n    \n    Partitioning --\u003e|\"unpartitioned\"| UnpartitionedConfig[\"Configure for Unpartitioned GPU\"]\n    Partitioning --\u003e|\"partitioned\"| PartitionedConfig[\"Configure for Specific Partition Size\"]\n    \n    UnpartitionedConfig --\u003e|\"add\"| NodeSelectors[\"Add NodeSelectorRequirements\"]\n    PartitionedConfig --\u003e|\"add\"| NodeSelectors\n    \n    NodeSelectors --\u003e|\"add\"| Tolerations[\"Add GPU Tolerations\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:199-281](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:199-281)\n\n### Pod Templates\n\nThe machinery supports pod templates for consistent pod configurations:\n\n```mermaid\nflowchart TD\n    BasePodSpec[\"Base Pod Spec\"] --\u003e|\"merge with\"| PodTemplate[\"Pod Template\"]\n    PodTemplate --\u003e|\"apply\"| DefaultContainer[\"Default Container Template\"]\n    PodTemplate --\u003e|\"apply\"| PrimaryContainer[\"Primary Container Template\"]\n    PodTemplate --\u003e|\"apply\"| NamedContainers[\"Named Container Templates\"]\n    \n    DefaultContainer \u0026 PrimaryContainer \u0026 NamedContainers --\u003e|\"combine\"| MergedPodSpec[\"Merged Pod Spec\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:665-690](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:665-690)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:695-836](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go:695-836)\n\n## BackOff Handling and Resource Management\n\nThe Kubernetes Plugin Machinery includes sophisticated backoff handling for resource quota management.\n\n### BackOff Controller\n\nThe `BackOffController` manages backoff strategies for resource creation:\n\n```mermaid\nclassDiagram\n    class Controller {\n        +Clock clock.Clock\n        +backOffHandlerMap HandlerMap\n        +GetOrCreateHandler(ctx, key, backOffBaseSecond, maxBackOffDuration) *ComputeResourceAwareBackOffHandler\n    }\n    \n    class ComputeResourceAwareBackOffHandler {\n        +SimpleBackOffBlocker *SimpleBackOffBlocker\n        +ComputeResourceCeilings *ComputeResourceCeilings\n        +IsActive() bool\n        +reset()\n        +Handle(ctx, operation, requestedResourceList) error\n    }\n    \n    class SimpleBackOffBlocker {\n        +Clock clock.Clock\n        +BackOffBaseSecond int\n        +MaxBackOffDuration time.Duration\n        +BackOffExponent Uint32\n        +NextEligibleTime AtomicTime\n        +isBlocking(t) bool\n        +getBlockExpirationTime() time\n        +reset()\n        +backOff(ctx) time.Duration\n    }\n    \n    class ComputeResourceCeilings {\n        +computeResourceCeilings *SyncResourceList\n        +isEligible(requestedResourceList) bool\n        +update(reqResource, reqQuantity)\n        +updateAll(resources)\n        +reset(resource)\n        +resetAll()\n    }\n    \n    Controller --\u003e ComputeResourceAwareBackOffHandler\n    ComputeResourceAwareBackOffHandler --\u003e SimpleBackOffBlocker\n    ComputeResourceAwareBackOffHandler --\u003e ComputeResourceCeilings\n```\n\nThe backoff system provides:\n- Exponential backoff for transient errors\n- Resource ceiling tracking to avoid futile retries\n- Efficient management of cluster resources\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go:26-193](flytepropeller/pkg/controller/nodes/task/backoff/handler.go:26-193)\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260)\n\n### Resource Creation with BackOff\n\nThe resource creation process integrates with the backoff controller:\n\n```mermaid\nflowchart TD\n    Start[\"Start Resource Creation\"] --\u003e|\"attempt\"| CreateResource[\"Create K8s Resource\"]\n    CreateResource --\u003e|\"success\"| Success[\"Resource Created\"]\n    CreateResource --\u003e|\"error\"| ErrorType{\"Error Type\"}\n    \n    ErrorType --\u003e|\"quota exceeded\"| ResourceQuota[\"Resource Quota Error\"]\n    ErrorType --\u003e|\"other error\"| OtherError[\"Handle Other Error\"]\n    \n    ResourceQuota --\u003e|\"update\"| ResourceCeiling[\"Update Resource Ceiling\"]\n    ResourceCeiling --\u003e|\"calculate\"| BackOff[\"Calculate BackOff Duration\"]\n    BackOff --\u003e|\"retry later\"| RetryLater[\"Retry When Eligible\"]\n    \n    OtherError --\u003e|\"check\"| Retryable{\"Retryable?\"}\n    Retryable --\u003e|\"yes\"| SystemRetry[\"System Retryable Failure\"]\n    Retryable --\u003e|\"no\"| Failure[\"Task Failure\"]\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go:195-260)\n- [flytepropeller/pkg/controller/nodes/task/backoff/handler.go:128-193](flytepropeller/pkg/controller/nodes/task/backoff/handler.go:128-193)\n\n## Plugin Examples\n\nThe Kubernetes Plugin Machinery supports various plugins for different resource types.\n\n### Pod Plugin\n\nThe Pod Plugin is the most basic plugin, creating standard Kubernetes pods:\n\n```mermaid\nclassDiagram\n    class plugin {\n        +BuildIdentityResource(ctx, meta) client.Object\n        +BuildResource(ctx, taskCtx) client.Object\n        +GetTaskPhase(ctx, pluginCtx, r) PhaseInfo\n        +GetTaskPhaseWithLogs(ctx, pluginCtx, r, logPlugin, logSuffix, extraLogTemplateVars) PhaseInfo\n    }\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:39-41](flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:39-41)\n- [flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:44-138](flyteplugins/go/tasks/plugins/k8s/pod/plugin.go:44-138)\n\n### Spark Plugin\n\nThe Spark Plugin demonstrates a more complex plugin for SparkApplication custom resources:\n\n```mermaid\nclassDiagram\n    class sparkResourceHandler {\n        +GetProperties() k8s.PluginProperties\n        +BuildResource(ctx, taskCtx) client.Object\n        +BuildIdentityResource(ctx, meta) client.Object\n        +GetTaskPhase(ctx, pluginCtx, resource) PhaseInfo\n    }\n```\n\nKey components:\n- `createSparkApplication`: Creates SparkApplication custom resource\n- `createDriverSpec`: Configures Spark driver\n- `createExecutorSpec`: Configures Spark executors\n- `getSparkConfig`: Manages Spark configuration\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-57](flyteplugins/go/tasks/plugins/k8s/spark/spark.go:40-57)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:59-89](flyteplugins/go/tasks/plugins/k8s/spark/spark.go:59-89)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:91-135](flyteplugins/go/tasks/plugins/k8s/spark/spark.go:91-135)\n\n## Plugin Registration and Integration\n\nThe plugin system integrates with the Flyte workflow executor:\n\n```mermaid\ngraph TD\n    subgraph \"Plugin Registration\"\n        PluginRegistry[\"Plugin Registry\"]\n        CorePlugins[\"Core Plugins\"]\n        K8sPlugins[\"K8s Plugins\"]\n        \n        CorePlugins --\u003e|\"register\"| PluginRegistry\n        K8sPlugins --\u003e|\"register\"| PluginRegistry\n    end\n    \n    subgraph \"Plugin Initialization\"\n        ConfigSystem[\"Config System\"]\n        PluginConfig[\"K8sPluginConfig\"]\n        BackOffController[\"BackoffController\"]\n        MonitorIndex[\"ResourceMonitorIndex\"]\n        \n        ConfigSystem --\u003e|\"provides\"| PluginConfig\n        PluginRegistry --\u003e|\"create\"| PluginManager[\"PluginManager\"]\n        BackOffController --\u003e|\"used by\"| PluginManager\n        MonitorIndex --\u003e|\"used by\"| PluginManager\n    end\n```\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-98](flytepropeller/pkg/controller/nodes/task/plugin_config.go:20-98)\n- [flyteplugins/go/tasks/plugins/k8s/spark/spark.go:557-569](flyteplugins/go/tasks/plugins/k8s/spark/spark.go:557-569)\n\n## Summary\n\nThe Kubernetes Plugin Machinery provides a powerful and flexible framework for executing Flyte tasks on Kubernetes. Key features include:\n\n1. A plugin-based architecture that supports various resource types\n2. Extensive resource customization capabilities\n3. Sophisticated error handling and backoff mechanisms\n4. Support for extended resources like GPUs\n5. Templating for consistent resource configurations\n\nThis system enables Flyte to leverage the full power of Kubernetes while providing a consistent and reliable task execution environment.\n\nSources:\n- [flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go](flytepropeller/pkg/controller/nodes/task/k8s/plugin_manager.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/pod_helper.go)\n- [flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go](flyteplugins/go/tasks/pluginmachinery/flytek8s/config/config.go)"])</script><script>self.__next_f.push([1,"24:T415d,"])</script><script>self.__next_f.push([1,"# WebAPI Plugins\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteidl/gen/pb-es/flyteidl/admin/agent_pb.ts](flyteidl/gen/pb-es/flyteidl/admin/agent_pb.ts)\n- [flyteidl/gen/pb-go/flyteidl/admin/agent.pb.go](flyteidl/gen/pb-go/flyteidl/admin/agent.pb.go)\n- [flyteidl/gen/pb_python/flyteidl/admin/agent_pb2.py](flyteidl/gen/pb_python/flyteidl/admin/agent_pb2.py)\n- [flyteidl/gen/pb_python/flyteidl/admin/agent_pb2.pyi](flyteidl/gen/pb_python/flyteidl/admin/agent_pb2.pyi)\n- [flyteidl/gen/pb_rust/flyteidl.admin.rs](flyteidl/gen/pb_rust/flyteidl.admin.rs)\n- [flyteidl/protos/flyteidl/admin/agent.proto](flyteidl/protos/flyteidl/admin/agent.proto)\n- [flyteplugins/go/tasks/plugins/webapi/agent/client.go](flyteplugins/go/tasks/plugins/webapi/agent/client.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/client_test.go](flyteplugins/go/tasks/plugins/webapi/agent/client_test.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/config.go](flyteplugins/go/tasks/plugins/webapi/agent/config.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/config_test.go](flyteplugins/go/tasks/plugins/webapi/agent/config_test.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/integration_test.go](flyteplugins/go/tasks/plugins/webapi/agent/integration_test.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go](flyteplugins/go/tasks/plugins/webapi/agent/plugin.go)\n- [flyteplugins/go/tasks/plugins/webapi/agent/plugin_test.go](flyteplugins/go/tasks/plugins/webapi/agent/plugin_test.go)\n\n\u003c/details\u003e\n\n\n\nWebAPI plugins in Flyte provide a mechanism to execute tasks on external services through web-based APIs. Unlike Kubernetes plugins which run workloads directly in the cluster, WebAPI plugins enable integration with external services like BigQuery, Snowflake, Athena, and custom agent-based services. This document explains the architecture and functionality of the WebAPI plugin system, focusing specifically on the agent-based implementation.\n\nFor information about Kubernetes-based plugins, see [Kubernetes Plugin Machinery](#4.1).\nFor information about machine learning specific plugins, see [Machine Learning Operators](#4.3).\n\n## WebAPI Plugin Architecture\n\nThe WebAPI plugin system is built on an agent-based architecture that allows Flyte to communicate with external services.\n\n```mermaid\ngraph TD\n    FlytePropeller[\"FlytePropeller\"] --\u003e |\"Invokes\"| PluginRegistry[\"Plugin Registry\"]\n    PluginRegistry --\u003e |\"Loads\"| AgentPlugin[\"Agent Plugin\"]\n    \n    subgraph \"Agent Plugin System\"\n        AgentPlugin --\u003e |\"Contains\"| AgentService[\"AgentService\"]\n        AgentPlugin --\u003e |\"Uses\"| ClientSet[\"ClientSet\"]\n        AgentService --\u003e |\"Manages\"| Registry[\"Task Type Registry\"]\n        \n        Registry --\u003e |\"Maps task type to\"| AgentA[\"Agent (Async)\"]\n        Registry --\u003e |\"Maps task type to\"| AgentB[\"Agent (Sync)\"]\n        \n        ClientSet --\u003e |\"Contains\"| AsyncClients[\"AsyncAgentServiceClients\"]\n        ClientSet --\u003e |\"Contains\"| SyncClients[\"SyncAgentServiceClients\"]\n        ClientSet --\u003e |\"Contains\"| MetadataClients[\"AgentMetadataServiceClients\"]\n    end\n    \n    subgraph \"External Agent Services\"\n        ExternalAgentA[\"External Agent A\"]\n        ExternalAgentB[\"External Agent B\"]\n    end\n    \n    AsyncClients --\u003e |\"gRPC\"| ExternalAgentA\n    SyncClients --\u003e |\"gRPC\"| ExternalAgentB\n    MetadataClients --\u003e |\"gRPC\"| ExternalAgentA\n    MetadataClients --\u003e |\"gRPC\"| ExternalAgentB\n    \n    ExternalAgentA --\u003e |\"Executes on\"| ExternalServiceA[\"External Service A\"]\n    ExternalAgentB --\u003e |\"Executes on\"| ExternalServiceB[\"External Service B\"]\n```\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:29-35](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:53-59](), [flyteplugins/go/tasks/plugins/webapi/agent/client.go:35-40]()\n\n### Key Components\n\n1. **Agent Plugin**: The main WebAPI plugin implementation that connects to external agent services.\n   \n2. **AgentService**: Manages the set of supported task types and routes tasks to appropriate agents.\n   \n3. **Registry**: Maps task types to specific agent implementations.\n   \n4. **ClientSet**: Contains gRPC clients for communicating with external agent services:\n   - AsyncAgentServiceClient: For asynchronous task execution\n   - SyncAgentServiceClient: For synchronous task execution\n   - AgentMetadataServiceClient: For discovering agent capabilities\n\n5. **External Agent Services**: Remote services that implement the Flyte agent protocol and execute tasks.\n\n### Agent Types\n\nWebAPI plugins support two types of agent execution models:\n\n1. **Synchronous Agents**: Execute tasks and return results in the same request. This is suitable for quick operations that complete within a short timeframe.\n\n2. **Asynchronous Agents**: Accept task requests, return a task ID, and allow polling for status and results. This is appropriate for long-running operations.\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/client.go:24-33](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:133-146](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:169-204]()\n\n## Task Execution Flow\n\nThe task execution flow in WebAPI plugins varies depending on whether the agent is synchronous or asynchronous.\n\n```mermaid\nsequenceDiagram\n    participant FP as FlytePropeller\n    participant WAP as WebAPI Plugin\n    participant AG as Agent Service\n    participant ES as External Service\n    \n    FP-\u003e\u003eWAP: Handle Task\n    \n    alt Asynchronous Execution\n        WAP-\u003e\u003eAG: CreateTask\n        AG-\u003e\u003eES: Initialize Task\n        ES--\u003e\u003eAG: Task ID\n        AG--\u003e\u003eWAP: ResourceMetaWrapper\n        WAP--\u003e\u003eFP: PhaseInfo: Running\n        \n        loop Until Terminal State\n            FP-\u003e\u003eWAP: Check Status\n            WAP-\u003e\u003eAG: GetTask\n            AG-\u003e\u003eES: Query Status\n            ES--\u003e\u003eAG: Status, Outputs\n            AG--\u003e\u003eWAP: ResourceWrapper\n            \n            alt Task Succeeded\n                WAP-\u003e\u003eWAP: Write Outputs\n                WAP--\u003e\u003eFP: PhaseInfo: Success\n            else Task Failed\n                WAP--\u003e\u003eFP: PhaseInfo: Failure\n            else Task Running\n                WAP--\u003e\u003eFP: PhaseInfo: Running\n            end\n        end\n        \n        FP-\u003e\u003eWAP: Cleanup\n        WAP-\u003e\u003eAG: DeleteTask\n        AG-\u003e\u003eES: Cleanup Resources\n    else Synchronous Execution\n        WAP-\u003e\u003eAG: ExecuteTaskSync (Stream)\n        AG-\u003e\u003eES: Execute Task\n        ES--\u003e\u003eAG: Outputs\n        AG--\u003e\u003eWAP: ResourceWrapper + Outputs\n        WAP-\u003e\u003eWAP: Write Outputs\n        WAP--\u003e\u003eFP: PhaseInfo: Success/Failure\n    end\n```\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:100-167](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:169-228](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:288-341]()\n\n### Asynchronous Task Execution\n\n1. **Create Phase**:\n   - Plugin determines the appropriate agent for the task type\n   - The `Create` method sends a `CreateTaskRequest` to the agent\n   - Agent returns a `CreateTaskResponse` with resource metadata\n   - Plugin stores the resource metadata for future status checks\n\n2. **Status Check Phase**:\n   - The `Get` method sends a `GetTaskRequest` with the resource metadata\n   - Agent returns a `GetTaskResponse` with current resource state\n   - Plugin maps the resource state to a Flyte `PhaseInfo`\n\n3. **Cleanup Phase**:\n   - The `Delete` method sends a `DeleteTaskRequest` to clean up resources\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:100-167](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:230-285](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:262-286]()\n\n### Synchronous Task Execution\n\n1. **Execute Phase**:\n   - Plugin determines the appropriate agent for the task type\n   - The `ExecuteTaskSync` method sends task and inputs to the agent via streaming\n   - Agent processes the task and returns outputs in the same stream\n   - Plugin processes outputs and maps to a Flyte `PhaseInfo`\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:169-228]()\n\n### Phase Mapping\n\nThe WebAPI plugin maps agent resource states to Flyte phases:\n\n| Agent Phase | Flyte Phase | Description |\n|-------------|-------------|-------------|\n| QUEUED | PhaseQueued | Task is queued |\n| WAITING_FOR_RESOURCES | PhaseWaitingForResources | Task is waiting for resources |\n| INITIALIZING | PhaseInitializing | Task is initializing |\n| RUNNING | PhaseRunning | Task is actively running |\n| SUCCEEDED | PhaseSuccess | Task completed successfully |\n| FAILED | PhaseFailure | Task failed |\n| ABORTED | PhaseFailure | Task was aborted |\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:288-341]()\n\n## Agent Service Protocol\n\nThe communication between the WebAPI plugin and external agents is defined by a gRPC protocol.\n\n### Core Service Interfaces\n\n```mermaid\ngraph LR\n    subgraph \"Protocol Interfaces\"\n        AsyncAgentService[\"AsyncAgentService\"]\n        SyncAgentService[\"SyncAgentService\"]\n        AgentMetadataService[\"AgentMetadataService\"]\n    end\n    \n    subgraph \"Async Methods\"\n        AsyncAgentService --\u003e CreateTask[\"CreateTask\"]\n        AsyncAgentService --\u003e GetTask[\"GetTask\"]\n        AsyncAgentService --\u003e DeleteTask[\"DeleteTask\"] \n        AsyncAgentService --\u003e GetTaskLogs[\"GetTaskLogs\"]\n        AsyncAgentService --\u003e GetTaskMetrics[\"GetTaskMetrics\"]\n    end\n    \n    subgraph \"Sync Methods\"\n        SyncAgentService --\u003e ExecuteTaskSync[\"ExecuteTaskSync (streaming)\"]\n    end\n    \n    subgraph \"Metadata Methods\"\n        AgentMetadataService --\u003e ListAgents[\"ListAgents\"]\n        AgentMetadataService --\u003e GetAgent[\"GetAgent\"]\n    end\n```\n\nSources: [flyteidl/gen/pb-go/flyteidl/admin/agent.pb.go:185-457](), [flyteidl/protos/flyteidl/admin/agent.proto:60-229]()\n\n### Key Message Types\n\n1. **TaskExecutionMetadata**: Contains runtime metadata about a task execution, including:\n   - Task execution ID\n   - Kubernetes namespace\n   - Labels and annotations\n   - Service account and environment variables\n\n2. **Resource**: Represents the state of a task execution in the external service:\n   - Phase (QUEUED, RUNNING, SUCCEEDED, FAILED, etc.)\n   - Outputs (LiteralMap)\n   - Status message\n   - Log links\n   - Custom information\n\n3. **TaskCategory**: Identifies a specific task type and version that an agent can handle.\n\nSources: [flyteidl/gen/pb-go/flyteidl/admin/agent.pb.go:185-325](), [flyteidl/protos/flyteidl/admin/agent.proto:28-57](), [flyteidl/protos/flyteidl/admin/agent.proto:129-146](), [flyteidl/protos/flyteidl/admin/agent.proto:180-185]()\n\n## Configuration\n\nThe WebAPI plugin system is configured through a structured configuration object.\n\n### Agent Configuration Structure\n\n```mermaid\ngraph TD\n    Config[\"Config\"] --\u003e WebAPI[\"WebAPI Config\"]\n    Config --\u003e ResourceConstraints[\"Resource Constraints\"]\n    Config --\u003e DefaultAgent[\"Default Agent Deployment\"]\n    Config --\u003e AgentDeployments[\"Agent Deployments Map\"]\n    Config --\u003e AgentForTaskTypes[\"Agent For Task Types Map\"]\n    Config --\u003e SupportedTaskTypes[\"Supported Task Types\"]\n    Config --\u003e PollInterval[\"Poll Interval\"]\n    \n    DefaultAgent --\u003e Endpoint[\"Endpoint\"]\n    DefaultAgent --\u003e Insecure[\"Insecure\"]\n    DefaultAgent --\u003e ServiceConfig[\"Default Service Config\"]\n    DefaultAgent --\u003e Timeouts[\"Timeouts Map\"]\n    DefaultAgent --\u003e DefaultTimeout[\"Default Timeout\"]\n```\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/config.go:58-78](), [flyteplugins/go/tasks/plugins/webapi/agent/config.go:81-96]()\n\n### Configuration Properties\n\n| Property | Description |\n|----------|-------------|\n| WebAPI | Base configuration for the WebAPI plugin |\n| ResourceConstraints | Resource limits for task executions |\n| DefaultAgent | Default agent configuration if no specific mapping exists |\n| AgentDeployments | Map of agent deployment configurations by ID |\n| AgentForTaskTypes | Maps task types to specific agent deployments |\n| SupportedTaskTypes | List of task types supported by the plugin |\n| PollInterval | Interval for polling agent metadata |\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/config.go:58-78](), [flyteplugins/go/tasks/plugins/webapi/agent/config.go:12-53]()\n\n### Agent Deployment Configuration\n\n| Property | Description |\n|----------|-------------|\n| Endpoint | gRPC endpoint for the agent service |\n| Insecure | Whether to use insecure connections |\n| DefaultServiceConfig | gRPC service configuration |\n| Timeouts | Operation-specific timeout settings |\n| DefaultTimeout | Default timeout for operations |\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/config.go:81-96](), [flyteplugins/go/tasks/plugins/webapi/agent/client.go:77-92]()\n\n## Agent Discovery and Registration\n\nThe WebAPI plugin discovers and registers agents dynamically.\n\n```mermaid\nsequenceDiagram\n    participant P as Plugin\n    participant AS as AgentService\n    participant CS as ClientSet\n    participant ES as External Service\n    \n    P-\u003e\u003eP: Initialize Plugin\n    P-\u003e\u003eCS: getAgentClientSets()\n    CS-\u003e\u003eES: Create gRPC connections\n    CS--\u003e\u003eP: Return ClientSet\n    \n    loop At PollInterval\n        P-\u003e\u003eCS: getAgentRegistry()\n        CS-\u003e\u003eES: ListAgents()\n        ES--\u003e\u003eCS: Supported Task Types/Categories\n        CS--\u003e\u003eP: Return Registry\n        P-\u003e\u003eAS: SetSupportedTaskType()\n    end\n```\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:369-378](), [flyteplugins/go/tasks/plugins/webapi/agent/client.go:94-173](), [flyteplugins/go/tasks/plugins/webapi/agent/client.go:175-204]()\n\nThe agent discovery process:\n\n1. The plugin initializes and creates gRPC connections to configured agent endpoints\n2. It periodically polls agent metadata to discover supported task types\n3. Each agent reports its supported task types and categories\n4. The plugin builds a registry mapping task types to agent implementations\n5. The registry is used to route tasks to the appropriate agent\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:426-453](), [flyteplugins/go/tasks/plugins/webapi/agent/client.go:94-173]()\n\n## Writing Custom Agent Services\n\nTo implement a custom agent service, developers need to create a service that implements the Flyte agent protocol.\n\n### Required Interfaces\n\nFor asynchronous agents:\n1. Implement the `AsyncAgentService` interface:\n   - `CreateTask`: Initialize task execution\n   - `GetTask`: Check task status\n   - `DeleteTask`: Clean up resources\n\nFor synchronous agents:\n1. Implement the `SyncAgentService` interface:\n   - `ExecuteTaskSync`: Execute task and return results in a streaming response\n\nFor agent discovery:\n1. Implement the `AgentMetadataService` interface:\n   - `ListAgents`: Return supported task types/categories\n   - `GetAgent`: Return information about a specific agent\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/integration_test.go:254-296](), [flyteplugins/go/tasks/plugins/webapi/agent/integration_test.go:298-341]()\n\n### Resource State Handling\n\nAgents must report task execution state using the `Resource` message type with appropriate phases:\n\n```go\n// Example of reporting success state\nresource := \u0026admin.Resource{\n    Phase:    flyteIdlCore.TaskExecution_SUCCEEDED,\n    Outputs:  outputs,\n    Message:  \"Task completed successfully\",\n    LogLinks: logLinks,\n}\n```\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:252-260](), [flyteplugins/go/tasks/plugins/webapi/agent/plugin.go:220-227]()\n\n## Examples and Usage\n\nHere are examples of how the WebAPI plugin system is used in Flyte:\n\n### Example: BigQuery Integration\n\n1. A BigQuery agent service implements the AsyncAgentService interface\n2. The service translates Flyte task parameters to BigQuery API calls\n3. It executes queries and tracks their status\n4. When queries complete, it converts results to Flyte outputs\n\n### Example: Custom Agent Integration\n\n1. Define a custom task type in Flyte\n2. Implement an agent service that handles this task type\n3. Deploy the agent service\n4. Configure the WebAPI plugin to connect to the agent\n5. Use the custom task type in Flyte workflows\n\nSources: [flyteplugins/go/tasks/plugins/webapi/agent/integration_test.go:36-111]()\n\n## Conclusion\n\nThe WebAPI plugin system provides a flexible architecture for integrating Flyte with external services through a standardized agent protocol. By supporting both synchronous and asynchronous execution models, it accommodates a wide range of external service patterns, from quick API calls to long-running operations.\n\nThe system's dynamic agent discovery mechanism allows for extensibility, enabling developers to implement and deploy custom agent services without modifying the core Flyte codebase. This makes the WebAPI plugin system a powerful tool for expanding Flyte's capabilities to interact with diverse external services."])</script><script>self.__next_f.push([1,"25:T5932,"])</script><script>self.__next_f.push([1,"# Machine Learning Operators\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator_test.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi_test.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch_test.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch_test.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow_test.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow_test.go)\n\n\u003c/details\u003e\n\n\n\nThis document covers Flyte's Machine Learning Operators, which are plugins that enable distributed training for popular machine learning frameworks like PyTorch, TensorFlow, and MPI. These operators leverage Kubeflow's Training Operators to provide native distributed training capabilities within Flyte workflows.\n\nFor information about other plugin types in Flyte, refer to the general [Plugin System](#4) documentation.\n\n## Architecture Overview\n\nThe ML Operators are implemented as Kubernetes plugins that create, manage, and monitor distributed training jobs using Kubeflow operators. Each ML framework has a dedicated operator that understands the specific requirements and configurations of that framework.\n\nML Operators Architecture:\n\n```mermaid\ngraph TD\n    Flyte[\"Flyte\"] --\u003e PluginSystem[\"PluginRegistry\"]\n    PluginSystem --\u003e MLOperators[\"K8s.PluginEntry\"]\n    MLOperators --\u003e PyTorchPlugin[\"pytorchOperatorResourceHandler\"]\n    MLOperators --\u003e TensorFlowPlugin[\"tensorflowOperatorResourceHandler\"]\n    MLOperators --\u003e MPIPlugin[\"mpiOperatorResourceHandler\"]\n    \n    PyTorchPlugin --\u003e PyTorchCRD[\"kubeflowv1.PyTorchJob\"]\n    TensorFlowPlugin --\u003e TensorFlowCRD[\"kubeflowv1.TFJob\"]\n    MPIPlugin --\u003e MPICRD[\"kubeflowv1.MPIJob\"]\n    \n    PyTorchCRD --\u003e K8s[\"Kubernetes API\"]\n    TensorFlowCRD --\u003e K8s\n    MPICRD --\u003e K8s\n    \n    K8s --\u003e PyTorchPods[\"PyTorch Training Pods\"]\n    K8s --\u003e TensorFlowPods[\"TensorFlow Training Pods\"]\n    K8s --\u003e MPIPods[\"MPI Training Pods\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go)\n\n### Common Structure\n\nAll ML Operators implement the `k8s.Plugin` interface and share common utilities for resource handling, phase mapping, and log collection. The diagram below illustrates the relationship between the different components:\n\n```mermaid\nclassDiagram\n    class k8sPlugin {\n        +GetProperties() k8s.PluginProperties\n        +BuildIdentityResource() client.Object\n        +BuildResource() client.Object\n        +GetTaskPhase() pluginsCore.PhaseInfo\n    }\n    \n    class common {\n        +GetPhaseInfo() pluginsCore.PhaseInfo\n        +GetLogs() []*core.TaskLog\n        +ToReplicaSpec() *kubeflowv1.ReplicaSpec\n        +ParseRunPolicy() kubeflowv1.RunPolicy\n    }\n    \n    class pytorchOperatorResourceHandler {\n        +BuildResource() client.Object\n        +GetTaskPhase() pluginsCore.PhaseInfo\n        +ParseElasticConfig() *kubeflowv1.ElasticPolicy\n    }\n    \n    class tensorflowOperatorResourceHandler {\n        +BuildResource() client.Object\n        +GetTaskPhase() pluginsCore.PhaseInfo\n    }\n    \n    class mpiOperatorResourceHandler {\n        +BuildResource() client.Object\n        +GetTaskPhase() pluginsCore.PhaseInfo\n    }\n    \n    k8sPlugin \u003c|-- pytorchOperatorResourceHandler\n    k8sPlugin \u003c|-- tensorflowOperatorResourceHandler\n    k8sPlugin \u003c|-- mpiOperatorResourceHandler\n    \n    common \u003c-- pytorchOperatorResourceHandler\n    common \u003c-- tensorflowOperatorResourceHandler\n    common \u003c-- mpiOperatorResourceHandler\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:26-29](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:26-29)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:26-31](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:26-31)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:23-27](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:23-27)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:26-30](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:26-30)\n\n### Task Execution Flow\n\nThe following sequence diagram illustrates the lifecycle of a distributed training task using ML Operators:\n\n```mermaid\nsequenceDiagram\n    participant User as \"User\"\n    participant FlytePropeller as \"FlytePropeller\"\n    participant MLOperator as \"ML Operator Plugin\"\n    participant Kubeflow as \"Kubeflow Operator\"\n    participant K8s as \"Kubernetes API\"\n    \n    User-\u003e\u003eFlytePropeller: Submit Workflow\n    FlytePropeller-\u003e\u003eMLOperator: Execute ML Task (TaskExecutionContext)\n    MLOperator-\u003e\u003eMLOperator: BuildResource(ctx, taskCtx)\n    MLOperator-\u003e\u003eKubeflow: Create Training Job (PyTorchJob/TFJob/MPIJob)\n    Kubeflow-\u003e\u003eK8s: Create Pods\n    \n    loop Until Job Completes\n        FlytePropeller-\u003e\u003eMLOperator: Check Status\n        MLOperator-\u003e\u003eKubeflow: Get Job Status\n        Kubeflow--\u003e\u003eMLOperator: Job Conditions\n        MLOperator-\u003e\u003eMLOperator: GetPhaseInfo(conditions)\n        MLOperator--\u003e\u003eFlytePropeller: Task Phase (PhaseInfo)\n    end\n    \n    MLOperator-\u003e\u003eMLOperator: GetLogs(podNames)\n    MLOperator--\u003e\u003eFlytePropeller: Task Logs (TaskLogs)\n    FlytePropeller--\u003e\u003eUser: Task Result\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:56-175](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:56-175)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:206-255](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:206-255)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:92-200](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:92-200)\n\n## PyTorch Operator\n\nThe PyTorch Operator enables distributed PyTorch training jobs in Flyte. It supports both standard distributed training with master and worker nodes, as well as elastic training with dynamic scaling capabilities.\n\n### PyTorch Job Structure\n\nA PyTorch job consists of master and worker replicas, with optional elastic policy configuration:\n\n```mermaid\ngraph TD\n    PyTorchJob[\"kubeflowv1.PyTorchJob\"] --\u003e ReplicaSpecs[\"PyTorchReplicaSpecs\"]\n    PyTorchJob --\u003e RunPolicy[\"RunPolicy\"]\n    PyTorchJob --\u003e ElasticPolicy[\"ElasticPolicy\"]\n    \n    ReplicaSpecs --\u003e MasterReplica[\"PyTorchJobReplicaTypeMaster\"]\n    ReplicaSpecs --\u003e WorkerReplicas[\"PyTorchJobReplicaTypeWorker\"]\n    \n    MasterReplica --\u003e MasterPod[\"Master Pod\"]\n    WorkerReplicas --\u003e WorkerPod1[\"Worker Pod 1\"]\n    WorkerReplicas --\u003e WorkerPod2[\"Worker Pod 2\"]\n    \n    ElasticPolicy --\u003e MinReplicas[\"MinReplicas\"]\n    ElasticPolicy --\u003e MaxReplicas[\"MaxReplicas\"]\n    ElasticPolicy --\u003e RDZVBackend[\"RDZVBackend\"]\n    ElasticPolicy --\u003e NProcPerNode[\"NProcPerNode\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:146-164](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:146-164)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:179-201](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:179-201)\n\n### Features\n\n1. **Standard Distributed Training**:\n   - Master-worker architecture\n   - Configurable number of worker replicas\n   - Resource allocation for each replica type\n\n2. **Elastic Training**:\n   - Dynamic worker scaling with min/max replicas\n   - Configurable processes per node\n   - Rendezvous backend selection\n   - Automatic removal of master replica in elastic mode\n\n3. **Error Handling**:\n   - Earliest error aggregation strategy\n   - Phase mapping from Kubeflow job conditions\n   - Custom resource monitoring\n\n### Task Type Versions\n\nThe PyTorch Operator supports two task type versions with different configuration formats:\n\n| Feature | Version 0 (Legacy) | Version 1 |\n|---------|-------------------|-----------|\n| Configuration Structure | Simple fields for workers count | Detailed replica specifications |\n| Elastic Training | Basic elastic config | Advanced elastic config |\n| Container Overrides | Limited customization | Per-replica customization |\n| Custom Resources | Global resource settings | Per-replica resource settings |\n| Run Policy | Not available | Detailed run policy configuration |\n\nThe BuildResource method checks the task type version and constructs the appropriate job specification:\n\n```go\nif taskTemplate.GetTaskTypeVersion() == 0 {\n    // Parse legacy format\n    pytorchTaskExtraArgs := plugins.DistributedPyTorchTrainingTask{}\n    err = utils.UnmarshalStruct(taskTemplate.GetCustom(), \u0026pytorchTaskExtraArgs)\n    // ...\n} else if taskTemplate.GetTaskTypeVersion() == 1 {\n    // Parse new format\n    kfPytorchTaskExtraArgs := kfplugins.DistributedPyTorchTrainingTask{}\n    err = utils.UnmarshalStruct(taskTemplate.GetCustom(), \u0026kfPytorchTaskExtraArgs)\n    // ...\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:70-87](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:70-87)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:94-142](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:94-142)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch_test.go:73-97](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch_test.go:73-97)\n\n## TensorFlow Operator\n\nThe TensorFlow Operator enables distributed TensorFlow training with support for various replica types including parameter servers, chief workers, workers, and evaluators.\n\n### TensorFlow Job Structure\n\nA TensorFlow job consists of various replica types with specific roles:\n\n```mermaid\ngraph TD\n    TFJob[\"kubeflowv1.TFJob\"] --\u003e ReplicaSpecs[\"TFReplicaSpecs\"]\n    TFJob --\u003e RunPolicy[\"RunPolicy\"]\n    \n    ReplicaSpecs --\u003e ChiefReplica[\"TFJobReplicaTypeChief\"]\n    ReplicaSpecs --\u003e PSReplicas[\"TFJobReplicaTypePS\"]\n    ReplicaSpecs --\u003e WorkerReplicas[\"TFJobReplicaTypeWorker\"]\n    ReplicaSpecs --\u003e EvalReplica[\"TFJobReplicaTypeEval\"]\n    \n    ChiefReplica --\u003e ChiefPod[\"Chief Pod\"]\n    PSReplicas --\u003e PSPod1[\"PS Pod 1\"]\n    PSReplicas --\u003e PSPod2[\"PS Pod 2\"]\n    WorkerReplicas --\u003e WorkerPod1[\"Worker Pod 1\"]\n    WorkerReplicas --\u003e WorkerPod2[\"Worker Pod 2\"]\n    EvalReplica --\u003e EvalPod[\"Evaluator Pod\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:54-82](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:54-82)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:85-123](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:85-123)\n\n### Features\n\n1. **Parameter Server Architecture**:\n   - Parameter server replicas for model parameter management\n   - Worker replicas for distributed computation\n   - Chief replica for coordination\n   - Evaluator replica for model evaluation\n\n2. **Replica Configuration**:\n   - Configurable number of replicas for each type\n   - Specific resource allocation per replica type\n   - Custom container image for each replica type\n\n3. **Job Verification**:\n   - Ensures at least one worker is specified\n   - Validates replica specifications for all types\n   - Proper resource allocation for each replica type\n\nSimilar to the PyTorch operator, TensorFlow supports both version 0 (legacy) and version 1 task specifications, with the latter offering more detailed per-replica configuration options.\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:58-82](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:58-82)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:85-123](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:85-123)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow_test.go:69-75](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow_test.go:69-75)\n\n## MPI Operator\n\nThe MPI Operator enables distributed training using the Message Passing Interface (MPI) protocol, commonly used with frameworks like Horovod or other custom distributed applications.\n\n### MPI Job Structure\n\nAn MPI job consists of a launcher replica and worker replicas with configurable slots:\n\n```mermaid\ngraph TD\n    MPIJob[\"kubeflowv1.MPIJob\"] --\u003e ReplicaSpecs[\"MPIReplicaSpecs\"]\n    MPIJob --\u003e RunPolicy[\"RunPolicy\"]\n    MPIJob --\u003e SlotsPerWorker[\"SlotsPerWorker\"]\n    \n    ReplicaSpecs --\u003e LauncherReplica[\"MPIJobReplicaTypeLauncher\"]\n    ReplicaSpecs --\u003e WorkerReplicas[\"MPIJobReplicaTypeWorker\"]\n    \n    LauncherReplica --\u003e LauncherPod[\"Launcher Pod\"]\n    WorkerReplicas --\u003e WorkerPod1[\"Worker Pod 1\"]\n    WorkerReplicas --\u003e WorkerPod2[\"Worker Pod 2\"]\n    WorkerReplicas --\u003e WorkerPod3[\"Worker Pod 3\"]\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:134-149](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:134-149)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:62-99](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:62-99)\n\n### Features\n\n1. **Launcher-Worker Architecture**:\n   - Launcher replica for MPI job coordination\n   - Worker replicas for distributed computation\n   - Slots per worker configuration for MPI rank allocation\n\n2. **Worker Command Customization**:\n   - Support for custom worker commands via `worker_spec_command` config parameter\n   - Different command handling for launcher and worker replicas\n\n3. **Validation**:\n   - Ensures at least one worker is specified\n   - Ensures at least one launcher is specified\n   - Validates slot configuration\n\nThe MPI operator also supports both version 0 (legacy) and version 1 task specifications, with special handling for worker command configuration:\n\n```go\n// V1 requires passing worker command as template config parameter\ntaskTemplateConfig := taskTemplate.GetConfig()\nworkerSpecCommand := []string{}\nif val, ok := taskTemplateConfig[workerSpecCommandKey]; ok {\n    workerSpecCommand = strings.Split(val, \" \")\n}\n\nfor k := range workerReplicaSpec.Template.Spec.Containers {\n    if workerReplicaSpec.Template.Spec.Containers[k].Name == kubeflowv1.MPIJobDefaultContainerName {\n        workerReplicaSpec.Template.Spec.Containers[k].Args = workerSpecCommand\n        workerReplicaSpec.Template.Spec.Containers[k].Command = []string{}\n    }\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:63-97](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:63-97)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:100-125](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:100-125)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:24](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:24)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi_test.go:69-74](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi_test.go:69-74)\n\n## Common Components\n\nAll ML Operators share common components for job lifecycle management, phase mapping, and log collection.\n\n### Phase Mapping\n\nThe operators map Kubeflow job conditions to Flyte task phases as follows:\n\n| Kubeflow Condition | Flyte Phase |\n|-------------------|-------------|\n| JobCreated | PhaseQueued |\n| JobRunning | PhaseRunning |\n| JobSucceeded | PhaseSuccess |\n| JobFailed | PhaseRetryableFailure |\n| JobRestarting | PhaseRunning |\n\nThe `GetPhaseInfo` function in the common package handles this mapping:\n\n```go\nfunc GetPhaseInfo(currentCondition kubeflowv1.JobCondition, occurredAt time.Time,\n    taskPhaseInfo pluginsCore.TaskInfo) (pluginsCore.PhaseInfo, error) {\n    // ...\n    switch currentCondition.Type {\n    case kubeflowv1.JobCreated:\n        return pluginsCore.PhaseInfoQueuedWithTaskInfo(occurredAt, pluginsCore.DefaultPhaseVersion, \"JobCreated\", \u0026taskPhaseInfo), nil\n    case kubeflowv1.JobRunning:\n        return pluginsCore.PhaseInfoRunning(pluginsCore.DefaultPhaseVersion, \u0026taskPhaseInfo), nil\n    case kubeflowv1.JobSucceeded:\n        return pluginsCore.PhaseInfoSuccess(\u0026taskPhaseInfo), nil\n    case kubeflowv1.JobFailed:\n        details := fmt.Sprintf(\"Job failed:\\n\\t%v - %v\", currentCondition.Reason, currentCondition.Message)\n        return pluginsCore.PhaseInfoRetryableFailure(flyteerr.DownstreamSystemError, details, \u0026taskPhaseInfo), nil\n    case kubeflowv1.JobRestarting:\n        return pluginsCore.PhaseInfoRunning(pluginsCore.DefaultPhaseVersion, \u0026taskPhaseInfo), nil\n    }\n    // ...\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:49-68](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:49-68)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:206-255](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:206-255)\n\n### Log Collection\n\nThe operators collect logs from distributed pods based on the framework type. The `GetLogs` function in the common package handles log collection with different strategies for each framework:\n\n```go\n// For PyTorch (with master)\nif taskType == PytorchTaskType \u0026\u0026 hasMaster {\n    masterTaskLog, masterErr := logPlugin.GetTaskLogs(...)\n    taskLogs = append(taskLogs, masterTaskLog.TaskLogs...)\n}\n\n// For all frameworks: collect worker logs\nfor workerIndex := int32(0); workerIndex \u003c workersCount; workerIndex++ {\n    workerLog, err := logPlugin.GetTaskLogs(...)\n    taskLogs = append(taskLogs, workerLog.TaskLogs...)\n}\n\n// For TensorFlow: additional replica types\nif taskType == TensorflowTaskType {\n    // PS replicas, Chief replicas, Evaluator replicas\n    // ...\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:92-200](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:92-200)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:225-227](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:225-227)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:169-173](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:169-173)\n\n### Run Policy Configuration\n\nAll operators support run policy configuration for controlling job behavior:\n\n| Policy Option | Description |\n|--------------|-------------|\n| CleanPodPolicy | Policy for cleaning up pods after job completion (None, All, Running) |\n| BackoffLimit | Number of retries before marking job failed |\n| ActiveDeadlineSeconds | Time limit for job execution |\n| TTLSecondsAfterFinished | Time to keep job after completion |\n\nThe `ParseRunPolicy` function in the common package converts Flyte run policy to Kubeflow run policy:\n\n```go\nfunc ParseRunPolicy(flyteRunPolicy kfplugins.RunPolicy) kubeflowv1.RunPolicy {\n    runPolicy := kubeflowv1.RunPolicy{}\n    if flyteRunPolicy.GetBackoffLimit() != 0 {\n        var backoffLimit = flyteRunPolicy.GetBackoffLimit()\n        runPolicy.BackoffLimit = \u0026backoffLimit\n    }\n    var cleanPodPolicy = ParseCleanPodPolicy(flyteRunPolicy.GetCleanPodPolicy())\n    runPolicy.CleanPodPolicy = \u0026cleanPodPolicy\n    // ...\n    return runPolicy\n}\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:218-246](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:218-246)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:134-136](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:134-136)\n\n## Plugin Registration\n\nEach ML Operator registers itself with the Flyte plugin registry during initialization:\n\n```go\n// In pytorch.go init()\npluginmachinery.PluginRegistry().RegisterK8sPlugin(\n    k8s.PluginEntry{\n        ID:                  common.PytorchTaskType,\n        RegisteredTaskTypes: []pluginsCore.TaskType{common.PytorchTaskType},\n        ResourceToWatch:     \u0026kubeflowv1.PyTorchJob{},\n        Plugin:              pytorchOperatorResourceHandler{},\n        IsDefault:           false,\n    })\n```\n\nThe ML Operators support the following task types defined in the common package:\n\n```go\nconst (\n    TensorflowTaskType = \"tensorflow\"\n    MPITaskType        = \"mpi\"\n    PytorchTaskType    = \"pytorch\"\n)\n```\n\nSources:\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:257-270](flyteplugins/go/tasks/plugins/k8s/kfoperators/pytorch/pytorch.go:257-270)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:203-216](flyteplugins/go/tasks/plugins/k8s/kfoperators/tensorflow/tensorflow.go:203-216)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:205-218](flyteplugins/go/tasks/plugins/k8s/kfoperators/mpi/mpi.go:205-218)\n- [flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:26-29](flyteplugins/go/tasks/plugins/k8s/kfoperators/common/common_operator.go:26-29)\n\n## Summary\n\nFlyte's Machine Learning Operators provide a powerful abstraction for distributed training with popular ML frameworks. Key features include:\n\n1. **Framework-Specific Support**:\n   - PyTorch: Master-worker architecture with elastic training capabilities\n   - TensorFlow: Parameter server architecture with chief, worker, PS, and evaluator replicas\n   - MPI: Launcher-worker architecture for MPI-based distributed training\n\n2. **Common Capabilities**:\n   - Resource allocation and management\n   - Job lifecycle monitoring\n   - Phase mapping from Kubeflow to Flyte\n   - Log collection from distributed pods\n   - Run policy configuration\n\n3. **Task Versioning**:\n   - Version 0 (legacy): Simple configuration with basic options\n   - Version 1: Detailed per-replica configuration with advanced options\n\nThese operators seamlessly integrate distributed training capabilities into Flyte workflows, leveraging Kubeflow's Training Operators to manage the underlying Kubernetes resources."])</script><script>self.__next_f.push([1,"26:T467f,"])</script><script>self.__next_f.push([1,"# API and Interface Definitions\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteidl/clients/go/assets/admin.swagger.json](flyteidl/clients/go/assets/admin.swagger.json)\n- [flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts](flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go)\n- [flyteidl/gen/pb-go/flyteidl/service/admin.pb.go](flyteidl/gen/pb-go/flyteidl/service/admin.pb.go)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json)\n- [flyteidl/gen/pb-js/flyteidl.d.ts](flyteidl/gen/pb-js/flyteidl.d.ts)\n- [flyteidl/gen/pb-js/flyteidl.js](flyteidl/gen/pb-js/flyteidl.js)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi)\n- [flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py](flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs](flyteidl/gen/pb_rust/flyteidl.core.rs)\n- [flyteidl/protos/flyteidl/core/workflow.proto](flyteidl/protos/flyteidl/core/workflow.proto)\n- [flyteidl/protos/flyteidl/service/admin.proto](flyteidl/protos/flyteidl/service/admin.proto)\n\n\u003c/details\u003e\n\n\n\nThis document provides a technical overview of the API and interface definitions in the Flyte system. It describes how Flyte defines its data types, services, and communication protocols through a structured Interface Definition Language (IDL). These definitions form the foundation for type-safe communication between Flyte components, both internally and with external clients.\n\nFor information about specific Admin Service functionality, see [Admin Service](#5.2).\n\n## Overview of Flyte Interface Definitions\n\nFlyte uses Protocol Buffers (protobuf) as its Interface Definition Language (IDL) to define data structures and service interfaces. These definitions are organized in the `flyteidl` (Flyte Interface Definition Language) directory and are used to generate type-safe code across multiple programming languages.\n\n```mermaid\ngraph TD\n    subgraph \"FlyteIDL Structure\"\n        IDL[\"FlyteIDL\"] --\u003e CoreProtos[\"Core Protos\\n(Data Types)\"]\n        IDL --\u003e AdminProtos[\"Admin Protos\\n(Entity Management)\"]\n        IDL --\u003e ServiceProtos[\"Service Protos\\n(Service Interfaces)\"]\n    end\n\n    subgraph \"Generated Code\"\n        CoreProtos --\u003e GoCode[\"Go Code\"]\n        CoreProtos --\u003e PyCode[\"Python Code\"]\n        CoreProtos --\u003e TSCode[\"TypeScript/JavaScript Code\"]\n        CoreProtos --\u003e RustCode[\"Rust Code\"]\n        \n        ServiceProtos --\u003e ServiceImpl[\"Service Implementations\"]\n        ServiceProtos --\u003e RestAPI[\"REST APIs (via gRPC Gateway)\"]\n        ServiceProtos --\u003e SwaggerSpec[\"Swagger/OpenAPI Specifications\"]\n    end\n\n    subgraph \"Client Usage\"\n        GoCode --\u003e GoClient[\"Go Client\"]\n        PyCode --\u003e PyClient[\"Python Client (FlyteKit)\"]\n        TSCode --\u003e WebClient[\"Web Client (FlyteConsole)\"]\n        RustCode --\u003e RustClient[\"Rust Client\"]\n        SwaggerSpec --\u003e ThirdPartyClients[\"Third-Party Clients\"]\n    end\n```\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.js](flyteidl/gen/pb-js/flyteidl.js)\n- [flyteidl/gen/pb-js/flyteidl.d.ts](flyteidl/gen/pb-js/flyteidl.d.ts)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs](flyteidl/gen/pb_rust/flyteidl.core.rs)\n\n## FlyteIDL Structure\n\nFlyteIDL is organized into three main components:\n\n1. **Core** - Defines fundamental data types, workflows, tasks, and interfaces\n2. **Admin** - Defines entities used for management operations\n3. **Service** - Defines service interfaces (Admin, Agent, etc.)\n\n```mermaid\ngraph TD\n    subgraph \"FlyteIDL Namespace\"\n        flyteidl[\"flyteidl\"]\n        \n        subgraph \"Core\"\n            core[\"core\"] --\u003e literals[\"literals.proto\"]\n            core --\u003e types[\"types.proto\"]\n            core --\u003e interfaces[\"interface.proto\"]\n            core --\u003e tasks[\"tasks.proto\"]\n            core --\u003e workflow[\"workflow.proto\"]\n            core --\u003e execution[\"execution.proto\"]\n        end\n        \n        subgraph \"Admin\"\n            admin[\"admin\"] --\u003e task[\"task.proto\"]\n            admin --\u003e workflow_admin[\"workflow.proto\"]\n            admin --\u003e launchplan[\"launch_plan.proto\"]\n            admin --\u003e execution_admin[\"execution.proto\"]\n            admin --\u003e project[\"project.proto\"]\n        end\n        \n        subgraph \"Service\"\n            service[\"service\"] --\u003e admin_service[\"admin.proto\"]\n            service --\u003e agent_service[\"agent.proto\"]\n            service --\u003e external_plugin[\"external_plugin_service.proto\"]\n        end\n        \n        flyteidl --\u003e core\n        flyteidl --\u003e admin\n        flyteidl --\u003e service\n    end\n```\n\nSources:\n- [flyteidl/protos/flyteidl/core/workflow.proto](flyteidl/protos/flyteidl/core/workflow.proto)\n- [flyteidl/protos/flyteidl/service/admin.proto](flyteidl/protos/flyteidl/service/admin.proto)\n\n## Core Data Types\n\nFlyte's type system is defined in the Core package and serves as the foundation for all data exchange in the system. These types are used to define the inputs and outputs of tasks and workflows.\n\n### Type System Hierarchy\n\n```mermaid\ngraph TD\n    LiteralType[\"LiteralType\"] --\u003e Simple[\"SimpleType\\n(int, float, string, bool, etc.)\"]\n    LiteralType --\u003e Complex[\"Complex Types\"]\n    \n    Complex --\u003e SchemaType[\"SchemaType\\n(Structured Data)\"]\n    Complex --\u003e BlobType[\"BlobType\\n(Unstructured Data)\"]\n    Complex --\u003e CollectionType[\"CollectionType\\n(Lists)\"]\n    Complex --\u003e MapValueType[\"MapValueType\\n(Maps)\"]\n    Complex --\u003e UnionType[\"UnionType\\n(Tagged Unions)\"]\n    Complex --\u003e StructuredDatasetType[\"StructuredDatasetType\\n(Advanced Datasets)\"]\n    \n    Literal[\"Literal\"] --\u003e ScalarLiteral[\"Scalar\\n(Primitive, Blob, etc.)\"]\n    Literal --\u003e CollectionLiteral[\"Collection\\n(List of Literals)\"]\n    Literal --\u003e MapLiteral[\"Map\\n(String to Literal)\"]\n    \n    subgraph \"Runtime Values\"\n        Literal\n    end\n    \n    subgraph \"Type Definitions\"\n        LiteralType\n    end\n```\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.d.ts:5-573](flyteidl/gen/pb-js/flyteidl.d.ts:5-573)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:3-193](flyteidl/gen/pb_rust/flyteidl.core.rs:3-193)\n\n### Key Type Definitions\n\nThe core type system includes:\n\n| Type Category | Description | Examples |\n|---------------|-------------|----------|\n| Simple Types | Basic primitive data types | Integer, Float, String, Boolean, Datetime, Duration |\n| Blob Types | Unstructured data with format metadata | CSV, Parquet, arbitrary binary data |\n| Schema Types | Structured data with column definitions | Dataframes, database tables |\n| Collection Types | Homogeneous collections of any type | Lists of integers, lists of blobs |\n| Map Types | Key-value maps (string keys only) | String to integer maps, string to blob maps |\n| Union Types | Tagged union types (sum types) | A type that can be either Type A or Type B |\n| Structured Dataset Types | Advanced datasets with schema and format info | Apache Arrow tables, Pandas dataframes |\n\nSources:\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:65-450](flyteidl/gen/pb_rust/flyteidl.core.rs:65-450)\n- [flyteidl/gen/pb-js/flyteidl.d.ts:145-216](flyteidl/gen/pb-js/flyteidl.d.ts:145-216)\n\n## Service Interfaces\n\nFlyte defines several service interfaces that enable communication between components:\n\n### Service Architecture\n\n```mermaid\ngraph TD\n    subgraph \"Client Applications\"\n        FlyteCtl[\"flytectl CLI\"]\n        FlyteConsole[\"FlyteConsole UI\"]\n        FlyteSDKs[\"Flyte SDKs\\n(Python, Go, etc.)\"]\n        ThirdParty[\"Third-Party Apps\"]\n    end\n    \n    subgraph \"Service APIs\"\n        AdminService[\"AdminService\\n(Resource Management)\"]\n        AgentService[\"AgentService\\n(Task Execution)\"]\n        ExternalPluginService[\"ExternalPluginService\\n(Plugin Integration)\"]\n    end\n    \n    FlyteCtl --\u003e |\"gRPC/REST\"| AdminService\n    FlyteConsole --\u003e |\"REST\"| AdminService\n    FlyteSDKs --\u003e |\"gRPC/REST\"| AdminService\n    ThirdParty --\u003e |\"REST\"| AdminService\n    \n    AdminService --\u003e |\"Task Execution\"| AgentService\n    AdminService --\u003e |\"Plugin Operations\"| ExternalPluginService\n```\n\nSources:\n- [flyteidl/clients/go/assets/admin.swagger.json:18-723](flyteidl/clients/go/assets/admin.swagger.json:18-723)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json:18-19](flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json:18-19)\n\n### Admin Service API\n\nThe Admin Service is the central management interface for Flyte resources. It provides operations for:\n\n#### Key Admin Service Endpoints\n\n| Category | Operations | Description |\n|----------|------------|-------------|\n| Tasks | CreateTask, GetTask, ListTasks | Manage task definitions |\n| Workflows | CreateWorkflow, GetWorkflow, ListWorkflows | Manage workflow definitions |\n| Launch Plans | CreateLaunchPlan, GetLaunchPlan, ListLaunchPlans | Manage launch plan definitions |\n| Executions | CreateExecution, GetExecution, ListExecutions | Manage workflow executions |\n| Node Executions | GetNodeExecution, ListNodeExecutions | Retrieve node execution information |\n| Task Executions | GetTaskExecution, ListTaskExecutions | Retrieve task execution information |\n| Projects | CreateProject, ListProjects | Manage project resources |\n\nThe Admin Service API is exposed as both gRPC and REST (via gRPC Gateway).\n\nSources:\n- [flyteidl/protos/flyteidl/service/admin.proto:27-1234](flyteidl/protos/flyteidl/service/admin.proto:27-1234)\n- [flyteidl/clients/go/assets/admin.swagger.json:18-538](flyteidl/clients/go/assets/admin.swagger.json:18-538)\n\n### Agent Service API\n\nThe Agent Service provides interfaces for executing tasks and retrieving execution information:\n\n```mermaid\ngraph TD\n    subgraph \"Agent Service API\"\n        SyncAgentService[\"SyncAgentService\\n(Synchronous Execution)\"]\n        AsyncAgentService[\"AsyncAgentService\\n(Asynchronous Execution)\"]\n        AgentMetadataService[\"AgentMetadataService\\n(Agent Information)\"]\n    end\n    \n    SyncAgentService --\u003e |\"ExecuteTaskSync\"| SyncTasks[\"Synchronous Task Execution\"]\n    \n    AsyncAgentService --\u003e |\"CreateTask\"| CreateJob[\"Create External Job\"]\n    AsyncAgentService --\u003e |\"GetTask\"| GetStatus[\"Get Job Status\"]\n    AsyncAgentService --\u003e |\"DeleteTask\"| CleanupJob[\"Delete Job Resources\"]\n    AsyncAgentService --\u003e |\"GetTaskLogs\"| StreamLogs[\"Stream Execution Logs\"]\n    AsyncAgentService --\u003e |\"GetTaskMetrics\"| ReturnMetrics[\"Return Execution Metrics\"]\n    \n    AgentMetadataService --\u003e |\"GetAgent\"| AgentInfo[\"Agent Information\"]\n    AgentMetadataService --\u003e |\"ListAgents\"| AllAgents[\"List Available Agents\"]\n```\n\nSources:\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441)\n\n## Entity Relationships\n\nThe core entity relationships in Flyte's interface model:\n\n```mermaid\nerDiagram\n    Task {\n        Identifier id\n        TypedInterface interface\n        string type\n        Container container\n    }\n    \n    Workflow {\n        Identifier id\n        TypedInterface interface\n        Node[] nodes\n        Binding[] outputs\n    }\n    \n    LaunchPlan {\n        Identifier id\n        TypedInterface interface\n        ParameterMap parameters\n        LiteralMap fixed_inputs\n    }\n    \n    Execution {\n        WorkflowExecutionIdentifier id\n        LaunchPlanIdentifier launch_plan\n        LiteralMap inputs\n        LiteralMap outputs\n    }\n    \n    NodeExecution {\n        NodeExecutionIdentifier id\n        LiteralMap inputs\n        LiteralMap outputs\n    }\n    \n    TaskExecution {\n        TaskExecutionIdentifier id\n        LiteralMap inputs\n        LiteralMap outputs\n    }\n    \n    Project {\n        string id\n        string name\n        string description\n    }\n    \n    Domain {\n        string id\n        string name\n    }\n    \n    Workflow }|--|| Task : \"contains\"\n    LaunchPlan }|--|| Workflow : \"references\"\n    Execution }|--|| LaunchPlan : \"launches\"\n    Execution ||--|{ NodeExecution : \"has\"\n    NodeExecution ||--|{ TaskExecution : \"has\"\n    Project ||--|{ Domain : \"contains\"\n    Task }|--|| Project : \"belongs_to\"\n    Workflow }|--|| Project : \"belongs_to\"\n    LaunchPlan }|--|| Project : \"belongs_to\"\n    Execution }|--|| Project : \"belongs_to\"\n```\n\nSources:\n- [flyteidl/protos/flyteidl/core/workflow.proto:10-283](flyteidl/protos/flyteidl/core/workflow.proto:10-283)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:25-323](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:25-323)\n\n## Code Generation\n\nFlyteIDL definitions are used to generate code in multiple languages:\n\n| Language | Generated Files | Usage |\n|----------|-----------------|-------|\n| Go | `flyteidl/gen/pb-go/` | Server implementation, Go clients |\n| Python | `flyteidl/gen/pb_python/` | Python SDK (FlyteKit) |\n| JavaScript/TypeScript | `flyteidl/gen/pb-js/` | Web UI (FlyteConsole) |\n| Rust | `flyteidl/gen/pb_rust/` | Rust clients |\n| Swagger/OpenAPI | `flyteidl/clients/go/assets/` | RESTful API documentation, third-party clients |\n\nEach generated package follows the same namespace structure as the IDL definitions, making it easy to locate corresponding types across languages.\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.js:1-30](flyteidl/gen/pb-js/flyteidl.js:1-30)\n- [flyteidl/gen/pb-js/flyteidl.d.ts:1-30](flyteidl/gen/pb-js/flyteidl.d.ts:1-30)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:1-20](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:1-20)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py:1-30](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py:1-30)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:1-20](flyteidl/gen/pb_rust/flyteidl.core.rs:1-20)\n\n## Key Workflow Interface Definitions\n\nWorkflow interfaces define the structure of workflows and their execution:\n\n```mermaid\ngraph TD\n    Workflow[\"WorkflowTemplate\"] --\u003e Nodes[\"Node[]\"]\n    Workflow --\u003e Interface[\"TypedInterface\"]\n    Workflow --\u003e Outputs[\"Binding[]\"]\n    \n    Nodes --\u003e TaskNode[\"TaskNode\"]\n    Nodes --\u003e WorkflowNode[\"WorkflowNode\"]\n    Nodes --\u003e BranchNode[\"BranchNode\"]\n    Nodes --\u003e ArrayNode[\"ArrayNode\"]\n    Nodes --\u003e GateNode[\"GateNode\"]\n    \n    TaskNode --\u003e TaskID[\"Identifier\\n(reference_id)\"]\n    WorkflowNode --\u003e WorkflowID[\"Identifier\\n(sub_workflow_ref)\"]\n    WorkflowNode --\u003e LaunchPlanID[\"Identifier\\n(launchplan_ref)\"]\n    \n    BranchNode --\u003e IfElse[\"IfElseBlock\"]\n    IfElse --\u003e Condition[\"BooleanExpression\"]\n    IfElse --\u003e ThenNode[\"Node\"]\n    IfElse --\u003e ElseNode[\"Node\"]\n    \n    ArrayNode --\u003e SubNode[\"Node\"]\n    ArrayNode --\u003e Parallelism[\"parallelism\"]\n    ArrayNode --\u003e MinSuccesses[\"min_successes\"]\n    \n    GateNode --\u003e ApproveCondition[\"ApproveCondition\"]\n    GateNode --\u003e SignalCondition[\"SignalCondition\"]\n    GateNode --\u003e SleepCondition[\"SleepCondition\"]\n```\n\nSources:\n- [flyteidl/protos/flyteidl/core/workflow.proto:75-283](flyteidl/protos/flyteidl/core/workflow.proto:75-283)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi:19-127](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi:19-127)\n- [flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts:16-166](flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts:16-166)\n\n## API Clients and Usage\n\nThe generated code enables the creation of type-safe clients in various languages:\n\n### REST API via Swagger\n\nThe Admin and Agent services expose REST APIs documented with Swagger/OpenAPI specifications. Key endpoints include:\n\n| Path | Method | Description |\n|------|--------|-------------|\n| `/api/v1/tasks` | POST | Create a task |\n| `/api/v1/workflows` | POST | Create a workflow |\n| `/api/v1/launch_plans` | POST | Create a launch plan |\n| `/api/v1/executions` | POST | Create an execution |\n| `/api/v1/projects/{id}/domains/{domain}/executions` | GET | List executions |\n| `/api/v1/data/executions/{id.project}/{id.domain}/{id.name}` | GET | Get execution data |\n| `/api/v1/agent/task` | POST | Create a task via Agent API |\n\nThe RESTful APIs follow a consistent pattern, mapping closely to the gRPC service definitions.\n\nSources:\n- [flyteidl/clients/go/assets/admin.swagger.json:18-723](flyteidl/clients/go/assets/admin.swagger.json:18-723)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:18-723](flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:18-723)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:18-441)\n\n## Conclusion\n\nFlyte's interface definitions provide a robust foundation for type-safe communication between components. The use of Protocol Buffers enables language-agnostic definitions that can generate idiomatic code in multiple languages. These interfaces facilitate the development of clients, plugins, and service implementations, ensuring consistency across the entire system.\n\nThe clear separation between core data types, admin entities, and service interfaces supports Flyte's modular architecture and allows for independent evolution of different components while maintaining backward compatibility.\n\nSources:\n- [flyteidl/protos/flyteidl/service/admin.proto:3-26](flyteidl/protos/flyteidl/service/admin.proto:3-26)\n- [flyteidl/protos/flyteidl/core/workflow.proto:3-17](flyteidl/protos/flyteidl/core/workflow.proto:3-17)"])</script><script>self.__next_f.push([1,"27:T3c32,"])</script><script>self.__next_f.push([1,"# FlyteIDL\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteidl/clients/go/assets/admin.swagger.json](flyteidl/clients/go/assets/admin.swagger.json)\n- [flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts](flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go)\n- [flyteidl/gen/pb-go/flyteidl/service/admin.pb.go](flyteidl/gen/pb-go/flyteidl/service/admin.pb.go)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json)\n- [flyteidl/gen/pb-js/flyteidl.d.ts](flyteidl/gen/pb-js/flyteidl.d.ts)\n- [flyteidl/gen/pb-js/flyteidl.js](flyteidl/gen/pb-js/flyteidl.js)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi)\n- [flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py](flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs](flyteidl/gen/pb_rust/flyteidl.core.rs)\n- [flyteidl/protos/flyteidl/core/workflow.proto](flyteidl/protos/flyteidl/core/workflow.proto)\n- [flyteidl/protos/flyteidl/service/admin.proto](flyteidl/protos/flyteidl/service/admin.proto)\n\n\u003c/details\u003e\n\n\n\nFlyteIDL is the Interface Definition Language that serves as the foundation for Flyte's service and data model definitions. It defines the core data structures, type system, and service interfaces that enable communication between the various components in the Flyte ecosystem. \n\nFlyteIDL uses Protocol Buffers (protobuf) to provide a language-agnostic way to specify interfaces and data structures, allowing automatic code generation in multiple programming languages (Go, Python, JavaScript, Rust, etc.). This enables seamless interoperability between different Flyte components regardless of their implementation language.\n\n## Purpose and Role\n\nFlyteIDL serves several critical purposes within the Flyte ecosystem:\n\n1. **Definition of core data structures** - Common types used across all Flyte components\n2. **Service interface specifications** - API contracts for services like FlyteAdmin\n3. **Cross-language compatibility** - Generated code in multiple languages\n4. **Data serialization standard** - Consistent encoding/decoding between components\n5. **Type safety** - Strong typing across system boundaries\n\n```mermaid\ngraph TD\n    subgraph \"FlyteIDL Components\"\n        CoreTypes[\"Core Types\"] --\u003e |Defines| DataModels[\"Data Models\"]\n        CoreTypes --\u003e |Defines| TypeSystem[\"Type System\"]\n        ServiceDefs[\"Service Definitions\"] --\u003e |Defines| APIs[\"Service APIs\"]\n        IDLProtos[\"Protobuf Definitions\"] --\u003e |Generate| GeneratedCode[\"Generated Code\"]\n    end\n\n    subgraph \"Consumers\"\n        FlyteAdmin[\"FlyteAdmin\"]\n        FlytePropeller[\"FlytePropeller\"]\n        FlyteConsole[\"FlyteConsole UI\"]\n        FlyteSDKs[\"Python/Java/Scala SDKs\"]\n        FlytePlugins[\"Flyte Plugins\"]\n    end\n\n    DataModels --\u003e FlyteAdmin\n    DataModels --\u003e FlytePropeller\n    TypeSystem --\u003e FlyteSDKs\n    TypeSystem --\u003e FlytePlugins\n    APIs --\u003e FlyteAdmin\n    APIs --\u003e FlyteConsole\n    GeneratedCode --\u003e FlyteAdmin\n    GeneratedCode --\u003e FlytePropeller\n    GeneratedCode --\u003e FlyteConsole\n    GeneratedCode --\u003e FlyteSDKs\n```\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.js:16-26]()\n- [flyteidl/gen/pb-js/flyteidl.d.ts:2-6]()\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:1-20]()\n\n## Core Structure of FlyteIDL\n\nFlyteIDL is organized into several key namespaces:\n\n| Namespace | Purpose | Key Components |\n|-----------|---------|----------------|\n| `flyteidl.core` | Core data structures | Types, Literals, Workflows, Tasks |\n| `flyteidl.admin` | Admin service entities | Projects, Executions, Resources |\n| `flyteidl.service` | Service definitions | AdminService, DataCatalog service |\n\n```mermaid\ngraph TD\n    flyteidl[\"flyteidl\"]\n    flyteidl --\u003e flyteidl_core[\"flyteidl.core\"]\n    flyteidl --\u003e flyteidl_admin[\"flyteidl.admin\"]\n    flyteidl --\u003e flyteidl_service[\"flyteidl.service\"]\n    \n    subgraph \"Core Types\"\n        flyteidl_core --\u003e Literals[\"Literals\"]\n        flyteidl_core --\u003e Tasks[\"Tasks\"]\n        flyteidl_core --\u003e Workflows[\"Workflows\"]\n        flyteidl_core --\u003e Types[\"Type System\"]\n    end\n    \n    subgraph \"Admin Types\"\n        flyteidl_admin --\u003e Projects[\"Projects\"]\n        flyteidl_admin --\u003e Executions[\"Executions\"]\n        flyteidl_admin --\u003e LaunchPlans[\"Launch Plans\"]\n    end\n    \n    subgraph \"Service Interfaces\"\n        flyteidl_service --\u003e AdminService[\"Admin Service\"]\n        flyteidl_service --\u003e AgentService[\"Agent Service\"]\n    end\n```\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.d.ts:2-6]()\n- [flyteidl/gen/pb-js/flyteidl.js:28-33]()\n- [flyteidl/protos/flyteidl/service/admin.proto:1-10]()\n\n## Type System\n\nFlyteIDL defines a comprehensive type system that forms the foundation of Flyte's data model. The type system enables strong typing across the platform.\n\n### Simple Types\n\nThe `SimpleType` enum defines primitive types that can be used throughout the system:\n\n```mermaid\nclassDiagram\n    class SimpleType {\n        \u003c\u003cenumeration\u003e\u003e\n        NONE\n        INTEGER\n        FLOAT\n        STRING\n        BOOLEAN\n        DATETIME\n        DURATION\n        BINARY\n        ERROR\n        STRUCT\n    }\n```\n\nSources:\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:296-327]()\n\n### Literal Types\n\nThe `LiteralType` message defines the complete type system, combining simple types with complex types:\n\n```mermaid\nclassDiagram\n    class LiteralType {\n        metadata: Struct\n        annotation: TypeAnnotation\n        structure: TypeStructure\n        type: oneof{\n            SimpleType simple\n            SchemaType schema\n            LiteralType collection_type\n            LiteralType map_value_type\n            BlobType blob\n            EnumType enum_type\n            StructuredDatasetType structured_dataset_type\n            UnionType union_type\n        }\n    }\n    \n    class SimpleType {\n        \u003c\u003cenumeration\u003e\u003e\n    }\n    \n    class SchemaType {\n        columns: SchemaColumn[]\n    }\n    \n    class BlobType {\n        format: string\n        dimensionality: BlobDimensionality\n    }\n    \n    class StructuredDatasetType {\n        columns: DatasetColumn[]\n        format: string\n        external_schema_type: string\n        external_schema_bytes: bytes\n    }\n    \n    class UnionType {\n        variants: LiteralType[]\n    }\n    \n    LiteralType --\u003e SimpleType: simple\n    LiteralType --\u003e SchemaType: schema\n    LiteralType --\u003e LiteralType: collection_type\n    LiteralType --\u003e LiteralType: map_value_type\n    LiteralType --\u003e BlobType: blob\n    LiteralType --\u003e StructuredDatasetType: structured_dataset_type\n    LiteralType --\u003e UnionType: union_type\n```\n\nSources:\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:193-241]()\n- [flyteidl/gen/pb-js/flyteidl.d.ts:160-216]()\n\n## Core Data Structures\n\n### Artifacts and Identifiers\n\nFlyteIDL defines various identifier structures used to uniquely identify resources throughout the system:\n\n```mermaid\nclassDiagram\n    class ArtifactKey {\n        project: string\n        domain: string\n        name: string\n        org: string\n    }\n    \n    class Identifier {\n        resourceType: ResourceType\n        project: string\n        domain: string\n        name: string\n        version: string\n        org: string\n    }\n    \n    class WorkflowExecutionIdentifier {\n        project: string\n        domain: string\n        name: string\n        org: string\n    }\n    \n    class ResourceType {\n        \u003c\u003cenumeration\u003e\u003e\n        UNSPECIFIED\n        TASK\n        WORKFLOW\n        LAUNCH_PLAN\n        DATASET\n    }\n    \n    Identifier --\u003e ResourceType\n```\n\nSources:\n- [flyteidl/gen/pb-js/flyteidl.d.ts:9-85]()\n- [flyteidl/gen/pb-js/flyteidl.d.ts:706-763]()\n\n### Workflow Structures\n\nFlyteIDL defines the core structure of workflows, including nodes, tasks, and their relationships:\n\n```mermaid\nclassDiagram\n    class Node {\n        id: string\n        metadata: NodeMetadata\n        inputs: Binding[]\n        upstream_node_ids: string[]\n        output_aliases: Alias[]\n        target: oneof{\n            TaskNode task_node\n            WorkflowNode workflow_node\n            BranchNode branch_node\n            GateNode gate_node\n            ArrayNode array_node\n        }\n    }\n    \n    class TaskNode {\n        reference: oneof{\n            Identifier reference_id\n        }\n        overrides: TaskNodeOverrides\n    }\n    \n    class WorkflowNode {\n        reference: oneof{\n            Identifier launchplan_ref\n            Identifier sub_workflow_ref\n        }\n    }\n    \n    class BranchNode {\n        if_else: IfElseBlock\n    }\n    \n    class WorkflowTemplate {\n        id: Identifier\n        metadata: WorkflowMetadata\n        interface: TypedInterface\n        nodes: Node[]\n        outputs: Binding[]\n        failure_node: Node\n        metadata_defaults: WorkflowMetadataDefaults\n    }\n    \n    Node --\u003e TaskNode\n    Node --\u003e WorkflowNode\n    Node --\u003e BranchNode\n    WorkflowTemplate --\u003e Node: nodes\n```\n\nSources:\n- [flyteidl/protos/flyteidl/core/workflow.proto:18-290]()\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:25-393]()\n\n## Code Generation Process\n\nFlyteIDL follows the Protocol Buffer code generation process to create language-specific bindings from the `.proto` definitions.\n\n```mermaid\nflowchart LR\n    ProtoFiles[\"Proto Files (.proto)\"] --\u003e |\"protoc\"| CodeGen[\"Protobuf Compiler\"]\n    CodeGen --\u003e GoCode[\"Go Code (.pb.go)\"]\n    CodeGen --\u003e PythonCode[\"Python Code (_pb2.py)\"]\n    CodeGen --\u003e JavaScriptCode[\"JavaScript Code (.js)\"]\n    CodeGen --\u003e TypeScriptDefs[\"TypeScript Definitions (.d.ts)\"]\n    CodeGen --\u003e RustCode[\"Rust Code (.rs)\"]\n    \n    subgraph \"Client Libraries\"\n        GoCode --\u003e GoClient[\"Go Client\"]\n        PythonCode --\u003e PythonClient[\"Python Client\"]\n        JavaScriptCode --\u003e WebClient[\"Web Client\"]\n        TypeScriptDefs --\u003e TypeScriptClient[\"TypeScript Client\"]\n        RustCode --\u003e RustClient[\"Rust Client\"]\n    end\n    \n    subgraph \"Service Implementations\"\n        GoCode --\u003e AdminService[\"Admin Service\"]\n        GoCode --\u003e PropellerService[\"Propeller Service\"]\n    end\n```\n\nSources:\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go:1-6]()\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py:1-26]()\n- [flyteidl/gen/pb-js/flyteidl.js:1-14]()\n- [flyteidl/gen/pb_rust/flyteidl.core.rs:1-5]()\n\n## Service Definitions\n\nFlyteIDL defines the service interfaces that various Flyte components implement. The most important is the Admin Service interface:\n\n```mermaid\nclassDiagram\n    class AdminService {\n        CreateTask(TaskCreateRequest) TaskCreateResponse\n        GetTask(ObjectGetRequest) Task\n        ListTasks(ResourceListRequest) TaskList\n        CreateWorkflow(WorkflowCreateRequest) WorkflowCreateResponse\n        GetWorkflow(ObjectGetRequest) Workflow\n        ListWorkflows(ResourceListRequest) WorkflowList\n        CreateLaunchPlan(LaunchPlanCreateRequest) LaunchPlanCreateResponse\n        GetLaunchPlan(ObjectGetRequest) LaunchPlan\n        GetActiveLaunchPlan(ActiveLaunchPlanRequest) LaunchPlan\n        ListActiveLaunchPlans(ActiveLaunchPlanListRequest) LaunchPlanList\n        ListLaunchPlans(ResourceListRequest) LaunchPlanList\n        CreateExecution(ExecutionCreateRequest) ExecutionCreateResponse\n        RelaunchExecution(ExecutionRelaunchRequest) ExecutionCreateResponse\n        GetExecution(WorkflowExecutionGetRequest) Execution\n        GetExecutionData(WorkflowExecutionGetDataRequest) WorkflowExecutionGetDataResponse\n        ListExecutions(ResourceListRequest) ExecutionList\n        TerminateExecution(ExecutionTerminateRequest) ExecutionTerminateResponse\n        GetNodeExecution(NodeExecutionGetRequest) NodeExecution\n        ListNodeExecutions(NodeExecutionListRequest) NodeExecutionList\n        GetNodeExecutionData(NodeExecutionGetDataRequest) NodeExecutionGetDataResponse\n        GetTaskExecution(TaskExecutionGetRequest) TaskExecution\n        ListTaskExecutions(TaskExecutionListRequest) TaskExecutionList\n        GetTaskExecutionData(TaskExecutionGetDataRequest) TaskExecutionGetDataResponse\n    }\n```\n\nSources:\n- [flyteidl/protos/flyteidl/service/admin.proto:25-521]()\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:18-722]()\n\n## Using FlyteIDL for Development\n\nFlyteIDL plays a key role in several development scenarios:\n\n### For Plugin Developers\n\nPlugin developers use FlyteIDL to:\n1. Understand the data types that will be passed to plugins\n2. Implement the plugin interfaces defined in FlyteIDL\n3. Serialize/deserialize data in the expected format\n\n### For Flyte Contributors\n\nContributors to the core Flyte platform use FlyteIDL to:\n1. Define new service interfaces or extend existing ones\n2. Add new data types and structures\n3. Ensure backward compatibility when making changes\n\n### For Flyte Users\n\nWhile end users don't interact directly with FlyteIDL, they benefit from:\n1. Type safety provided by the IDL\n2. Consistent behavior across different Flyte components\n3. The ability to use Flyte from multiple programming languages\n\n## FlyteIDL in the Flyte Architecture\n\nFlyteIDL serves as the foundation for communication between all Flyte components:\n\n```mermaid\ngraph TD\n    Client[\"Client Applications\"] --\u003e |\"Uses Generated SDK\"| FlyteIDL\n\n    subgraph \"Flyte Platform\"\n        FlyteIDL[\"FlyteIDL (Interface Definitions)\"]\n        FlyteIDL --\u003e |\"Defines interfaces for\"| FlyteAdmin[\"FlyteAdmin\"]\n        FlyteIDL --\u003e |\"Defines data model for\"| FlytePropeller[\"FlytePropeller\"]\n        FlyteIDL --\u003e |\"Defines entity types for\"| DataCatalog[\"DataCatalog\"]\n        FlyteIDL --\u003e |\"Defines service API for\"| FlyteConsole[\"FlyteConsole\"]\n        FlyteIDL --\u003e |\"Defines CLI interfaces for\"| FlyteCtl[\"flytectl CLI\"]\n        \n        FlyteAdmin --\u003e |\"Creates\"| FlytePropeller\n        FlytePropeller --\u003e |\"Reports to\"| FlyteAdmin\n        DataCatalog --\u003e |\"Registers with\"| FlyteAdmin\n        FlyteConsole --\u003e |\"Communicates with\"| FlyteAdmin\n        FlyteCtl --\u003e |\"Communicates with\"| FlyteAdmin\n    end\n    \n    subgraph \"External Systems\"\n        FlytePropeller --\u003e |\"Executes on\"| Kubernetes[\"Kubernetes\"]\n        DataCatalog --\u003e |\"Stores in\"| ObjectStore[\"Object Storage\"]\n        FlyteAdmin --\u003e |\"Persists in\"| Database[\"Database\"]\n    end\n```\n\nSources:\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:18-722]()\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json:9-22]()\n\n## Conclusion\n\nFlyteIDL is a foundational component of the Flyte ecosystem that:\n\n1. Defines the data model and type system for the entire platform\n2. Specifies service interfaces that components implement\n3. Enables cross-language compatibility through code generation\n4. Provides a stable contract between different Flyte components\n\nBy using Protocol Buffers, FlyteIDL ensures that Flyte components can communicate regardless of their implementation language, making the system truly extensible and maintainable."])</script><script>self.__next_f.push([1,"28:T4a52,"])</script><script>self.__next_f.push([1,"# Admin Service\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [flyteadmin/cmd/scheduler/entrypoints/scheduler.go](flyteadmin/cmd/scheduler/entrypoints/scheduler.go)\n- [flyteadmin/pkg/manager/impl/execution_manager.go](flyteadmin/pkg/manager/impl/execution_manager.go)\n- [flyteadmin/pkg/manager/impl/execution_manager_test.go](flyteadmin/pkg/manager/impl/execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager.go](flyteadmin/pkg/manager/impl/node_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/node_execution_manager_test.go](flyteadmin/pkg/manager/impl/node_execution_manager_test.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager.go](flyteadmin/pkg/manager/impl/task_execution_manager.go)\n- [flyteadmin/pkg/manager/impl/task_execution_manager_test.go](flyteadmin/pkg/manager/impl/task_execution_manager_test.go)\n- [flyteadmin/pkg/repositories/config/migrations.go](flyteadmin/pkg/repositories/config/migrations.go)\n- [flyteadmin/pkg/repositories/config/migrations_test.go](flyteadmin/pkg/repositories/config/migrations_test.go)\n- [flyteadmin/pkg/repositories/models/execution.go](flyteadmin/pkg/repositories/models/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution.go](flyteadmin/pkg/repositories/transformers/execution.go)\n- [flyteadmin/pkg/repositories/transformers/execution_test.go](flyteadmin/pkg/repositories/transformers/execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution.go](flyteadmin/pkg/repositories/transformers/node_execution.go)\n- [flyteadmin/pkg/repositories/transformers/node_execution_test.go](flyteadmin/pkg/repositories/transformers/node_execution_test.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution.go](flyteadmin/pkg/repositories/transformers/task_execution.go)\n- [flyteadmin/pkg/repositories/transformers/task_execution_test.go](flyteadmin/pkg/repositories/transformers/task_execution_test.go)\n- [flyteadmin/pkg/rpc/adminservice/base.go](flyteadmin/pkg/rpc/adminservice/base.go)\n- [flyteadmin/pkg/runtime/application_config_provider.go](flyteadmin/pkg/runtime/application_config_provider.go)\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go](flyteadmin/pkg/runtime/interfaces/application_configuration.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor.go](flyteadmin/pkg/workflowengine/impl/k8s_executor.go)\n- [flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go](flyteadmin/pkg/workflowengine/impl/k8s_executor_test.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution.go](flyteadmin/pkg/workflowengine/impl/prepare_execution.go)\n- [flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go](flyteadmin/pkg/workflowengine/impl/prepare_execution_test.go)\n- [flyteadmin/pkg/workflowengine/interfaces/executor.go](flyteadmin/pkg/workflowengine/interfaces/executor.go)\n- [flyteidl/clients/go/assets/admin.swagger.json](flyteidl/clients/go/assets/admin.swagger.json)\n- [flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts](flyteidl/gen/pb-es/flyteidl/core/workflow_pb.ts)\n- [flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go](flyteidl/gen/pb-go/flyteidl/core/workflow.pb.go)\n- [flyteidl/gen/pb-go/flyteidl/service/admin.pb.go](flyteidl/gen/pb-go/flyteidl/service/admin.pb.go)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/agent.swagger.json)\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json](flyteidl/gen/pb-go/gateway/flyteidl/service/external_plugin_service.swagger.json)\n- [flyteidl/gen/pb-js/flyteidl.d.ts](flyteidl/gen/pb-js/flyteidl.d.ts)\n- [flyteidl/gen/pb-js/flyteidl.js](flyteidl/gen/pb-js/flyteidl.js)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.py)\n- [flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi](flyteidl/gen/pb_python/flyteidl/core/workflow_pb2.pyi)\n- [flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py](flyteidl/gen/pb_python/flyteidl/service/admin_pb2.py)\n- [flyteidl/gen/pb_rust/flyteidl.core.rs](flyteidl/gen/pb_rust/flyteidl.core.rs)\n- [flyteidl/protos/flyteidl/core/workflow.proto](flyteidl/protos/flyteidl/core/workflow.proto)\n- [flyteidl/protos/flyteidl/service/admin.proto](flyteidl/protos/flyteidl/service/admin.proto)\n- [flyteplugins/go/tasks/plugins/array/k8s/subtask.go](flyteplugins/go/tasks/plugins/array/k8s/subtask.go)\n\n\u003c/details\u003e\n\n\n\nThe Admin Service is a critical component in the Flyte control plane that serves as the centralized management API for all Flyte workflow-related operations. It provides a comprehensive set of endpoints for creating, monitoring, and managing workflows, tasks, executions, launch plans, and other core Flyte entities.\n\n## Purpose and Scope\n\nThis page documents the Admin Service architecture, its internal components, API capabilities, and how it interacts with other components of the Flyte system. For information about the workflow execution engine itself, see [Workflow Execution Engine](#3), and for FlyteIDL specification details, see [FlyteIDL](#5.1).\n\n## System Architecture\n\nThe Admin Service serves as the central API gateway for Flyte, handling client requests from the CLI, UI, and SDKs while interacting with various backend services and data stores.\n\n```mermaid\ngraph TD\n    subgraph \"Clients\"\n        UI[\"FlyteConsole UI\"]\n        CLI[\"flytectl CLI\"]\n        SDK[\"Flyte SDKs\"]\n    end\n\n    subgraph \"FlyteAdmin Service\"\n        AS[\"AdminService\"] --\u003e |\"Manages\"| EM[\"ExecutionManager\"]\n        AS --\u003e |\"Manages\"| WM[\"WorkflowManager\"]\n        AS --\u003e |\"Manages\"| LPM[\"LaunchPlanManager\"]\n        AS --\u003e |\"Manages\"| TM[\"TaskManager\"]\n        AS --\u003e |\"Manages\"| PM[\"ProjectManager\"]\n        AS --\u003e |\"Manages\"| NEM[\"NodeExecutionManager\"]\n        AS --\u003e |\"Manages\"| TEM[\"TaskExecutionManager\"]\n        AS --\u003e |\"Manages\"| RM[\"ResourceManager\"]\n    end\n\n    subgraph \"Storage \u0026 Database\"\n        DB[(Database)]\n        ObjStore[(Object Storage)]\n    end\n\n    subgraph \"Execution\"\n        Propeller[\"FlytePropeller\"]\n    end\n\n    UI --\u003e |\"API Requests\"| AS\n    CLI --\u003e |\"API Requests\"| AS\n    SDK --\u003e |\"API Requests\"| AS\n    \n    EM --\u003e |\"CRUD Operations\"| DB\n    WM --\u003e |\"CRUD Operations\"| DB\n    LPM --\u003e |\"CRUD Operations\"| DB\n    TM --\u003e |\"CRUD Operations\"| DB\n    PM --\u003e |\"CRUD Operations\"| DB\n    NEM --\u003e |\"CRUD Operations\"| DB\n    TEM --\u003e |\"CRUD Operations\"| DB\n    RM --\u003e |\"CRUD Operations\"| DB\n    \n    EM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    WM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    LPM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    TM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    NEM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    TEM --\u003e |\"Store/Retrieve Data\"| ObjStore\n    \n    EM --\u003e |\"Submit Executions\"| Propeller\n    Propeller --\u003e |\"Status Updates\"| EM\n```\n\nSources:\n- [flyteadmin/pkg/rpc/adminservice/base.go:29-44]()\n- [flyteadmin/pkg/rpc/adminservice/base.go:48-86]()\n- [flyteadmin/pkg/manager/impl/execution_manager.go:75-93]()\n\n## Core Components\n\nThe Admin Service is built around a set of specialized managers, each handling different aspects of workflow management.\n\n### AdminService\n\nThe primary service interface that handles gRPC and HTTP requests. It coordinates all operations by delegating to appropriate managers.\n\n```go\ntype AdminService struct {\n    TaskManager              interfaces.TaskInterface\n    WorkflowManager          interfaces.WorkflowInterface\n    LaunchPlanManager        interfaces.LaunchPlanInterface\n    ExecutionManager         interfaces.ExecutionInterface\n    NodeExecutionManager     interfaces.NodeExecutionInterface\n    TaskExecutionManager     interfaces.TaskExecutionInterface\n    ProjectManager           interfaces.ProjectInterface\n    ResourceManager          interfaces.ResourceInterface\n    NamedEntityManager       interfaces.NamedEntityInterface\n    VersionManager           interfaces.VersionInterface\n    DescriptionEntityManager interfaces.DescriptionEntityInterface\n    MetricsManager           interfaces.MetricsInterface\n}\n```\n\nSources:\n- [flyteadmin/pkg/rpc/adminservice/base.go:29-44]()\n\n### ExecutionManager\n\nHandles the creation, monitoring, and management of workflow executions. This component is responsible for:\n- Creating new executions based on client requests\n- Transforming execution models to and from database representations\n- Tracking execution status and handling state transitions\n- Retrieving execution data and metadata\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:75-93]()\n- [flyteadmin/pkg/repositories/transformers/execution.go:30-53]()\n\n### Database Interface\n\nThe Admin Service uses a repository pattern to abstract database operations, supporting multiple backend databases (e.g., Postgres, SQLite).\n\nSources:\n- [flyteadmin/pkg/repositories/config/migrations.go:19-24]()\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go:22-38]()\n\n## Execution Flow\n\nThe following sequence diagram illustrates how the Admin Service handles workflow execution creation:\n\n```mermaid\nsequenceDiagram\n    participant Client\n    participant AdminService\n    participant ExecutionManager\n    participant Repository\n    participant ObjectStore\n    participant FlytePropeller\n\n    Client-\u003e\u003eAdminService: CreateExecution Request\n    AdminService-\u003e\u003eExecutionManager: CreateExecution\n    \n    ExecutionManager-\u003e\u003eRepository: Get LaunchPlan/Workflow\n    Repository--\u003e\u003eExecutionManager: LaunchPlan/Workflow Data\n    \n    ExecutionManager-\u003e\u003eExecutionManager: Validate Inputs\n    ExecutionManager-\u003e\u003eObjectStore: Offload Inputs\n    ObjectStore--\u003e\u003eExecutionManager: Input URIs\n    \n    ExecutionManager-\u003e\u003eRepository: Create Execution Record\n    Repository--\u003e\u003eExecutionManager: Execution ID\n    \n    ExecutionManager-\u003e\u003eFlytePropeller: Submit Execution\n    FlytePropeller--\u003e\u003eExecutionManager: Acknowledge\n    \n    ExecutionManager--\u003e\u003eAdminService: Execution Response\n    AdminService--\u003e\u003eClient: Execution Created\n```\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:450-630]()\n- [flyteadmin/pkg/manager/impl/execution_manager_test.go:302-412]()\n\n## Data Model\n\nThe Admin Service manages several key entities that are persisted in the database and transformed into API representations.\n\n### Core Entities\n\n```mermaid\nclassDiagram\n    class Execution {\n        +ExecutionKey key\n        +Spec spec\n        +Phase phase\n        +Closure closure\n        +LaunchPlanID uint\n        +WorkflowID uint\n        +TaskID uint\n        +Cluster string\n        +InputsURI storage.DataReference\n        +OutputsURI storage.DataReference\n    }\n\n    class NodeExecution {\n        +NodeExecutionKey key\n        +Phase phase\n        +InputURI string\n        +Closure closure\n        +StartedAt time\n        +Duration time.Duration\n    }\n\n    class TaskExecution {\n        +TaskExecutionKey key\n        +Phase phase\n        +InputURI string\n        +Closure closure\n        +StartedAt time\n    }\n\n    class Workflow {\n        +WorkflowKey key\n        +TypedInterface bytes\n        +RemoteClosureIdentifier string\n        +Digest bytes\n    }\n\n    class LaunchPlan {\n        +LaunchPlanKey key\n        +Spec bytes\n        +Closure bytes\n        +State int\n    }\n\n    class Task {\n        +TaskKey key\n        +Closure bytes\n        +Digest bytes\n        +Type string\n    }\n\n    Execution --\u003e NodeExecution : has many\n    NodeExecution --\u003e TaskExecution : has many\n    Execution --\u003e Workflow : references\n    Execution --\u003e LaunchPlan : references\n    Execution --\u003e Task : references\n```\n\nSources:\n- [flyteadmin/pkg/repositories/transformers/execution.go:30-53]()\n- [flyteadmin/pkg/repositories/transformers/node_execution.go:22-29]()\n- [flyteadmin/pkg/repositories/transformers/task_execution.go:30-34]()\n\n## API Overview\n\nThe Admin Service exposes a comprehensive set of gRPC and HTTP endpoints for interacting with Flyte resources. The major API categories include:\n\n### Workflow Management\n- Create, retrieve, and list workflows\n- Register and version workflows\n\n### Task Management\n- Create, retrieve, and list tasks\n- Register and version tasks\n\n### Launch Plan Management\n- Create, retrieve, and list launch plans\n- Activate/deactivate launch plans\n\n### Execution Management\n- Create new workflow executions\n- Retrieve execution status and details\n- List executions with filtering\n- Terminate running executions\n- Retrieve execution data (inputs/outputs)\n\n### Node Execution Management\n- Retrieve node execution details\n- List node executions\n- Retrieve node execution data\n\n### Task Execution Management\n- Retrieve task execution details\n- List task executions\n- Retrieve task execution data\n\n### Project Management\n- Create and manage projects\n- Register domain resources\n\nSources:\n- [flyteidl/clients/go/assets/admin.swagger.json:19-535]()\n- [flyteidl/gen/pb-go/gateway/flyteidl/service/admin.swagger.json:19-310]()\n\n## Data Flow Between Components\n\n```mermaid\nflowchart TD\n    subgraph \"Client Requests\"\n        CR1[\"Create Execution\"]\n        CR2[\"List Workflows\"]\n        CR3[\"Get Execution Data\"]\n    end\n\n    subgraph \"AdminService\"\n        AS[\"Request Router\"]\n    end\n\n    subgraph \"Managers\"\n        EM[\"ExecutionManager\"]\n        WM[\"WorkflowManager\"]\n        LPM[\"LaunchPlanManager\"]\n        TM[\"TaskManager\"]\n        NEM[\"NodeExecutionManager\"]\n        TEM[\"TaskExecutionManager\"]\n    end\n\n    subgraph \"Data Layer\"\n        TR[\"Transformers\"]\n        REPO[\"Repository\"]\n        OS[\"Object Storage\"]\n    end\n\n    subgraph \"External Components\"\n        FP[\"FlytePropeller\"]\n        NOTIF[\"Notification System\"]\n    end\n\n    CR1 --\u003e AS\n    CR2 --\u003e AS\n    CR3 --\u003e AS\n\n    AS --\u003e EM\n    AS --\u003e WM\n    AS --\u003e LPM\n    AS --\u003e TM\n    AS --\u003e NEM\n    AS --\u003e TEM\n\n    EM --\u003e TR\n    WM --\u003e TR\n    LPM --\u003e TR\n    TM --\u003e TR\n    NEM --\u003e TR\n    TEM --\u003e TR\n\n    TR --\u003e REPO\n    TR --\u003e OS\n\n    EM --\u003e FP\n    EM --\u003e NOTIF\n```\n\nSources:\n- [flyteadmin/pkg/rpc/adminservice/base.go:48-86]()\n- [flyteadmin/pkg/manager/impl/execution_manager.go:100-174]()\n- [flyteadmin/pkg/repositories/transformers/execution.go:61-148]()\n\n## Configuration\n\nThe Admin Service can be configured through several configuration objects:\n\n### Application Configuration\n\nControls the base behavior of the Admin Service including metrics, roles, event handling, and default workflow behaviors.\n\n```go\ntype ApplicationConfig struct {\n    RoleNameKey string\n    MetricsScope string\n    MetricKeys []string\n    ProfilerPort int\n    MetadataStoragePrefix []string\n    EventVersion int\n    AsyncEventsBufferSize int\n    MaxParallelism int32\n    Labels map[string]string\n    Annotations map[string]string\n    Interruptible bool\n    OverwriteCache bool\n    AssumableIamRole string\n    K8SServiceAccount string\n    OutputLocationPrefix string\n    UseOffloadedWorkflowClosure bool\n    Envs map[string]string\n    FeatureGates FeatureGates\n    ConsoleURL string\n    UseOffloadedInputs bool\n}\n```\n\nSources:\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go:62-118]()\n- [flyteadmin/pkg/runtime/application_config_provider.go:23-37]()\n\n### Database Configuration\n\nConfigures the database connection used by the Admin Service.\n\n```go\ntype DbConfig struct {\n    EnableForeignKeyConstraintWhenMigrating bool\n    MaxIdleConnections int\n    MaxOpenConnections int\n    ConnMaxLifeTime config.Duration\n    PostgresConfig *PostgresConfig\n    SQLiteConfig *SQLiteConfig\n}\n```\n\nSources:\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go:22-38]()\n\n## Security\n\nThe Admin Service supports security features including:\n\n- Authentication via various providers\n- Authorization with role-based access control\n- Identity propagation for executions\n- Security contexts for execution isolation\n\nSecurity contexts can be defined at various levels:\n- Execution level\n- Launch plan level\n- Project/domain level\n- System-wide defaults\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:371-397]()\n- [flyteadmin/pkg/runtime/interfaces/application_configuration.go:98-101]()\n\n## Integration with External Systems\n\nThe Admin Service integrates with various external systems:\n\n### Storage Systems\n- Object storage for inputs/outputs and workflow closures\n- Database for metadata and state\n\n### Notification Systems\n- Support for email, Slack, and other notification channels\n- Event publishing to Kafka and other message buses\n\n### CloudEvents\n- Publishing workflow events to CloudEvents-compatible systems\n\nSources:\n- [flyteadmin/pkg/rpc/adminservice/base.go:86-87]()\n- [flyteadmin/pkg/manager/impl/execution_manager.go:89-91]()\n\n## Workflow Execution Creation\n\nCreating a workflow execution is one of the most complex operations handled by the Admin Service. It involves:\n\n1. Validating the launch plan and inputs\n2. Resolving execution configuration (defaults, overrides)\n3. Offloading inputs to object storage\n4. Creating the execution record\n5. Submitting the execution to FlytePropeller\n6. Publishing events and notifications\n\n```mermaid\ngraph TD\n    Start[Client Request] --\u003e ValidateInputs[Validate Inputs]\n    ValidateInputs --\u003e ResolveConfig[Resolve Execution Config]\n    ResolveConfig --\u003e AssignResources[Assign Task Resources]\n    AssignResources --\u003e AssignQueues[Assign Execution Queues]\n    AssignQueues --\u003e OffloadInputs[Offload Inputs]\n    OffloadInputs --\u003e CreateRecord[Create Execution Record]\n    CreateRecord --\u003e SubmitExecution[Submit to FlytePropeller]\n    SubmitExecution --\u003e PublishEvents[Publish Events]\n    PublishEvents --\u003e End[Return Response]\n```\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:450-630]()\n- [flyteadmin/pkg/manager/impl/execution_manager_test.go:302-412]()\n\n## Error Handling\n\nThe Admin Service uses a standardized error handling approach:\n\n- gRPC status codes for API errors\n- Structured error objects with codes, messages, and kind (system vs. user)\n- Error propagation from the database layer through transformers to the API\n- Error metrics for monitoring\n\nSources:\n- [flyteadmin/pkg/repositories/transformers/execution.go:88-104]()\n- [flyteadmin/pkg/manager/impl/execution_manager.go:74-78]()\n\n## Metrics and Monitoring\n\nThe Admin Service exposes various metrics for monitoring:\n\n- Active executions counter\n- Execution creation/termination rates\n- Execution latency histograms\n- Error counters by type\n- System resource usage\n\nSources:\n- [flyteadmin/pkg/manager/impl/execution_manager.go:50-65]()\n- [flyteadmin/pkg/manager/impl/execution_manager.go:67-73]()\n\n## Conclusion\n\nThe Admin Service is the central management component of the Flyte platform, providing a unified API for all workflow management operations. Its modular architecture allows for flexibility and extensibility while maintaining a consistent interface for clients. By handling the complex orchestration of workflow resources, the Admin Service enables users to focus on defining their workflows rather than managing infrastructure."])</script><script>self.__next_f.push([1,"29:T2c2e,"])</script><script>self.__next_f.push([1,"# Command Line Interface\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [README.md](README.md)\n- [flytectl/go.mod](flytectl/go.mod)\n- [flytectl/go.sum](flytectl/go.sum)\n\n\u003c/details\u003e\n\n\n\n## Overview\n\nThe Flyte Command Line Interface (CLI), known as `flytectl`, is the primary tool for interacting with Flyte from the terminal. It enables users to manage Flyte resources, execute workflows, and administer Flyte deployments. This document covers the purpose, installation, configuration, and usage of flytectl.\n\nSources: [README.md:84-85]()\n\n## Purpose and Scope\n\n`flytectl` serves as a bridge between users and the Flyte control plane, allowing interaction with Flyte resources via a command-line interface. It communicates with the FlyteAdmin service to perform operations like creating and managing workflows, tasks, launch plans, executions, and more. The CLI also provides utilities for local development, debugging, and administering Flyte deployments.\n\nIn the Flyte architecture, flytectl is one of the user-facing components alongside the Python/Java/Scala SDKs and the FlyteConsole UI.\n\n```mermaid\ngraph TD\n    User([User]) --\u003e |\"CLI commands\"| flytectl[\"flytectl CLI\"]\n    flytectl --\u003e |\"API calls\"| FlyteAdmin[\"FlyteAdmin API\"]\n    \n    subgraph \"Control Plane\"\n        FlyteAdmin\n        DataCatalog[\"DataCatalog\"]\n    end\n    \n    FlyteAdmin --\u003e |\"Manage resources\"| DB[(\"Database\")]\n    FlyteAdmin --\u003e |\"Create execution\"| FlytePropeller[\"FlytePropeller\"]\n    \n    style flytectl fill:#ddd,stroke:#333\n    style FlyteAdmin fill:#ddd,stroke:#333\n```\n\n*Figure: flytectl in the Flyte architecture*\n\nSources: [README.md:70-88]()\n\n## Installation\n\n### Using Homebrew (macOS/Linux)\n\n```bash\nbrew install flyteorg/homebrew-tap/flytectl\n```\n\n### Using Binary Releases\n\nPre-built binaries for various platforms are available on the [GitHub releases page](https://github.com/flyteorg/flyte/releases).\n\n### Verify Installation\n\nAfter installation, verify that flytectl is working correctly:\n\n```bash\nflytectl version\n```\n\nSources: [README.md:84-85]()\n\n## Command Structure\n\n`flytectl` follows a hierarchical command structure with the following general pattern:\n\n```\nflytectl [global-options] command [sub-command] [command-options] [arguments]\n```\n\n```mermaid\nflowchart TD\n    flytectl[\"flytectl\"] --\u003e config[\"config\"]\n    flytectl --\u003e create[\"create\"]\n    flytectl --\u003e delete[\"delete\"]\n    flytectl --\u003e get[\"get\"]\n    flytectl --\u003e register[\"register\"]\n    flytectl --\u003e update[\"update\"]\n    flytectl --\u003e demo[\"demo\"]\n    flytectl --\u003e sandbox[\"sandbox\"]\n    flytectl --\u003e version[\"version\"]\n    flytectl --\u003e completion[\"completion\"]\n    \n    create --\u003e create_project[\"project\"]\n    create --\u003e create_execution[\"execution\"]\n    create --\u003e create_task[\"task\"]\n    create --\u003e create_workflow[\"workflow\"]\n    create --\u003e create_launchplan[\"launchplan\"]\n    \n    get --\u003e get_execution[\"execution\"]\n    get --\u003e get_task[\"task\"]\n    get --\u003e get_workflow[\"workflow\"]\n    get --\u003e get_launchplan[\"launchplan\"]\n    get --\u003e get_project[\"project\"]\n    \n    register --\u003e register_files[\"files\"]\n    register --\u003e register_project[\"project\"]\n    \n    update --\u003e update_project[\"project\"]\n    update --\u003e update_launchplan[\"launchplan\"]\n    update --\u003e update_workflow[\"workflow\"]\n    \n    delete --\u003e delete_execution[\"execution\"]\n    delete --\u003e delete_task[\"task\"]\n    delete --\u003e delete_workflow[\"workflow\"]\n    delete --\u003e delete_launchplan[\"launchplan\"]\n    delete --\u003e delete_project[\"project\"]\n    \n    demo --\u003e start[\"start\"]\n    demo --\u003e exec[\"exec\"]\n    demo --\u003e teardown[\"teardown\"]\n```\n\n*Figure: High-level command structure of flytectl*\n\nSources: [flytectl/go.mod:1-201]()\n\n## Common Global Flags\n\n| Flag | Description |\n|------|-------------|\n| `--admin-endpoint` | FlyteAdmin service endpoint |\n| `--config` | Path to the config file |\n| `--project` | Flyte project to use |\n| `--domain` | Flyte domain to use |\n| `--output` | Output format (table, json, yaml) |\n| `--verbose` | Enable verbose logging |\n| `--quiet` | Disable all output except errors |\n\nSources: [flytectl/go.mod:32-47]()\n\n## Key Command Categories\n\n### Cluster Management\n\nThe `demo` and `sandbox` commands help in setting up and managing local Flyte deployments for development and testing purposes.\n\n```bash\n# Start a local Flyte sandbox\nflytectl demo start\n\n# Execute a command inside the sandbox\nflytectl demo exec -- ls -la\n\n# Tear down the sandbox\nflytectl demo teardown\n```\n\nSources: [README.md:84-85]()\n\n### Resource Management\n\n`flytectl` provides commands to create, get, update, and delete Flyte resources:\n\n#### Projects and Domains\n\nProjects are logical groupings of Flyte entities, while domains (like development, staging, production) help separate different environments within a project.\n\n```bash\n# Create a new project\nflytectl create project --id my-project --name \"My Project\" --description \"My new project\"\n\n# Get information about a project\nflytectl get project my-project\n\n# Update a project\nflytectl update project my-project --description \"Updated description\"\n```\n\n#### Workflows, Tasks, and Launch Plans\n\n```bash\n# Get workflow information\nflytectl get workflow --project flytesnacks --domain development my_workflow\n\n# Create a launch plan\nflytectl create launchplan --project flytesnacks --domain development \\\n    --workflow my_workflow --version v1 my_launch_plan\n\n# Register entities from a file\nflytectl register files --project flytesnacks --domain development \\\n    --archive workflow.tar.gz\n```\n\n#### Executions\n\n```bash\n# Create a workflow execution\nflytectl create execution --project flytesnacks --domain development \\\n    --launch-plan my_launch_plan --version v1\n\n# Get execution details\nflytectl get execution --project flytesnacks --domain development execution_id\n\n# Terminate a running execution\nflytectl delete execution --project flytesnacks --domain development execution_id\n```\n\nSources: [flytectl/go.mod:32-47]()\n\n## Authentication\n\n`flytectl` supports multiple authentication methods to connect with Flyte clusters:\n\n1. **Basic Authentication**: Using username and password\n2. **API Key Authentication**: Using client ID and client secret\n3. **OpenID Connect**: Using OIDC providers\n4. **Kubernetes Service Account**: When running within a Kubernetes cluster\n\nAuthentication settings can be configured in the flytectl config file or through environment variables.\n\nSources: [flytectl/go.mod:37-39]()\n\n## Configuration\n\n### Config File\n\n`flytectl` uses a configuration file (by default located at `~/.flyte/config.yaml`) to store settings. This file can be generated using the `flytectl config init` command.\n\nExample config file structure:\n\n```yaml\nadmin:\n  # FlyteAdmin service endpoint\n  endpoint: dns:///localhost:30081\n  # Authentication method\n  authType: Basic\n  # Insecure connection (disable TLS verification)\n  insecure: true\n\n# Default project and domain\nproject: flytesnacks\ndomain: development\n\n# Output format (json, yaml, or table)\noutput: table\n```\n\n### Environment Variables\n\nConfiguration can also be provided via environment variables, which take precedence over config file values:\n\n| Environment Variable | Description |\n|----------------------|-------------|\n| `FLYTECTL_ADMIN_ENDPOINT` | FlyteAdmin service endpoint |\n| `FLYTECTL_ADMIN_INSECURE` | Disable TLS verification |\n| `FLYTECTL_PROJECT` | Default project |\n| `FLYTECTL_DOMAIN` | Default domain |\n\nSources: [flytectl/go.mod:32-47]()\n\n## Data Flow and Integration\n\nThe following diagram illustrates how `flytectl` integrates with other components in the Flyte ecosystem:\n\n```mermaid\nsequenceDiagram\n    participant User\n    participant flytectl as \"flytectl CLI\"\n    participant FlyteAdmin\n    participant FlytePropeller\n    participant K8s as \"Kubernetes\"\n    \n    User-\u003e\u003eflytectl: Issue command\n    flytectl-\u003e\u003eFlyteAdmin: API request\n    \n    alt Resource Management\n        FlyteAdmin-\u003e\u003eFlyteAdmin: Process resource operation\n        FlyteAdmin--\u003e\u003eflytectl: Response\n        flytectl--\u003e\u003eUser: Display result\n    else Execution Management\n        FlyteAdmin-\u003e\u003eFlytePropeller: Create execution CRD\n        FlytePropeller-\u003e\u003eK8s: Create resources\n        FlytePropeller--\u003e\u003eFlyteAdmin: Status updates\n        FlyteAdmin--\u003e\u003eflytectl: Execution status\n        flytectl--\u003e\u003eUser: Display execution info\n    end\n```\n\n*Figure: Data flow between flytectl and Flyte components*\n\nSources: [flytectl/go.mod:16-18]()\n\n## Key Use Cases\n\n### Local Development\n\n```bash\n# Start a local sandbox\nflytectl demo start\n\n# Register local workflow code\nflytectl register files -p flytesnacks -d development --sourceDir ./my_workflows\n\n# Execute a workflow\nflytectl create execution -p flytesnacks -d development --lp my_workflow \n```\n\n### Production Deployment\n\n```bash\n# Configure connection to production Flyte cluster\nflytectl config use-context production\n\n# Create or update a project\nflytectl create project -p my-project --name \"Production Project\"\n\n# Register workflow from archive\nflytectl register files -p my-project -d production --archive ./workflows.tar.gz\n\n# Update a launch plan\nflytectl update launchplan -p my-project -d production --version v2 --activate my_launchplan\n```\n\n### Monitoring and Management\n\n```bash\n# Get executions for a project\nflytectl get execution -p my-project -d production\n\n# Get workflow execution details\nflytectl get execution -p my-project -d production execution_id\n\n# Terminate a running execution\nflytectl delete execution -p my-project -d production execution_id\n```\n\nSources: [README.md:84-85](), [flytectl/go.mod:32-47]()\n\n## Plugin Integration\n\n`flytectl` integrates with various plugins and extensions of the Flyte platform:\n\n```mermaid\ngraph TD\n    flytectl[\"flytectl CLI\"] --\u003e FlyteAdmin[\"FlyteAdmin\"]\n    \n    FlyteAdmin --\u003e ResourceManagement[\"Resource Management\"]\n    FlyteAdmin --\u003e ExecutionManagement[\"Execution Management\"]\n    \n    ResourceManagement --\u003e Projects[\"Projects\"]\n    ResourceManagement --\u003e Tasks[\"Tasks\"]\n    ResourceManagement --\u003e Workflows[\"Workflows\"]\n    ResourceManagement --\u003e LaunchPlans[\"Launch Plans\"]\n    \n    ExecutionManagement --\u003e Create[\"Create Executions\"]\n    ExecutionManagement --\u003e Monitor[\"Monitor Executions\"]\n    ExecutionManagement --\u003e Terminate[\"Terminate Executions\"]\n    \n    flytectl --\u003e PluginManagement[\"Plugin Management\"]\n    \n    PluginManagement --\u003e KubernetesPlugins[\"Kubernetes Plugins\"]\n    PluginManagement --\u003e WebAPIPlugins[\"WebAPI Plugins\"]\n    PluginManagement --\u003e MLPlugins[\"Machine Learning Plugins\"]\n    \n    style flytectl fill:#ddd,stroke:#333\n    style FlyteAdmin fill:#ddd,stroke:#333\n```\n\n*Figure: flytectl's role in plugin management*\n\nSources: [flytectl/go.mod:5-48]()\n\n## Conclusion\n\n`flytectl` is a powerful command-line tool for interacting with Flyte. It provides a comprehensive set of commands to manage Flyte resources and executions. Whether you're a developer working locally or an administrator managing a production deployment, `flytectl` offers the functionality needed to effectively work with Flyte.\n\nFor more detailed information about specific commands, check the official documentation or use the built-in help:\n\n```bash\nflytectl --help\nflytectl \u003ccommand\u003e --help\n```\n\nSources: [README.md:70-88](), [flytectl/go.mod:1-201]()"])</script><script>self.__next_f.push([1,"2a:T1e08,"])</script><script>self.__next_f.push([1,"# Development and Contribution\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Makefile](Makefile)\n\n\u003c/details\u003e\n\n\n\nThis page serves as a comprehensive guide for developers who want to contribute to the Flyte project. It covers the development environment setup, build processes, testing workflows, and contribution guidelines. For specific details about the build system, see [Build System](#7.1), and for CI/CD pipeline information, see [CI/CD Pipeline](#7.2).\n\n## Setting Up Development Environment\n\n### Prerequisites\n\nBefore you start contributing to Flyte, ensure you have the following prerequisites installed:\n\n- Go (recommended version 1.19+)\n- Docker\n- kubectl\n- Helm\n- Make\n- Git\n- Python 3.9+ (for documentation and some tooling)\n\n### Local Development Setup\n\nFlyte provides a convenient command to set up a local development environment:\n\n```bash\nmake setup_local_dev\n```\n\nThis command sets up a k3d cluster with all Flyte dependencies for local development.\n\nSources: [Makefile:115-117]()\n\n## Repository Structure\n\nThe Flyte repository is organized as a monorepo containing multiple components:\n\n```mermaid\ngraph TD\n    subgraph \"Flyte Repository Structure\"\n        root[\"flyte (root)\"] --\u003e admin[\"flyteadmin: Control plane API service\"]\n        root --\u003e propeller[\"flytepropeller: Workflow execution engine\"]\n        root --\u003e plugins[\"flyteplugins: Task execution plugins\"]\n        root --\u003e idl[\"flyteidl: Interface definition language\"]\n        root --\u003e console[\"flyteconsole: Web UI\"]\n        root --\u003e stdlib[\"flytestdlib: Shared libraries\"]\n        root --\u003e ctl[\"flytectl: CLI tool\"]\n        root --\u003e copilot[\"flytecopilot: Container sidecar\"]\n        root --\u003e catalog[\"datacatalog: Data versioning service\"]\n        root --\u003e doc[\"docs: Documentation\"]\n        root --\u003e charts[\"charts: Helm deployment charts\"]\n    end\n```\n\nSources: [Makefile:131-139]()\n\n## Build and Development Commands\n\nThe Makefile provides several useful commands for development:\n\n| Command | Description |\n|---------|-------------|\n| `make compile` | Builds the Flyte binary for local use |\n| `make linux_compile` | Builds the Flyte binary for Linux |\n| `make helm` | Generates Kubernetes manifests from Helm charts |\n| `make deploy_sandbox` | Deploys a sandbox environment |\n| `make go-tidy` | Runs go mod tidy across all modules |\n| `make docs` | Builds the documentation |\n| `make dev-docs` | Builds docs in a Docker container for local development |\n| `make help` | Lists all available make commands |\n| `make setup_local_dev` | Sets up k3d cluster with Flyte dependencies |\n| `make lint-helm-charts` | Validates Helm charts |\n| `make spellcheck` | Runs a spell checker on the codebase |\n\nSources: [Makefile:16-147]()\n\n## Development Workflow\n\n### Local Build Process\n\nThis diagram illustrates how the local build process works:\n\n```mermaid\nflowchart TD\n    subgraph \"Local Build Process\"\n        A[\"Developer makes changes\"] --\u003e B[\"make compile\"]\n        B --\u003e C[\"make go-tidy\"]\n        C --\u003e D[\"make test\"]\n        D --\u003e E[\"Local testing with sandbox\"]\n        E --\u003e F[\"Commit changes\"]\n    end\n```\n\nSources: [Makefile:16-25](), [Makefile:130-139]()\n\n### Component Development and Testing\n\nEach component in the Flyte ecosystem has its own build and test process. The following diagram illustrates how these components relate to each other during development:\n\n```mermaid\nflowchart TD\n    Developer[\"Developer\"] --\u003e|\"Modifies code in\"| Components\n\n    subgraph \"Components\"\n        Admin[\"flyteadmin\"]\n        Propeller[\"flytepropeller\"]\n        Plugins[\"flyteplugins\"]\n        IDL[\"flyteidl\"]\n        StdLib[\"flytestdlib\"]\n        CoPilot[\"flytecopilot\"]\n        Ctl[\"flytectl\"]\n        Catalog[\"datacatalog\"]\n    end\n\n    Components --\u003e|\"Build with\"| CompileStep[\"make compile\"]\n    CompileStep --\u003e TestStep[\"make test\"]\n    TestStep --\u003e IntegrationStep[\"Integration Testing\"]\n    IntegrationStep --\u003e DeployStep[\"make deploy_sandbox\"]\n    DeployStep --\u003e ValidateStep[\"Validate changes\"]\n\n    ValidateStep --\u003e|\"If successful\"| PRStep[\"Create Pull Request\"]\n```\n\nSources: [Makefile:16-25](), [Makefile:130-139]()\n\n## Contribution Process\n\n### Pull Request Workflow\n\nThe following diagram outlines the recommended workflow for contributing to Flyte:\n\n```mermaid\nsequenceDiagram\n    participant Developer\n    participant GitRepo as \"GitHub Repository\"\n    participant CI as \"CI/CD Pipeline\"\n    participant Maintainer\n    \n    Developer-\u003e\u003eGitRepo: 1. Fork repository\n    Developer-\u003e\u003eDeveloper: 2. Clone fork locally\n    Developer-\u003e\u003eDeveloper: 3. Create feature branch\n    Developer-\u003e\u003eDeveloper: 4. Make changes\n    Developer-\u003e\u003eDeveloper: 5. Run tests locally\n    Developer-\u003e\u003eGitRepo: 6. Push changes to fork\n    Developer-\u003e\u003eGitRepo: 7. Create Pull Request\n    GitRepo-\u003e\u003eCI: 8. Trigger CI workflow\n    CI-\u003e\u003eGitRepo: 9. Report test results\n    Maintainer-\u003e\u003eGitRepo: 10. Review code\n    \n    alt Tests pass and review approved\n        Maintainer-\u003e\u003eGitRepo: Merge PR\n    else Issues found\n        Maintainer-\u003e\u003eDeveloper: Request changes\n        Developer-\u003e\u003eDeveloper: Address feedback\n        Developer-\u003e\u003eGitRepo: Update PR\n    end\n```\n\n### Code Quality\n\nBefore submitting a pull request, ensure that your code:\n\n1. Has proper tests\n2. Follows Go code style conventions\n3. Has appropriate documentation\n4. Passes all CI checks\n\nRun the following commands before submitting your changes:\n\n```bash\nmake go-tidy      # Ensure go.mod files are up to date\nmake lint         # Run linting checks\nmake test         # Run unit tests\n```\n\nSources: [Makefile:130-139](), [Makefile:142-147]()\n\n## Release Process\n\nFlyte follows a standard release process managed through GitHub releases. The release process is automated using scripts in the repository.\n\n```mermaid\nflowchart TD\n    A[\"Code ready for release\"] --\u003e B[\"Create release branch\"]\n    B --\u003e C[\"Run release automation\"]\n    C --\u003e D[\"make release_automation\"]\n    D --\u003e E[\"Tag release\"]\n    E --\u003e F[\"GitHub Actions build release artifacts\"]\n    F --\u003e G[\"Publish release\"]\n```\n\nThe release automation script handles:\n- Generating release artifacts\n- Creating documentation\n- Building Docker images\n- Generating Helm charts and manifests\n\nSources: [Makefile:39-44]()\n\n## Documentation\n\nDocumentation is a crucial part of the Flyte project. To build and contribute to documentation:\n\n```bash\n# Install documentation dependencies\nmake install-piptools\nmake install-conda-lock\n\n# Build documentation locally\nmake dev-docs\n```\n\nThe documentation uses Sphinx and is hosted on Read the Docs.\n\nSources: [Makefile:50-108]()\n\n## Additional Development Tips\n\n### Working with Helm Charts\n\nFor Kubernetes deployments, Flyte uses Helm charts. To work with these charts:\n\n```bash\n# Update Helm chart dependencies\nmake helm_update\n\n# Install Helm charts\nmake helm_install\n\n# Upgrade existing installation\nmake helm_upgrade\n```\n\nSources: [Makefile:34-84]()\n\n### Building for Multiple Platforms\n\nFlyte supports building for different platforms:\n\n```bash\n# Build for local platform\nmake compile\n\n# Build for Linux\nmake linux_compile\n\n# Build multi-architecture Docker image\nmake build_native_flyte\n```\n\nSources: [Makefile:16-29](), [Makefile:119-126]()\n\n### Quick Reference for Common Development Tasks\n\n| Task | Command |\n|------|---------|\n| Set up local dev environment | `make setup_local_dev` |\n| Build the Flyte binary | `make compile` |\n| Update all go.mod files | `make go-tidy` |\n| Run spell check | `make spellcheck` |\n| Test Helm charts | `make lint-helm-charts` |\n| Build documentation | `make dev-docs` |\n| Clean build artifacts | `make clean` |\n\nSources: [Makefile:110-152]()"])</script><script>self.__next_f.push([1,"2b:T2ddb,"])</script><script>self.__next_f.push([1,"# Build System\n\n\u003cdetails\u003e\n\u003csummary\u003eRelevant source files\u003c/summary\u003e\n\nThe following files were used as context for generating this wiki page:\n\n- [Makefile](Makefile)\n\n\u003c/details\u003e\n\n\n\n## Purpose and Scope\n\nThis document provides a technical overview of the Flyte build system, which handles compilation, dependency management, deployment preparation, and development workflow automation. The build system is primarily implemented through a set of Makefiles that coordinate various build tools across multiple languages and components. For information about the CI/CD pipeline that uses this build system, see [CI/CD Pipeline](#7.2).\n\n## Build System Architecture\n\nThe Flyte build system is organized as a collection of Makefile targets that coordinate various build processes across the monorepo structure.\n\n```mermaid\ngraph TD\n    subgraph \"Main Build System\"\n        MakeFile[\"Makefile\"] --\u003e |includes| EndToEndTests[\"boilerplate/flyte/end2end/Makefile\"]\n        MakeFile --\u003e |includes| GolangTests[\"boilerplate/flyte/golang_test_targets/Makefile\"]\n        MakeFile --\u003e BuildTargets[\"Build Targets\"]\n    end\n    \n    subgraph \"Build Targets\"\n        Compilation[\"Compilation Targets:\u003cbr/\u003ecompile, linux_compile\"]\n        ArtifactGeneration[\"Artifact Generation:\u003cbr/\u003eprepare_artifacts, release_automation\"]\n        DeploymentTools[\"Deployment Tools:\u003cbr/\u003ehelm, deploy_sandbox\"]\n        Documentation[\"Documentation:\u003cbr/\u003edocs, dev-docs\"]\n        DependencyManagement[\"Dependency Management:\u003cbr/\u003ego-tidy, conda-lock\"]\n        DevTools[\"Development Tools:\u003cbr/\u003esetup_local_dev\"]\n    end\n    \n    BuildTargets --\u003e Compilation\n    BuildTargets --\u003e ArtifactGeneration\n    BuildTargets --\u003e DeploymentTools\n    BuildTargets --\u003e Documentation\n    BuildTargets --\u003e DependencyManagement\n    BuildTargets --\u003e DevTools\n    \n    subgraph \"Build Inputs\"\n        GoModules[\"Go Modules\"]\n        PythonDeps[\"Python Dependencies\"]\n        FlyteConsole[\"FlyteConsole Frontend\"]\n        HelmCharts[\"Helm Charts\"]\n    end\n    \n    subgraph \"Build Outputs\"\n        FlyteBinary[\"Flyte Binary\"]\n        DockerImages[\"Docker Images\"]\n        K8sManifests[\"Kubernetes Manifests\"]\n        Docs[\"Documentation\"]\n    end\n    \n    GoModules --\u003e Compilation\n    PythonDeps --\u003e DependencyManagement\n    FlyteConsole --\u003e Compilation\n    HelmCharts --\u003e DeploymentTools\n    \n    Compilation --\u003e FlyteBinary\n    ArtifactGeneration --\u003e DockerImages\n    DeploymentTools --\u003e K8sManifests\n    Documentation --\u003e Docs\n```\n\nSources: [Makefile:1-152]()\n\n## Core Components\n\nThe Flyte build system integrates several key components:\n\n1. **Makefile Targets**: Primary interface for developers to build, test, and deploy Flyte\n2. **Versioning System**: Extracts version information from Git\n3. **Dependency Management**: Handles Go and Python dependencies\n4. **Documentation Generation**: Builds Sphinx documentation\n5. **Containerization**: Creates Docker images for Flyte components\n6. **Kubernetes Deployment**: Generates Helm charts and manifests\n\nSources: [Makefile:9-13](), [Makefile:50-62](), [Makefile:74-84]()\n\n## Versioning System\n\nFlyte uses Git tags and commit hashes to generate version information at build time. This information is injected into binaries through linker flags.\n\n```mermaid\ngraph LR\n    subgraph \"Version Generation\"\n        GitTag[\"Git Tag\u003cbr/\u003e(git describe)\"] --\u003e GitVersion[\"GIT_VERSION\"]\n        GitCommit[\"Git Commit Hash\u003cbr/\u003e(git rev-parse)\"] --\u003e GitHash[\"GIT_HASH\"]\n        CurrentDate[\"Current Date\"] --\u003e Timestamp[\"TIMESTAMP\"]\n    end\n    \n    subgraph \"Binary Compilation\"\n        GitVersion --\u003e LinkerFlags[\"LD_FLAGS\"]\n        GitHash --\u003e LinkerFlags\n        Timestamp --\u003e LinkerFlags\n        LinkerFlags --\u003e GoBuild[\"go build -ldflags=$(LD_FLAGS)\"]\n        GoBuild --\u003e CompiledBinary[\"Flyte Binary\u003cbr/\u003ewith Version Info\"]\n    end\n```\n\nThe version information is encoded in the binary through linker flags that set values in the `flytestdlib/version` package:\n\n- `Version`: Git tag and commit distance (e.g., \"v1.2.3-5-g12345\")\n- `Build`: Short Git commit hash\n- `BuildTime`: Build timestamp in YYYY-MM-DD format\n\nSources: [Makefile:9-13](), [Makefile:21-23]()\n\n## Build Targets\n\n### Compilation Targets\n\n| Target | Description | Command |\n|--------|-------------|---------|\n| `compile` | Builds the Flyte binary for host platform | `go build -tags console -ldflags=$(LD_FLAGS) ./cmd/` |\n| `linux_compile` | Cross-compiles for Linux | `GOOS=linux GOARCH=amd64 CGO_ENABLED=0 go build ...` |\n| `cmd/single/dist` | Fetches FlyteConsole frontend assets | `script/get_flyteconsole_dist.sh` |\n\nSources: [Makefile:16-28]()\n\n### Dependency Management\n\n| Target | Description |\n|--------|-------------|\n| `go-tidy` | Runs `go mod tidy` on all Go modules in the repository |\n| `install-piptools` | Installs Python pip-tools for dependency management |\n| `install-conda-lock` | Installs conda-lock for Python environment management |\n| `conda-lock` | Generates lockfiles for Python environments |\n\nSources: [Makefile:50-62](), [Makefile:128-138]()\n\n### Deployment and Release\n\n| Target | Description |\n|--------|-------------|\n| `helm` | Generates Kubernetes manifests from Helm charts |\n| `release_automation` | Prepares release artifacts |\n| `deploy_sandbox` | Deploys to the Flyte sandbox environment |\n| `helm_update` | Updates Helm chart dependencies |\n| `helm_install` | Installs Flyte using Helm |\n| `helm_upgrade` | Upgrades an existing Flyte installation |\n\nSources: [Makefile:34-48](), [Makefile:74-84]()\n\n### Documentation\n\n| Target | Description |\n|--------|-------------|\n| `docs` | Builds Sphinx documentation |\n| `dev-docs` | Builds documentation in a Docker container for local development |\n\nSources: [Makefile:87-108]()\n\n## Multi-Module Build Process\n\nFlyte's monorepo contains multiple Go modules that must be built and maintained together. The build system provides targets to manage dependencies across these modules.\n\n```mermaid\ngraph TD\n    subgraph \"Go Module Structure\"\n        FlyteCLI[\"flytectl\"]\n        FlytePropeller[\"flytepropeller\"]\n        FlyteAdmin[\"flyteadmin\"]\n        DataCatalog[\"datacatalog\"]\n        FlytePlugins[\"flyteplugins\"]\n        FlyteCopilot[\"flytecopilot\"]\n        FlyteIDL[\"flyteidl\"]\n        FlyteStdLib[\"flytestdlib\"]\n    end\n    \n    subgraph \"Build Operations\"\n        GoTidy[\"go-tidy target\"]\n        Compile[\"compile target\"]\n    end\n    \n    GoTidy --\u003e FlyteCLI\n    GoTidy --\u003e FlytePropeller\n    GoTidy --\u003e FlyteAdmin\n    GoTidy --\u003e DataCatalog\n    GoTidy --\u003e FlytePlugins\n    GoTidy --\u003e FlyteCopilot\n    GoTidy --\u003e FlyteIDL\n    GoTidy --\u003e FlyteStdLib\n    \n    Compile --\u003e MainBinary[\"Main Flyte Binary\"]\n    \n    FlyteStdLib --\u003e |dependency| FlyteCLI\n    FlyteStdLib --\u003e |dependency| FlytePropeller\n    FlyteStdLib --\u003e |dependency| FlyteAdmin\n    FlyteStdLib --\u003e |dependency| DataCatalog\n    FlyteStdLib --\u003e |dependency| FlytePlugins\n    FlyteStdLib --\u003e |dependency| FlyteCopilot\n    \n    FlyteIDL --\u003e |dependency| FlyteCLI\n    FlyteIDL --\u003e |dependency| FlytePropeller\n    FlyteIDL --\u003e |dependency| FlyteAdmin\n    FlyteIDL --\u003e |dependency| DataCatalog\n    FlyteIDL --\u003e |dependency| FlytePlugins\n```\n\nThe `go-tidy` target ensures that the `go.mod` files in each module are properly maintained. This is important for the correct resolution of dependencies between the modules.\n\nSources: [Makefile:128-138]()\n\n## Docker Image Build Process\n\nFlyte components are packaged as Docker images for deployment. The build system includes targets for building these images.\n\n```mermaid\ngraph TD\n    subgraph \"Docker Image Build\"\n        BuildNativeFlyte[\"build_native_flyte target\"]\n        DockerBuild[\"docker build\"]\n        FlyteConsole[\"FlyteConsole Frontend\u003cbr/\u003e(from script/get_flyteconsole_dist.sh)\"]\n        GoBuild[\"Go Build Process\"]\n    end\n    \n    subgraph \"Docker Build Context\"\n        Dockerfile[\"Dockerfile\"]\n        SourceCode[\"Source Code\"]\n        BuildOutputs[\"Build Outputs\"]\n    end\n    \n    subgraph \"Output\"\n        FlyteImage[\"flyte-binary:native\u003cbr/\u003eDocker Image\"]\n    end\n    \n    BuildNativeFlyte --\u003e DockerBuild\n    FlyteConsole --\u003e DockerBuild\n    SourceCode --\u003e DockerBuild\n    Dockerfile --\u003e DockerBuild\n    BuildOutputs --\u003e DockerBuild\n    \n    DockerBuild --\u003e FlyteImage\n```\n\nThe `build_native_flyte` target builds a Docker image containing the Flyte binary for the host architecture. This is primarily used for local development. Official images are multi-architecture and built through the CI/CD pipeline.\n\nSources: [Makefile:119-126]()\n\n## Development Workflow\n\nThe build system includes targets to facilitate local development:\n\n```mermaid\ngraph TD\n    subgraph \"Local Development Setup\"\n        SetupLocalDev[\"setup_local_dev target\"]\n        K3dCluster[\"k3d Cluster\"]\n        FlyteDependencies[\"Flyte Dependencies\"]\n    end\n    \n    subgraph \"Development Cycle\"\n        Compile[\"compile target\"]\n        DevDocs[\"dev-docs target\"]\n        LocalTesting[\"Local Testing\"]\n    end\n    \n    SetupLocalDev --\u003e K3dCluster\n    SetupLocalDev --\u003e FlyteDependencies\n    \n    K3dCluster --\u003e LocalTesting\n    Compile --\u003e LocalTesting\n    DevDocs --\u003e |Documentation Preview| LocalTesting\n```\n\nThe `setup_local_dev` target sets up a local Kubernetes environment using k3d and installs the necessary dependencies for Flyte development.\n\nSources: [Makefile:115-117]()\n\n## Documentation Build System\n\nFlyte uses a sophisticated documentation build system that supports both local development and CI builds:\n\n```mermaid\ngraph TD\n    subgraph \"Documentation Sources\"\n        SphinxSources[\"Sphinx Documentation\u003cbr/\u003eSources\"]\n        CondaEnvironment[\"conda Environment\u003cbr/\u003e(monodocs-environment.yaml)\"]\n    end\n    \n    subgraph \"Build Process\"\n        CondaLock[\"conda-lock target\"] --\u003e EnvironmentLock[\"monodocs-environment.lock.yaml\"]\n        DockerBuildCondaLock[\"Docker Build\u003cbr/\u003e(docs/Dockerfile.conda-lock)\"] --\u003e CondaLock\n        \n        DevDocsImage[\"Docker Build\u003cbr/\u003e(docs/Dockerfile.docs)\"] --\u003e DevDocs[\"dev-docs target\"]\n        EnvironmentLock --\u003e DevDocsImage\n        \n        SphinxBuild[\"sphinx-build\u003cbr/\u003e(make -C docs clean html)\"] --\u003e DocsOutput[\"HTML Documentation\"]\n    end\n    \n    SphinxSources --\u003e SphinxBuild\n    SphinxSources --\u003e DevDocs\n    CondaEnvironment --\u003e CondaLock\n    \n    DevDocs --\u003e |Local Preview| Developer[\"Developer\"]\n    DocsOutput --\u003e |CI/CD Pipeline| PublishedDocs[\"Published Documentation\"]\n```\n\nThe documentation build system uses Conda environments to ensure reproducible builds across different platforms. Docker is used to provide a consistent build environment for local development.\n\nSources: [Makefile:87-108](), [Makefile:91-103]()\n\n## Integration with CI/CD\n\nThe build system is designed to work with the CI/CD pipeline, providing targets that are used in CI workflows:\n\n| Target | CI Usage |\n|--------|----------|\n| `docs` | Build documentation in CI |\n| `linux_compile` | Build Linux binaries for releases |\n| `release_automation` | Prepare release artifacts |\n| `lint-helm-charts` | Validate Helm charts |\n| `spellcheck` | Run code spellcheck |\n\nThe CI/CD pipeline uses these targets to validate changes, build artifacts, and publish releases.\n\nSources: [Makefile:87-90](), [Makefile:26-28](), [Makefile:39-44](), [Makefile:141-147]()\n\n## Best Practices for Development\n\nWhen working with the Flyte build system, consider these best practices:\n\n1. Use `make compile` for local development and testing\n2. Run `make go-tidy` before committing changes to ensure dependency files are up to date\n3. Use `make dev-docs` to preview documentation changes locally\n4. Set up a local development environment with `make setup_local_dev`\n5. Use `make help` to see a list of available make targets and their descriptions\n\nSources: [Makefile:110-113]()"])</script><script>self.__next_f.push([1,"5:[\"$\",\"$L15\",null,{\"repoName\":\"flyteorg/flyte\",\"hasConfig\":false,\"canSteer\":true,\"children\":[\"$\",\"$L16\",null,{\"wiki\":{\"metadata\":{\"repo_name\":\"flyteorg/flyte\",\"commit_hash\":\"42002f4d\",\"generated_at\":\"2025-04-20T05:45:11.919625\",\"config\":null,\"config_source\":null},\"pages\":[{\"page_plan\":{\"id\":\"1\",\"title\":\"Overview\"},\"content\":\"$17\"},{\"page_plan\":{\"id\":\"1.1\",\"title\":\"Core Components\"},\"content\":\"$18\"},{\"page_plan\":{\"id\":\"1.2\",\"title\":\"System Architecture\"},\"content\":\"$19\"},{\"page_plan\":{\"id\":\"2\",\"title\":\"Deployment\"},\"content\":\"$1a\"},{\"page_plan\":{\"id\":\"2.1\",\"title\":\"Kubernetes Deployment with Helm\"},\"content\":\"$1b\"},{\"page_plan\":{\"id\":\"2.2\",\"title\":\"Sandbox Environment\"},\"content\":\"$1c\"},{\"page_plan\":{\"id\":\"3\",\"title\":\"Workflow Execution Engine\"},\"content\":\"$1d\"},{\"page_plan\":{\"id\":\"3.1\",\"title\":\"FlyteAdmin Execution Management\"},\"content\":\"$1e\"},{\"page_plan\":{\"id\":\"3.2\",\"title\":\"FlytePropeller Execution\"},\"content\":\"$1f\"},{\"page_plan\":{\"id\":\"3.3\",\"title\":\"Task Execution\"},\"content\":\"$20\"},{\"page_plan\":{\"id\":\"3.4\",\"title\":\"Array Tasks\"},\"content\":\"$21\"},{\"page_plan\":{\"id\":\"4\",\"title\":\"Plugin System\"},\"content\":\"$22\"},{\"page_plan\":{\"id\":\"4.1\",\"title\":\"Kubernetes Plugin Machinery\"},\"content\":\"$23\"},{\"page_plan\":{\"id\":\"4.2\",\"title\":\"WebAPI Plugins\"},\"content\":\"$24\"},{\"page_plan\":{\"id\":\"4.3\",\"title\":\"Machine Learning Operators\"},\"content\":\"$25\"},{\"page_plan\":{\"id\":\"5\",\"title\":\"API and Interface Definitions\"},\"content\":\"$26\"},{\"page_plan\":{\"id\":\"5.1\",\"title\":\"FlyteIDL\"},\"content\":\"$27\"},{\"page_plan\":{\"id\":\"5.2\",\"title\":\"Admin Service\"},\"content\":\"$28\"},{\"page_plan\":{\"id\":\"6\",\"title\":\"Command Line Interface\"},\"content\":\"$29\"},{\"page_plan\":{\"id\":\"7\",\"title\":\"Development and Contribution\"},\"content\":\"$2a\"},{\"page_plan\":{\"id\":\"7.1\",\"title\":\"Build System\"},\"content\":\"$2b\"}]},\"children\":\"$L2c\"}]}]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"TechArticle\\\",\\\"headline\\\":\\\"Overview\\\",\\\"description\\\":\\\"Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect\\\",\\\"image\\\":\\\"https://deepwiki.com/flyteorg/flyte/og-image.png\\\",\\\"datePublished\\\":\\\"2025-04-20T05:45:11.919625\\\",\\\"dateModified\\\":\\\"2025-04-20T05:45:11.919625\\\",\\\"author\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"DeepWiki\\\",\\\"url\\\":\\\"https://deepwiki.com\\\"},\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"DeepWiki\\\",\\\"logo\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"url\\\":\\\"https://deepwiki.com/icon.png\\\"}},\\\"mainEntityOfPage\\\":{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://deepwiki.com/flyteorg/flyte\\\"}}\"}}],[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]\n"])</script><script>self.__next_f.push([1,"e:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"flyteorg/flyte | DeepWiki\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect\"}],[\"$\",\"meta\",\"2\",{\"name\":\"keywords\",\"content\":\"flyteorg/flyte,flyteorg,flyte,documentation,wiki,codebase,AI documentation,Devin,Overview\"}],[\"$\",\"link\",\"3\",{\"rel\":\"canonical\",\"href\":\"https://deepwiki.com/flyteorg/flyte\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"flyteorg/flyte | DeepWiki\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:url\",\"content\":\"https://deepwiki.com/flyteorg/flyte\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:site_name\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image\",\"content\":\"https://deepwiki.com/flyteorg/flyte/og-image.png?page=1\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:site\",\"content\":\"@cognition\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:creator\",\"content\":\"@cognition\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"flyteorg/flyte | DeepWiki\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"Flyte is an open-source workflow automation platform designed for data processing, machine learning, and analytics workloads. This document provides a high-level overview of the Flyte system architect\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image\",\"content\":\"https://deepwiki.com/flyteorg/flyte/og-image.png?page=1\"}],[\"$\",\"link\",\"16\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"17\",{\"rel\":\"icon\",\"href\":\"/icon.png?1ee4c6a68a73a205\",\"type\":\"image/png\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"18\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?a4f658907db0ab87\",\"type\":\"image/png\",\"sizes\":\"180x180\"}],[\"$\",\"$L2d\",\"19\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"13:\"$e:metadata\"\n"])</script><script>self.__next_f.push([1,"2c:[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]\n"])</script></body></html>